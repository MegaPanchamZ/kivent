<!DOCTYPE html>
<!-- Generated by Cython 0.29.17 -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Cython: renderers.pyx</title>
    <style type="text/css">
    
body.cython { font-family: courier; font-size: 12; }

.cython.tag  {  }
.cython.line { margin: 0em }
.cython.code { font-size: 9; color: #444444; display: none; margin: 0px 0px 0px 8px; border-left: 8px none; }

.cython.line .run { background-color: #B0FFB0; }
.cython.line .mis { background-color: #FFB0B0; }
.cython.code.run  { border-left: 8px solid #B0FFB0; }
.cython.code.mis  { border-left: 8px solid #FFB0B0; }

.cython.code .py_c_api  { color: red; }
.cython.code .py_macro_api  { color: #FF7000; }
.cython.code .pyx_c_api  { color: #FF3000; }
.cython.code .pyx_macro_api  { color: #FF7000; }
.cython.code .refnanny  { color: #FFA000; }
.cython.code .trace  { color: #FFA000; }
.cython.code .error_goto  { color: #FFA000; }

.cython.code .coerce  { color: #008000; border: 1px dotted #008000 }
.cython.code .py_attr { color: #FF0000; font-weight: bold; }
.cython.code .c_attr  { color: #0000FF; }
.cython.code .py_call { color: #FF0000; font-weight: bold; }
.cython.code .c_call  { color: #0000FF; }

.cython.score-0 {background-color: #FFFFff;}
.cython.score-1 {background-color: #FFFFe7;}
.cython.score-2 {background-color: #FFFFd4;}
.cython.score-3 {background-color: #FFFFc4;}
.cython.score-4 {background-color: #FFFFb6;}
.cython.score-5 {background-color: #FFFFaa;}
.cython.score-6 {background-color: #FFFF9f;}
.cython.score-7 {background-color: #FFFF96;}
.cython.score-8 {background-color: #FFFF8d;}
.cython.score-9 {background-color: #FFFF86;}
.cython.score-10 {background-color: #FFFF7f;}
.cython.score-11 {background-color: #FFFF79;}
.cython.score-12 {background-color: #FFFF73;}
.cython.score-13 {background-color: #FFFF6e;}
.cython.score-14 {background-color: #FFFF6a;}
.cython.score-15 {background-color: #FFFF66;}
.cython.score-16 {background-color: #FFFF62;}
.cython.score-17 {background-color: #FFFF5e;}
.cython.score-18 {background-color: #FFFF5b;}
.cython.score-19 {background-color: #FFFF57;}
.cython.score-20 {background-color: #FFFF55;}
.cython.score-21 {background-color: #FFFF52;}
.cython.score-22 {background-color: #FFFF4f;}
.cython.score-23 {background-color: #FFFF4d;}
.cython.score-24 {background-color: #FFFF4b;}
.cython.score-25 {background-color: #FFFF48;}
.cython.score-26 {background-color: #FFFF46;}
.cython.score-27 {background-color: #FFFF44;}
.cython.score-28 {background-color: #FFFF43;}
.cython.score-29 {background-color: #FFFF41;}
.cython.score-30 {background-color: #FFFF3f;}
.cython.score-31 {background-color: #FFFF3e;}
.cython.score-32 {background-color: #FFFF3c;}
.cython.score-33 {background-color: #FFFF3b;}
.cython.score-34 {background-color: #FFFF39;}
.cython.score-35 {background-color: #FFFF38;}
.cython.score-36 {background-color: #FFFF37;}
.cython.score-37 {background-color: #FFFF36;}
.cython.score-38 {background-color: #FFFF35;}
.cython.score-39 {background-color: #FFFF34;}
.cython.score-40 {background-color: #FFFF33;}
.cython.score-41 {background-color: #FFFF32;}
.cython.score-42 {background-color: #FFFF31;}
.cython.score-43 {background-color: #FFFF30;}
.cython.score-44 {background-color: #FFFF2f;}
.cython.score-45 {background-color: #FFFF2e;}
.cython.score-46 {background-color: #FFFF2d;}
.cython.score-47 {background-color: #FFFF2c;}
.cython.score-48 {background-color: #FFFF2b;}
.cython.score-49 {background-color: #FFFF2b;}
.cython.score-50 {background-color: #FFFF2a;}
.cython.score-51 {background-color: #FFFF29;}
.cython.score-52 {background-color: #FFFF29;}
.cython.score-53 {background-color: #FFFF28;}
.cython.score-54 {background-color: #FFFF27;}
.cython.score-55 {background-color: #FFFF27;}
.cython.score-56 {background-color: #FFFF26;}
.cython.score-57 {background-color: #FFFF26;}
.cython.score-58 {background-color: #FFFF25;}
.cython.score-59 {background-color: #FFFF24;}
.cython.score-60 {background-color: #FFFF24;}
.cython.score-61 {background-color: #FFFF23;}
.cython.score-62 {background-color: #FFFF23;}
.cython.score-63 {background-color: #FFFF22;}
.cython.score-64 {background-color: #FFFF22;}
.cython.score-65 {background-color: #FFFF22;}
.cython.score-66 {background-color: #FFFF21;}
.cython.score-67 {background-color: #FFFF21;}
.cython.score-68 {background-color: #FFFF20;}
.cython.score-69 {background-color: #FFFF20;}
.cython.score-70 {background-color: #FFFF1f;}
.cython.score-71 {background-color: #FFFF1f;}
.cython.score-72 {background-color: #FFFF1f;}
.cython.score-73 {background-color: #FFFF1e;}
.cython.score-74 {background-color: #FFFF1e;}
.cython.score-75 {background-color: #FFFF1e;}
.cython.score-76 {background-color: #FFFF1d;}
.cython.score-77 {background-color: #FFFF1d;}
.cython.score-78 {background-color: #FFFF1c;}
.cython.score-79 {background-color: #FFFF1c;}
.cython.score-80 {background-color: #FFFF1c;}
.cython.score-81 {background-color: #FFFF1c;}
.cython.score-82 {background-color: #FFFF1b;}
.cython.score-83 {background-color: #FFFF1b;}
.cython.score-84 {background-color: #FFFF1b;}
.cython.score-85 {background-color: #FFFF1a;}
.cython.score-86 {background-color: #FFFF1a;}
.cython.score-87 {background-color: #FFFF1a;}
.cython.score-88 {background-color: #FFFF1a;}
.cython.score-89 {background-color: #FFFF19;}
.cython.score-90 {background-color: #FFFF19;}
.cython.score-91 {background-color: #FFFF19;}
.cython.score-92 {background-color: #FFFF19;}
.cython.score-93 {background-color: #FFFF18;}
.cython.score-94 {background-color: #FFFF18;}
.cython.score-95 {background-color: #FFFF18;}
.cython.score-96 {background-color: #FFFF18;}
.cython.score-97 {background-color: #FFFF17;}
.cython.score-98 {background-color: #FFFF17;}
.cython.score-99 {background-color: #FFFF17;}
.cython.score-100 {background-color: #FFFF17;}
.cython.score-101 {background-color: #FFFF16;}
.cython.score-102 {background-color: #FFFF16;}
.cython.score-103 {background-color: #FFFF16;}
.cython.score-104 {background-color: #FFFF16;}
.cython.score-105 {background-color: #FFFF16;}
.cython.score-106 {background-color: #FFFF15;}
.cython.score-107 {background-color: #FFFF15;}
.cython.score-108 {background-color: #FFFF15;}
.cython.score-109 {background-color: #FFFF15;}
.cython.score-110 {background-color: #FFFF15;}
.cython.score-111 {background-color: #FFFF15;}
.cython.score-112 {background-color: #FFFF14;}
.cython.score-113 {background-color: #FFFF14;}
.cython.score-114 {background-color: #FFFF14;}
.cython.score-115 {background-color: #FFFF14;}
.cython.score-116 {background-color: #FFFF14;}
.cython.score-117 {background-color: #FFFF14;}
.cython.score-118 {background-color: #FFFF13;}
.cython.score-119 {background-color: #FFFF13;}
.cython.score-120 {background-color: #FFFF13;}
.cython.score-121 {background-color: #FFFF13;}
.cython.score-122 {background-color: #FFFF13;}
.cython.score-123 {background-color: #FFFF13;}
.cython.score-124 {background-color: #FFFF13;}
.cython.score-125 {background-color: #FFFF12;}
.cython.score-126 {background-color: #FFFF12;}
.cython.score-127 {background-color: #FFFF12;}
.cython.score-128 {background-color: #FFFF12;}
.cython.score-129 {background-color: #FFFF12;}
.cython.score-130 {background-color: #FFFF12;}
.cython.score-131 {background-color: #FFFF12;}
.cython.score-132 {background-color: #FFFF11;}
.cython.score-133 {background-color: #FFFF11;}
.cython.score-134 {background-color: #FFFF11;}
.cython.score-135 {background-color: #FFFF11;}
.cython.score-136 {background-color: #FFFF11;}
.cython.score-137 {background-color: #FFFF11;}
.cython.score-138 {background-color: #FFFF11;}
.cython.score-139 {background-color: #FFFF11;}
.cython.score-140 {background-color: #FFFF11;}
.cython.score-141 {background-color: #FFFF10;}
.cython.score-142 {background-color: #FFFF10;}
.cython.score-143 {background-color: #FFFF10;}
.cython.score-144 {background-color: #FFFF10;}
.cython.score-145 {background-color: #FFFF10;}
.cython.score-146 {background-color: #FFFF10;}
.cython.score-147 {background-color: #FFFF10;}
.cython.score-148 {background-color: #FFFF10;}
.cython.score-149 {background-color: #FFFF10;}
.cython.score-150 {background-color: #FFFF0f;}
.cython.score-151 {background-color: #FFFF0f;}
.cython.score-152 {background-color: #FFFF0f;}
.cython.score-153 {background-color: #FFFF0f;}
.cython.score-154 {background-color: #FFFF0f;}
.cython.score-155 {background-color: #FFFF0f;}
.cython.score-156 {background-color: #FFFF0f;}
.cython.score-157 {background-color: #FFFF0f;}
.cython.score-158 {background-color: #FFFF0f;}
.cython.score-159 {background-color: #FFFF0f;}
.cython.score-160 {background-color: #FFFF0f;}
.cython.score-161 {background-color: #FFFF0e;}
.cython.score-162 {background-color: #FFFF0e;}
.cython.score-163 {background-color: #FFFF0e;}
.cython.score-164 {background-color: #FFFF0e;}
.cython.score-165 {background-color: #FFFF0e;}
.cython.score-166 {background-color: #FFFF0e;}
.cython.score-167 {background-color: #FFFF0e;}
.cython.score-168 {background-color: #FFFF0e;}
.cython.score-169 {background-color: #FFFF0e;}
.cython.score-170 {background-color: #FFFF0e;}
.cython.score-171 {background-color: #FFFF0e;}
.cython.score-172 {background-color: #FFFF0e;}
.cython.score-173 {background-color: #FFFF0d;}
.cython.score-174 {background-color: #FFFF0d;}
.cython.score-175 {background-color: #FFFF0d;}
.cython.score-176 {background-color: #FFFF0d;}
.cython.score-177 {background-color: #FFFF0d;}
.cython.score-178 {background-color: #FFFF0d;}
.cython.score-179 {background-color: #FFFF0d;}
.cython.score-180 {background-color: #FFFF0d;}
.cython.score-181 {background-color: #FFFF0d;}
.cython.score-182 {background-color: #FFFF0d;}
.cython.score-183 {background-color: #FFFF0d;}
.cython.score-184 {background-color: #FFFF0d;}
.cython.score-185 {background-color: #FFFF0d;}
.cython.score-186 {background-color: #FFFF0d;}
.cython.score-187 {background-color: #FFFF0c;}
.cython.score-188 {background-color: #FFFF0c;}
.cython.score-189 {background-color: #FFFF0c;}
.cython.score-190 {background-color: #FFFF0c;}
.cython.score-191 {background-color: #FFFF0c;}
.cython.score-192 {background-color: #FFFF0c;}
.cython.score-193 {background-color: #FFFF0c;}
.cython.score-194 {background-color: #FFFF0c;}
.cython.score-195 {background-color: #FFFF0c;}
.cython.score-196 {background-color: #FFFF0c;}
.cython.score-197 {background-color: #FFFF0c;}
.cython.score-198 {background-color: #FFFF0c;}
.cython.score-199 {background-color: #FFFF0c;}
.cython.score-200 {background-color: #FFFF0c;}
.cython.score-201 {background-color: #FFFF0c;}
.cython.score-202 {background-color: #FFFF0c;}
.cython.score-203 {background-color: #FFFF0b;}
.cython.score-204 {background-color: #FFFF0b;}
.cython.score-205 {background-color: #FFFF0b;}
.cython.score-206 {background-color: #FFFF0b;}
.cython.score-207 {background-color: #FFFF0b;}
.cython.score-208 {background-color: #FFFF0b;}
.cython.score-209 {background-color: #FFFF0b;}
.cython.score-210 {background-color: #FFFF0b;}
.cython.score-211 {background-color: #FFFF0b;}
.cython.score-212 {background-color: #FFFF0b;}
.cython.score-213 {background-color: #FFFF0b;}
.cython.score-214 {background-color: #FFFF0b;}
.cython.score-215 {background-color: #FFFF0b;}
.cython.score-216 {background-color: #FFFF0b;}
.cython.score-217 {background-color: #FFFF0b;}
.cython.score-218 {background-color: #FFFF0b;}
.cython.score-219 {background-color: #FFFF0b;}
.cython.score-220 {background-color: #FFFF0b;}
.cython.score-221 {background-color: #FFFF0b;}
.cython.score-222 {background-color: #FFFF0a;}
.cython.score-223 {background-color: #FFFF0a;}
.cython.score-224 {background-color: #FFFF0a;}
.cython.score-225 {background-color: #FFFF0a;}
.cython.score-226 {background-color: #FFFF0a;}
.cython.score-227 {background-color: #FFFF0a;}
.cython.score-228 {background-color: #FFFF0a;}
.cython.score-229 {background-color: #FFFF0a;}
.cython.score-230 {background-color: #FFFF0a;}
.cython.score-231 {background-color: #FFFF0a;}
.cython.score-232 {background-color: #FFFF0a;}
.cython.score-233 {background-color: #FFFF0a;}
.cython.score-234 {background-color: #FFFF0a;}
.cython.score-235 {background-color: #FFFF0a;}
.cython.score-236 {background-color: #FFFF0a;}
.cython.score-237 {background-color: #FFFF0a;}
.cython.score-238 {background-color: #FFFF0a;}
.cython.score-239 {background-color: #FFFF0a;}
.cython.score-240 {background-color: #FFFF0a;}
.cython.score-241 {background-color: #FFFF0a;}
.cython.score-242 {background-color: #FFFF0a;}
.cython.score-243 {background-color: #FFFF0a;}
.cython.score-244 {background-color: #FFFF0a;}
.cython.score-245 {background-color: #FFFF0a;}
.cython.score-246 {background-color: #FFFF09;}
.cython.score-247 {background-color: #FFFF09;}
.cython.score-248 {background-color: #FFFF09;}
.cython.score-249 {background-color: #FFFF09;}
.cython.score-250 {background-color: #FFFF09;}
.cython.score-251 {background-color: #FFFF09;}
.cython.score-252 {background-color: #FFFF09;}
.cython.score-253 {background-color: #FFFF09;}
.cython.score-254 {background-color: #FFFF09;}
.cython .hll { background-color: #ffffcc }
.cython  { background: #f8f8f8; }
.cython .c { color: #408080; font-style: italic } /* Comment */
.cython .err { border: 1px solid #FF0000 } /* Error */
.cython .k { color: #008000; font-weight: bold } /* Keyword */
.cython .o { color: #666666 } /* Operator */
.cython .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.cython .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.cython .cp { color: #BC7A00 } /* Comment.Preproc */
.cython .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.cython .c1 { color: #408080; font-style: italic } /* Comment.Single */
.cython .cs { color: #408080; font-style: italic } /* Comment.Special */
.cython .gd { color: #A00000 } /* Generic.Deleted */
.cython .ge { font-style: italic } /* Generic.Emph */
.cython .gr { color: #FF0000 } /* Generic.Error */
.cython .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.cython .gi { color: #00A000 } /* Generic.Inserted */
.cython .go { color: #888888 } /* Generic.Output */
.cython .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.cython .gs { font-weight: bold } /* Generic.Strong */
.cython .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.cython .gt { color: #0044DD } /* Generic.Traceback */
.cython .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.cython .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.cython .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.cython .kp { color: #008000 } /* Keyword.Pseudo */
.cython .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.cython .kt { color: #B00040 } /* Keyword.Type */
.cython .m { color: #666666 } /* Literal.Number */
.cython .s { color: #BA2121 } /* Literal.String */
.cython .na { color: #7D9029 } /* Name.Attribute */
.cython .nb { color: #008000 } /* Name.Builtin */
.cython .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.cython .no { color: #880000 } /* Name.Constant */
.cython .nd { color: #AA22FF } /* Name.Decorator */
.cython .ni { color: #999999; font-weight: bold } /* Name.Entity */
.cython .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.cython .nf { color: #0000FF } /* Name.Function */
.cython .nl { color: #A0A000 } /* Name.Label */
.cython .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.cython .nt { color: #008000; font-weight: bold } /* Name.Tag */
.cython .nv { color: #19177C } /* Name.Variable */
.cython .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.cython .w { color: #bbbbbb } /* Text.Whitespace */
.cython .mb { color: #666666 } /* Literal.Number.Bin */
.cython .mf { color: #666666 } /* Literal.Number.Float */
.cython .mh { color: #666666 } /* Literal.Number.Hex */
.cython .mi { color: #666666 } /* Literal.Number.Integer */
.cython .mo { color: #666666 } /* Literal.Number.Oct */
.cython .sa { color: #BA2121 } /* Literal.String.Affix */
.cython .sb { color: #BA2121 } /* Literal.String.Backtick */
.cython .sc { color: #BA2121 } /* Literal.String.Char */
.cython .dl { color: #BA2121 } /* Literal.String.Delimiter */
.cython .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.cython .s2 { color: #BA2121 } /* Literal.String.Double */
.cython .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.cython .sh { color: #BA2121 } /* Literal.String.Heredoc */
.cython .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.cython .sx { color: #008000 } /* Literal.String.Other */
.cython .sr { color: #BB6688 } /* Literal.String.Regex */
.cython .s1 { color: #BA2121 } /* Literal.String.Single */
.cython .ss { color: #19177C } /* Literal.String.Symbol */
.cython .bp { color: #008000 } /* Name.Builtin.Pseudo */
.cython .fm { color: #0000FF } /* Name.Function.Magic */
.cython .vc { color: #19177C } /* Name.Variable.Class */
.cython .vg { color: #19177C } /* Name.Variable.Global */
.cython .vi { color: #19177C } /* Name.Variable.Instance */
.cython .vm { color: #19177C } /* Name.Variable.Magic */
.cython .il { color: #666666 } /* Literal.Number.Integer.Long */
    </style>
</head>
<body class="cython">
<p><span style="border-bottom: solid 1px grey;">Generated by Cython 0.29.17</span></p>
<p>
    <span style="background-color: #FFFF00">Yellow lines</span> hint at Python interaction.<br />
    Click on a line that starts with a "<code>+</code>" to see the C code that Cython generated for it.
</p>
<p>Raw output: <a href="renderers.c">renderers.c</a></p>
<div class="cython"><pre class="cython line score-0">&#xA0;<span class="">0001</span>: <span class="c"># cython: profile=True</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0002</span>: <span class="c"># cython: embedsignature=True</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0003</span>: <span class="k">from</span> <span class="nn">cpython</span> <span class="k">cimport</span> <span class="nb">bool</span></pre>
<pre class="cython line score-36" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0004</span>: <span class="k">from</span> <span class="nn">kivy.properties</span> <span class="k">import</span> <span class="p">(</span></pre>
<pre class='cython code score-36 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_kivy_properties, __pyx_t_1, -1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 4, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_BooleanProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 4, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_BooleanProperty, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 5, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 4, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_StringProperty, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 5, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 4, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_NumericProperty, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 5, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 4, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_ListProperty, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 5, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0005</span>:     <span class="n">BooleanProperty</span><span class="p">,</span> <span class="n">StringProperty</span><span class="p">,</span> <span class="n">NumericProperty</span><span class="p">,</span> <span class="n">ListProperty</span></pre>
<pre class='cython code score-13 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(4);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 5, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_BooleanProperty);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_BooleanProperty);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_n_s_BooleanProperty);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_StringProperty);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_StringProperty);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_n_s_StringProperty);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_NumericProperty);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_NumericProperty);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 2, __pyx_n_s_NumericProperty);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_ListProperty);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_ListProperty);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 3, __pyx_n_s_ListProperty);
</pre><pre class="cython line score-0">&#xA0;<span class="">0006</span>:     <span class="p">)</span></pre>
<pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0007</span>: <span class="k">from</span> <span class="nn">kivy.graphics</span> <span class="k">import</span> <span class="n">Callback</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 7, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_Callback);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_Callback);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_n_s_Callback);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_kivy_graphics, __pyx_t_2, -1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 7, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_Callback);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 7, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_Callback, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 7, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0008</span>: <span class="k">from</span> <span class="nn">kivy.graphics.instructions</span> <span class="k">cimport</span> <span class="n">RenderContext</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0009</span>: <span class="k">from</span> <span class="nn">kivent_core.rendering.vertex_formats</span> <span class="k">cimport</span> <span class="p">(</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0010</span>:     <span class="n">VertexFormat4F</span><span class="p">,</span> <span class="n">VertexFormat2F4UB</span><span class="p">,</span> <span class="n">VertexFormat7F</span><span class="p">,</span> <span class="n">VertexFormat4F4UB</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0011</span>:     <span class="n">VertexFormat5F4UB</span><span class="p">,</span> <span class="n">VertexFormat7F4UB</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0012</span>:     <span class="p">)</span></pre>
<pre class="cython line score-52" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0013</span>: <span class="k">from</span> <span class="nn">kivent_core.rendering.vertex_formats</span> <span class="k">import</span> <span class="p">(</span></pre>
<pre class='cython code score-52 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_kivent_core_rendering_vertex_for, __pyx_t_1, -1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 13, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_vertex_format_4f);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 13, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_vertex_format_4f, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 14, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_vertex_format_7f);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 13, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_vertex_format_7f, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 14, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_vertex_format_4f4ub);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 13, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_vertex_format_4f4ub, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 14, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_vertex_format_2f4ub);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 13, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_vertex_format_2f4ub, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 15, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_vertex_format_5f4ub);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 13, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_vertex_format_5f4ub, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 15, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_vertex_format_7f4ub);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 13, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_vertex_format_7f4ub, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 15, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-17" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0014</span>:     <span class="n">vertex_format_4f</span><span class="p">,</span> <span class="n">vertex_format_7f</span><span class="p">,</span> <span class="n">vertex_format_4f4ub</span><span class="p">,</span></pre>
<pre class='cython code score-17 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 14, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_vertex_format_4f);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_vertex_format_4f);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_n_s_vertex_format_4f);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_vertex_format_7f);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_vertex_format_7f);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_n_s_vertex_format_7f);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_vertex_format_4f4ub);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_vertex_format_4f4ub);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 2, __pyx_n_s_vertex_format_4f4ub);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_vertex_format_2f4ub);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_vertex_format_2f4ub);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 3, __pyx_n_s_vertex_format_2f4ub);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_vertex_format_5f4ub);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_vertex_format_5f4ub);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 4, __pyx_n_s_vertex_format_5f4ub);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_vertex_format_7f4ub);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_vertex_format_7f4ub);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 5, __pyx_n_s_vertex_format_7f4ub);
</pre><pre class="cython line score-0">&#xA0;<span class="">0015</span>:     <span class="n">vertex_format_2f4ub</span><span class="p">,</span> <span class="n">vertex_format_5f4ub</span><span class="p">,</span> <span class="n">vertex_format_7f4ub</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0016</span>:     <span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0017</span>: <span class="k">from</span> <span class="nn">kivent_core.rendering.vertex_format</span> <span class="k">cimport</span> <span class="n">KEVertexFormat</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0018</span>: <span class="k">from</span> <span class="nn">kivent_core.rendering.cmesh</span> <span class="k">cimport</span> <span class="n">CMesh</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0019</span>: <span class="k">from</span> <span class="nn">kivent_core.rendering.batching</span> <span class="k">cimport</span> <span class="n">BatchManager</span><span class="p">,</span> <span class="n">IndexedBatch</span></pre>
<pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0020</span>: <span class="k">from</span> <span class="nn">kivent_core.managers.resource_managers</span> <span class="k">import</span> <span class="n">texture_manager</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 20, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_texture_manager);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_texture_manager);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_n_s_texture_manager);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_kivent_core_managers_resource_ma, __pyx_t_2, -1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 20, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_texture_manager);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 20, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_texture_manager, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 20, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0021</span>: <span class="k">from</span> <span class="nn">kivent_core.managers.resource_managers</span> <span class="k">cimport</span> <span class="n">ModelManager</span><span class="p">,</span> <span class="n">TextureManager</span></pre>
<pre class="cython line score-108" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0022</span>: <span class="k">from</span> <span class="nn">kivy.graphics.opengl</span> <span class="k">import</span> <span class="p">(</span></pre>
<pre class='cython code score-108 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_kivy_graphics_opengl, __pyx_t_1, -1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_glEnable);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_glEnable, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 23, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_glDisable);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_glDisable, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 23, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_glBlendFunc);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_glBlendFunc, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 23, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_GL_SRC_ALPHA);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_GL_SRC_ALPHA, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 23, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_GL_ONE);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_GL_ONE, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 23, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_GL_ZERO);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_GL_ZERO, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 24, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_GL_SRC_COLOR);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_GL_SRC_COLOR, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 24, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_GL_ONE_MINUS_SRC_COLOR);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_GL_ONE_MINUS_SRC_COLOR, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 24, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_GL_ONE_MINUS_SRC_ALPHA);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_GL_ONE_MINUS_SRC_ALPHA, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 24, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_GL_DST_ALPHA);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_GL_DST_ALPHA, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 25, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_GL_ONE_MINUS_DST_ALPHA);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_GL_ONE_MINUS_DST_ALPHA, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 25, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_GL_DST_COLOR);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_GL_DST_COLOR, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 25, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_GL_ONE_MINUS_DST_COLOR);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 22, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_GL_ONE_MINUS_DST_COLOR, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 25, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-31" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0023</span>:     <span class="n">glEnable</span><span class="p">,</span> <span class="n">glDisable</span><span class="p">,</span> <span class="n">glBlendFunc</span><span class="p">,</span> <span class="n">GL_SRC_ALPHA</span><span class="p">,</span> <span class="n">GL_ONE</span><span class="p">,</span></pre>
<pre class='cython code score-31 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(13);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 23, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_glEnable);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_glEnable);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_n_s_glEnable);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_glDisable);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_glDisable);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_n_s_glDisable);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_glBlendFunc);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_glBlendFunc);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 2, __pyx_n_s_glBlendFunc);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_GL_SRC_ALPHA);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_GL_SRC_ALPHA);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 3, __pyx_n_s_GL_SRC_ALPHA);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_GL_ONE);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_GL_ONE);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 4, __pyx_n_s_GL_ONE);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_GL_ZERO);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_GL_ZERO);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 5, __pyx_n_s_GL_ZERO);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_GL_SRC_COLOR);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_GL_SRC_COLOR);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 6, __pyx_n_s_GL_SRC_COLOR);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_GL_ONE_MINUS_SRC_COLOR);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_GL_ONE_MINUS_SRC_COLOR);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 7, __pyx_n_s_GL_ONE_MINUS_SRC_COLOR);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_GL_ONE_MINUS_SRC_ALPHA);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_GL_ONE_MINUS_SRC_ALPHA);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 8, __pyx_n_s_GL_ONE_MINUS_SRC_ALPHA);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_GL_DST_ALPHA);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_GL_DST_ALPHA);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 9, __pyx_n_s_GL_DST_ALPHA);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_GL_ONE_MINUS_DST_ALPHA);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_GL_ONE_MINUS_DST_ALPHA);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 10, __pyx_n_s_GL_ONE_MINUS_DST_ALPHA);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_GL_DST_COLOR);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_GL_DST_COLOR);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 11, __pyx_n_s_GL_DST_COLOR);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_GL_ONE_MINUS_DST_COLOR);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_GL_ONE_MINUS_DST_COLOR);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 12, __pyx_n_s_GL_ONE_MINUS_DST_COLOR);
</pre><pre class="cython line score-0">&#xA0;<span class="">0024</span>:     <span class="n">GL_ZERO</span><span class="p">,</span> <span class="n">GL_SRC_COLOR</span><span class="p">,</span> <span class="n">GL_ONE_MINUS_SRC_COLOR</span><span class="p">,</span> <span class="n">GL_ONE_MINUS_SRC_ALPHA</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0025</span>:     <span class="n">GL_DST_ALPHA</span><span class="p">,</span> <span class="n">GL_ONE_MINUS_DST_ALPHA</span><span class="p">,</span> <span class="n">GL_DST_COLOR</span><span class="p">,</span> <span class="n">GL_ONE_MINUS_DST_COLOR</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0026</span>:     <span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0027</span>: <span class="k">cimport</span> <span class="nn">cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0028</span>: <span class="k">from</span> <span class="nn">kivy.graphics.cgl</span> <span class="k">cimport</span> <span class="n">GLfloat</span><span class="p">,</span> <span class="n">GLushort</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0029</span>: <span class="k">from</span> <span class="nn">kivent_core.systems.staticmemgamesystem</span> <span class="k">cimport</span> <span class="n">StaticMemGameSystem</span><span class="p">,</span> <span class="n">MemComponent</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0030</span>: <span class="k">from</span> <span class="nn">kivent_core.systems.position_systems</span> <span class="k">cimport</span> <span class="n">PositionStruct2D</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0031</span>: <span class="k">from</span> <span class="nn">kivent_core.systems.rotate_systems</span> <span class="k">cimport</span> <span class="n">RotateStruct2D</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0032</span>: <span class="k">from</span> <span class="nn">kivent_core.systems.scale_systems</span> <span class="k">cimport</span> <span class="n">ScaleStruct2D</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0033</span>: <span class="k">from</span> <span class="nn">kivent_core.systems.color_systems</span> <span class="k">cimport</span> <span class="n">ColorStruct</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0034</span>: <span class="k">from</span> <span class="nn">kivent_core.entity</span> <span class="k">cimport</span> <span class="n">Entity</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0035</span>: <span class="k">from</span> <span class="nn">kivent_core.rendering.model</span> <span class="k">cimport</span> <span class="n">VertexModel</span></pre>
<pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0036</span>: <span class="k">from</span> <span class="nn">kivy.factory</span> <span class="k">import</span> <span class="n">Factory</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 36, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_Factory);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_Factory);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_n_s_Factory);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_kivy_factory, __pyx_t_2, -1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 36, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 36, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_Factory, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 36, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0037</span>: <span class="k">from</span> <span class="nn">libc.math</span> <span class="k">cimport</span> <span class="n">fabs</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0038</span>: <span class="k">from</span> <span class="nn">kivent_core.memory_handlers.indexing</span> <span class="k">cimport</span> <span class="n">IndexedMemoryZone</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0039</span>: <span class="k">from</span> <span class="nn">kivent_core.memory_handlers.zone</span> <span class="k">cimport</span> <span class="n">MemoryZone</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0040</span>: <span class="k">from</span> <span class="nn">kivent_core.memory_handlers.membuffer</span> <span class="k">cimport</span> <span class="n">Buffer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0041</span>: <span class="k">from</span> <span class="nn">kivent_core.systems.staticmemgamesystem</span> <span class="k">cimport</span> <span class="n">ComponentPointerAggregator</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0042</span>: <span class="k">from</span> <span class="nn">kivent_core.memory_handlers.block</span> <span class="k">cimport</span> <span class="n">MemoryBlock</span></pre>
<pre class="cython line score-29" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0043</span>: <span class="k">from</span> <span class="nn">kivy.properties</span> <span class="k">import</span> <span class="n">ObjectProperty</span><span class="p">,</span> <span class="n">NumericProperty</span></pre>
<pre class='cython code score-29 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 43, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_ObjectProperty);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_ObjectProperty);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_n_s_ObjectProperty);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_NumericProperty);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_NumericProperty);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_n_s_NumericProperty);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_kivy_properties, __pyx_t_1, -1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 43, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_ObjectProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 43, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_ObjectProperty, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 43, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 43, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_NumericProperty, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 43, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0044</span>: <span class="k">from</span> <span class="nn">kivy.clock</span> <span class="k">import</span> <span class="n">Clock</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 44, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_Clock);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_Clock);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_n_s_Clock);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_kivy_clock, __pyx_t_2, -1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 44, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_Clock);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 44, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_Clock, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 44, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0045</span>: <span class="k">from</span> <span class="nn">kivent_core.rendering.gl_debug</span> <span class="k">cimport</span> <span class="n">gl_log_debug_message</span></pre>
<pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0046</span>: <span class="k">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">partial</span></pre>
<pre class='cython code score-19 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 46, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_partial);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_partial);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_n_s_partial);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_functools, __pyx_t_1, -1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 46, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_partial);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 46, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_partial, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 46, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0047</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0048</span>: </pre>
<pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0049</span>: <span class="k">cdef</span> <span class="kt">float</span> <span class="nf">lerp</span><span class="p">(</span><span class="nb">float</span> <span class="n">v0</span><span class="p">,</span> <span class="nb">float</span> <span class="n">v1</span><span class="p">,</span> <span class="nb">float</span> <span class="n">t</span><span class="p">):</span></pre>
<pre class='cython code score-2 '>static float __pyx_f_11kivent_core_7systems_9renderers_lerp(float __pyx_v_v0, float __pyx_v_v1, float __pyx_v_t) {
  float __pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("lerp", 0);
  <span class='trace'>__Pyx_TraceCall</span>("lerp", __pyx_f[1], 49, 0, <span class='error_goto'>__PYX_ERR(1, 49, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_c_api'>__Pyx_WriteUnraisable</span>("kivent_core.systems.renderers.lerp", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0050</span>:     <span class="k">return</span> <span class="p">(</span><span class="mf">1.</span><span class="o">-</span><span class="n">t</span><span class="p">)</span><span class="o">*</span><span class="n">v0</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">v1</span></pre>
<pre class='cython code score-0 '>  __pyx_r = (((1. - __pyx_v_t) * __pyx_v_v0) + (__pyx_v_t * __pyx_v_v1));
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0051</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0052</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">RenderComponent</span><span class="p">(</span><span class="n">MemComponent</span><span class="p">):</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0053</span>:     <span class="sd">&#39;&#39;&#39;The component associated with various renderers including: Renderer </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0054</span>: <span class="sd">    and RotateRenderer. Designed for 2d sprites, but potentially useful for </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0055</span>: <span class="sd">    other types of models as well. If not using for sprites, ignore **width**,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0056</span>: <span class="sd">    **height**, and **texture_key** properties as they are designed for</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0057</span>: <span class="sd">    convenience when working with textured quads. Prefer instead to modify the</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0058</span>: <span class="sd">    properties of the **vert_mesh** directly.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0059</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0060</span>: <span class="sd">    **Attributes:**</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0061</span>: <span class="sd">        **entity_id** (unsigned int): The entity_id this component is currently</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0062</span>: <span class="sd">        associated with. Will be &lt;unsigned int&gt;-1 if the component is</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0063</span>: <span class="sd">        unattached.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0064</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0065</span>: <span class="sd">        **width** (float): The width of the sprite.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0066</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0067</span>: <span class="sd">        **height** (float): The height of the sprite.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0068</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0069</span>: <span class="sd">        **batch_id** (unsigned int): The batch the entity is assigned to. Read</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0070</span>: <span class="sd">        Only. If the entity is not currently batched will be &lt;unsigned int&gt;-1.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0071</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0072</span>: <span class="sd">        **attribute_count** (unsigned int): The number of attributes in the</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0073</span>: <span class="sd">        vertex format for the model.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0074</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0075</span>: <span class="sd">        **texture_key** (str): The name of the texture for this component. If</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0076</span>: <span class="sd">        there is no texture None will be returned.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0077</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0078</span>: <span class="sd">        **render** (bool): Whether or not this entity should actually be</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0079</span>: <span class="sd">        rendered.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0080</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0081</span>: <span class="sd">        **vertex_count** (unsigned int): The number of vertices in the current</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0082</span>: <span class="sd">        model (the **vert_mesh**). You should not modify the number of vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0083</span>: <span class="sd">        while an entity is batched.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0084</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0085</span>: <span class="sd">        **index_count** (unsigned int): The number of indices in the current</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0086</span>: <span class="sd">        model (the **vert_mesh**). You should not modify the number of indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0087</span>: <span class="sd">        while an entity is batched.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0088</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0089</span>: <span class="sd">        **vert_mesh** (VertMesh): The actual VertMesh object containing the</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0090</span>: <span class="sd">        model information for this component.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0091</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0092</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0093</span>:     <span class="k">property</span> <span class="nf">entity_id</span><span class="p">:</span></pre>
<pre class="cython line score-3" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0094</span>:         <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre>
<pre class='cython code score-3 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_9entity_id_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_9entity_id_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_9entity_id___get__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_9entity_id___get__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_data;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__get__", __pyx_f[1], 94, 0, <span class='error_goto'>__PYX_ERR(1, 94, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.entity_id.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0095</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-3" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0096</span>:             <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">entity_id</span></pre>
<pre class='cython code score-3 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_data-&gt;entity_id);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 96, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0097</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0098</span>:     <span class="k">property</span> <span class="nf">width</span><span class="p">:</span></pre>
<pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0099</span>:         <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre>
<pre class='cython code score-5 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_5width_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_5width_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_5width___get__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_5width___get__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__get__", __pyx_f[1], 99, 0, <span class='error_goto'>__PYX_ERR(1, 99, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.width.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0100</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0101</span>:             <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;model);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-31" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0102</span>:             <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">*</span><span class="mf">2.</span><span class="p">)</span></pre>
<pre class='cython code score-31 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 102, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_pos);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 102, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 102, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyNumber_Multiply</span>(__pyx_t_1, __pyx_float_2_);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 102, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_3 = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(__pyx_t_2); if (unlikely((__pyx_t_3 == (double)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 102, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyFloat_FromDouble</span>(fabs(__pyx_t_3));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 102, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0103</span>: </pre>
<pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0104</span>:         <span class="k">def</span> <span class="nf">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">float</span> <span class="n">value</span><span class="p">):</span></pre>
<pre class='cython code score-18 '>/* Python wrapper */
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_5width_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_arg_value); /*proto*/
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_5width_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_arg_value) {
  float __pyx_v_value;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__ (wrapper)", 0);
  assert(__pyx_arg_value); {
    __pyx_v_value = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_arg_value); if (unlikely((__pyx_v_value == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 104, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.width.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_5width_2__set__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self), ((float)__pyx_v_value));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_5width_2__set__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self, float __pyx_v_value) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  float __pyx_v_w;
  int __pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__set__", __pyx_f[1], 104, 0, <span class='error_goto'>__PYX_ERR(1, 104, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.width.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0105</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0106</span>:             <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;model);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0107</span>:             <span class="k">cdef</span> <span class="kt">float</span> <span class="nf">w</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0108</span>:             <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((__pyx_v_value != 0.0) != 0);
  if (__pyx_t_2) {
/*  */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0109</span>:                 <span class="n">w</span> <span class="o">=</span> <span class="o">.</span><span class="mf">5</span><span class="o">*</span><span class="n">value</span></pre>
<pre class='cython code score-0 '>    __pyx_v_w = (.5 * __pyx_v_value);
</pre><pre class="cython line score-26" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0110</span>:                 <span class="n">model</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">w</span><span class="p">,</span> <span class="n">model</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]]</span></pre>
<pre class='cython code score-26 '>    __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>((-__pyx_v_w));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 110, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 110, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_pos);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 110, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 110, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 110, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_1);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 1, __pyx_t_3);
    __pyx_t_1 = 0;
    __pyx_t_3 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 110, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_3, __pyx_n_s_pos, __pyx_t_4) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 110, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-26" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0111</span>:                 <span class="n">model</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">w</span><span class="p">,</span> <span class="n">model</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]]</span></pre>
<pre class='cython code score-26 '>    __pyx_t_3 = <span class='py_c_api'>PyFloat_FromDouble</span>((-__pyx_v_w));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 111, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 111, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_pos);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 111, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 111, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 111, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 111, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_4, __pyx_n_s_pos, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 111, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
</pre><pre class="cython line score-26" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0112</span>:                 <span class="n">model</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">model</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]]</span></pre>
<pre class='cython code score-26 '>    __pyx_t_4 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_w);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 112, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 112, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_pos);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 112, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_3, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 112, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 112, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_t_1);
    __pyx_t_4 = 0;
    __pyx_t_1 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 112, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_1, __pyx_n_s_pos, __pyx_t_3) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 112, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-26" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0113</span>:                 <span class="n">model</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">model</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]]</span></pre>
<pre class='cython code score-26 '>    __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_w);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 113, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 113, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_pos);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 113, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 113, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 113, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_1);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 1, __pyx_t_3);
    __pyx_t_1 = 0;
    __pyx_t_3 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 113, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_3, __pyx_n_s_pos, __pyx_t_4) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 113, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0114</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0115</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0116</span>:     <span class="k">property</span> <span class="nf">height</span><span class="p">:</span></pre>
<pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0117</span>:         <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre>
<pre class='cython code score-5 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_6height_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_6height_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_6height___get__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_6height___get__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__get__", __pyx_f[1], 117, 0, <span class='error_goto'>__PYX_ERR(1, 117, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.height.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0118</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0119</span>:             <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;model);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-31" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0120</span>:             <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">*</span><span class="mf">2.</span><span class="p">)</span></pre>
<pre class='cython code score-31 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 120, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_pos);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 120, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 120, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyNumber_Multiply</span>(__pyx_t_1, __pyx_float_2_);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 120, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_3 = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(__pyx_t_2); if (unlikely((__pyx_t_3 == (double)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 120, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyFloat_FromDouble</span>(fabs(__pyx_t_3));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 120, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0121</span>: </pre>
<pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0122</span>:         <span class="k">def</span> <span class="nf">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">float</span> <span class="n">value</span><span class="p">):</span></pre>
<pre class='cython code score-18 '>/* Python wrapper */
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_6height_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_arg_value); /*proto*/
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_6height_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_arg_value) {
  float __pyx_v_value;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__ (wrapper)", 0);
  assert(__pyx_arg_value); {
    __pyx_v_value = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_arg_value); if (unlikely((__pyx_v_value == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 122, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.height.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_6height_2__set__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self), ((float)__pyx_v_value));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_6height_2__set__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self, float __pyx_v_value) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  float __pyx_v_h;
  int __pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__set__", __pyx_f[1], 122, 0, <span class='error_goto'>__PYX_ERR(1, 122, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.height.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0123</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0124</span>:             <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;model);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0125</span>:             <span class="k">cdef</span> <span class="kt">float</span> <span class="nf">h</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0126</span>:             <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((__pyx_v_value != 0.0) != 0);
  if (__pyx_t_2) {
/*  */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0127</span>:                 <span class="n">h</span> <span class="o">=</span> <span class="o">.</span><span class="mf">5</span><span class="o">*</span><span class="n">value</span></pre>
<pre class='cython code score-0 '>    __pyx_v_h = (.5 * __pyx_v_value);
</pre><pre class="cython line score-26" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0128</span>:                 <span class="n">model</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">model</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="o">-</span><span class="n">h</span><span class="p">]</span></pre>
<pre class='cython code score-26 '>    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 128, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_pos);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 128, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 128, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = <span class='py_c_api'>PyFloat_FromDouble</span>((-__pyx_v_h));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 128, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 128, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_1);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 1, __pyx_t_3);
    __pyx_t_1 = 0;
    __pyx_t_3 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 128, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_3, __pyx_n_s_pos, __pyx_t_4) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 128, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-26" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0129</span>:                 <span class="n">model</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">model</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">h</span><span class="p">]</span></pre>
<pre class='cython code score-26 '>    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 129, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_pos);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 129, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 129, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_h);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 129, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 129, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 129, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_4, __pyx_n_s_pos, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 129, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
</pre><pre class="cython line score-26" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0130</span>:                 <span class="n">model</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">model</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">h</span><span class="p">]</span></pre>
<pre class='cython code score-26 '>    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 130, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_pos);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 130, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 130, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_h);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 130, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 130, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_t_1);
    __pyx_t_4 = 0;
    __pyx_t_1 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 130, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_1, __pyx_n_s_pos, __pyx_t_3) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 130, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-26" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0131</span>:                 <span class="n">model</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">model</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="o">-</span><span class="n">h</span><span class="p">]</span></pre>
<pre class='cython code score-26 '>    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 131, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_pos);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 131, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 131, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = <span class='py_c_api'>PyFloat_FromDouble</span>((-__pyx_v_h));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 131, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 131, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_1);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 1, __pyx_t_3);
    __pyx_t_1 = 0;
    __pyx_t_3 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 131, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_3, __pyx_n_s_pos, __pyx_t_4) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 131, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0132</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0133</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0134</span>:     <span class="k">property</span> <span class="nf">batch_id</span><span class="p">:</span></pre>
<pre class="cython line score-3" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0135</span>:         <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre>
<pre class='cython code score-3 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_8batch_id_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_8batch_id_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_8batch_id___get__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_8batch_id___get__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__get__", __pyx_f[1], 135, 0, <span class='error_goto'>__PYX_ERR(1, 135, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.batch_id.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0136</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-3" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0137</span>:             <span class="k">return</span> <span class="n">component_data</span><span class="o">.</span><span class="n">batch_id</span></pre>
<pre class='cython code score-3 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_component_data-&gt;batch_id);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 137, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0138</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0139</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0140</span>:     <span class="k">property</span> <span class="nf">texture_key</span><span class="p">:</span></pre>
<pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0141</span>:         <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre>
<pre class='cython code score-6 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_11texture_key_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_11texture_key_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_11texture_key___get__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_11texture_key___get__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__get__", __pyx_f[1], 141, 0, <span class='error_goto'>__PYX_ERR(1, 141, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.texture_key.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0142</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0143</span>:             <span class="k">if</span> <span class="n">component_data</span><span class="o">.</span><span class="n">texkey</span> <span class="o">==</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="nb">int</span><span class="o">&gt;-</span><span class="mf">1</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = ((__pyx_v_component_data-&gt;texkey == ((unsigned int)-1L)) != 0);
  if (__pyx_t_1) {
/*  */
  }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0144</span>:                 <span class="k">return</span> <span class="bp">None</span></pre>
<pre class='cython code score-2 '>    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
    goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0145</span>:             <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0146</span>:                 <span class="k">return</span> <span class="n">texture_manager</span><span class="o">.</span><span class="n">get_texname_from_texkey</span><span class="p">(</span></pre>
<pre class='cython code score-6 '>  /*else*/ {
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_texture_manager);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 146, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_get_texname_from_texkey);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 146, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-17" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0147</span>:                     <span class="n">component_data</span><span class="o">.</span><span class="n">texkey</span><span class="p">)</span></pre>
<pre class='cython code score-17 '>    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_component_data-&gt;texkey);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 147, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
      __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
      }
    }
    __pyx_t_2 = (__pyx_t_5) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_5, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 146, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_r = __pyx_t_2;
    __pyx_t_2 = 0;
    goto __pyx_L0;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">0148</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0149</span>:         <span class="k">def</span> <span class="nf">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">str</span> <span class="n">value</span><span class="p">):</span></pre>
<pre class='cython code score-14 '>/* Python wrapper */
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_11texture_key_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_11texture_key_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__ (wrapper)", 0);
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_value), (&amp;PyString_Type), 1, "value", 1))) <span class='error_goto'>__PYX_ERR(1, 149, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_11texture_key_2__set__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self), ((PyObject*)__pyx_v_value));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = -1;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_11texture_key_2__set__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self, PyObject *__pyx_v_value) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  unsigned int __pyx_v_groupkey;
  unsigned int __pyx_v_texkey;
  float __pyx_v_u0;
  float __pyx_v_v0;
  float __pyx_v_u1;
  float __pyx_v_v1;
  PyObject *__pyx_v_uv_list = 0;
  PyObject *__pyx_v_same_batch = NULL;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_renderer = 0;
  int __pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__set__", __pyx_f[1], 149, 0, <span class='error_goto'>__PYX_ERR(1, 149, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.texture_key.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_uv_list);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_same_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_renderer);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0150</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-0">&#xA0;<span class="">0151</span>:             <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">groupkey</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0152</span>:                 <span class="n">texture_manager</span><span class="o">.</span><span class="n">get_groupkey_from_texkey</span><span class="p">(</span><span class="n">component_data</span><span class="o">.</span><span class="n">texkey</span><span class="p">))</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_2, __pyx_n_s_texture_manager);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 152, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_get_groupkey_from_texkey);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 152, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_component_data-&gt;texkey);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 152, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
    }
  }
  __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_4, __pyx_t_2) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(1, 152, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_1); if (unlikely((__pyx_t_5 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 152, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_groupkey = __pyx_t_5;
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0153</span>:             <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">texkey</span> <span class="o">=</span> <span class="n">texture_manager</span><span class="o">.</span><span class="n">get_texkey_from_name</span><span class="p">(</span></pre>
<pre class='cython code score-13 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_texture_manager);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 153, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_get_texkey_from_name);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 153, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
/*  */
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_1); if (unlikely((__pyx_t_5 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 153, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_texkey = __pyx_t_5;
</pre><pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0154</span>:                 <span class="n">value</span><span class="p">)</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_2, __pyx_t_3, __pyx_v_value) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_v_value);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(1, 153, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0155</span>:             <span class="k">cdef</span> <span class="kt">float</span> <span class="nf">u0</span><span class="p">,</span> <span class="nf">v0</span><span class="p">,</span> <span class="nf">u1</span><span class="p">,</span> <span class="nf">v1</span></pre>
<pre class="cython line score-32" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0156</span>:             <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">uv_list</span> <span class="o">=</span> <span class="n">texture_manager</span><span class="o">.</span><span class="n">get_uvs</span><span class="p">(</span><span class="n">texkey</span><span class="p">)</span></pre>
<pre class='cython code score-32 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_2, __pyx_n_s_texture_manager);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 156, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_get_uvs);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 156, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_texkey);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 156, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
    }
  }
  __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_4, __pyx_t_2) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(1, 156, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_1))||((__pyx_t_1) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_1)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 156, __pyx_L1_error)</span>
  __pyx_v_uv_list = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0157</span>:             <span class="n">u0</span> <span class="o">=</span> <span class="n">uv_list</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-18 '>  if (unlikely(__pyx_v_uv_list == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
    <span class='error_goto'>__PYX_ERR(1, 157, __pyx_L1_error)</span>
  }
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt_List</span>(__pyx_v_uv_list, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 157, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_6 = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_t_1); if (unlikely((__pyx_t_6 == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 157, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_u0 = __pyx_t_6;
</pre><pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0158</span>:             <span class="n">v0</span> <span class="o">=</span> <span class="n">uv_list</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-18 '>  if (unlikely(__pyx_v_uv_list == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
    <span class='error_goto'>__PYX_ERR(1, 158, __pyx_L1_error)</span>
  }
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt_List</span>(__pyx_v_uv_list, 1, long, 1, __Pyx_PyInt_From_long, 1, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 158, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_6 = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_t_1); if (unlikely((__pyx_t_6 == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 158, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_v0 = __pyx_t_6;
</pre><pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0159</span>:             <span class="n">u1</span> <span class="o">=</span> <span class="n">uv_list</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-18 '>  if (unlikely(__pyx_v_uv_list == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
    <span class='error_goto'>__PYX_ERR(1, 159, __pyx_L1_error)</span>
  }
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt_List</span>(__pyx_v_uv_list, 2, long, 1, __Pyx_PyInt_From_long, 1, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 159, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_6 = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_t_1); if (unlikely((__pyx_t_6 == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 159, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_u1 = __pyx_t_6;
</pre><pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0160</span>:             <span class="n">v1</span> <span class="o">=</span> <span class="n">uv_list</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-18 '>  if (unlikely(__pyx_v_uv_list == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
    <span class='error_goto'>__PYX_ERR(1, 160, __pyx_L1_error)</span>
  }
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt_List</span>(__pyx_v_uv_list, 3, long, 1, __Pyx_PyInt_From_long, 1, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 160, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_6 = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_t_1); if (unlikely((__pyx_t_6 == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 160, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_v1 = __pyx_t_6;
</pre><pre class="cython line score-48" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0161</span>:             <span class="n">same_batch</span> <span class="o">=</span> <span class="n">texture_manager</span><span class="o">.</span><span class="n">get_texkey_in_group</span><span class="p">(</span><span class="n">texkey</span><span class="p">,</span> <span class="n">groupkey</span><span class="p">)</span></pre>
<pre class='cython code score-48 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_texture_manager);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 161, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_get_texkey_in_group);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 161, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_texkey);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 161, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_groupkey);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 161, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_7 = NULL;
  __pyx_t_8 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_7)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
      __pyx_t_8 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_t_3, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 161, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_t_3, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 161, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_8);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 161, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    if (__pyx_t_7) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_7); __pyx_t_7 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0+__pyx_t_8, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1+__pyx_t_8, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 161, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_same_batch = __pyx_t_1;
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0162</span>:             <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;model);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0163</span>:             <span class="k">cdef</span> <span class="kt">Renderer</span> <span class="nf">renderer</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">Renderer</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">renderer</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_renderer = ((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0164</span>:             <span class="k">if</span> <span class="ow">not</span> <span class="n">same_batch</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>  __pyx_t_10 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_same_batch); if (unlikely(__pyx_t_10 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 164, __pyx_L1_error)</span>
  __pyx_t_11 = ((!__pyx_t_10) != 0);
  if (__pyx_t_11) {
/*  */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0165</span>:                 <span class="n">renderer</span><span class="o">.</span><span class="n">_unbatch_entity</span><span class="p">(</span><span class="n">component_data</span><span class="o">.</span><span class="n">entity_id</span><span class="p">,</span></pre>
<pre class='cython code score-0 '>    __pyx_t_12 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_renderer-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_unbatch_entity(__pyx_v_renderer, __pyx_v_component_data-&gt;entity_id, __pyx_v_component_data);<span class='error_goto'> if (unlikely(__pyx_t_12 == ((void *)NULL))) __PYX_ERR(1, 165, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">0166</span>:                     <span class="n">component_data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0167</span>:             <span class="n">component_data</span><span class="o">.</span><span class="n">texkey</span> <span class="o">=</span> <span class="n">texkey</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data-&gt;texkey = __pyx_v_texkey;
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0168</span>:             <span class="n">model</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">uvs</span> <span class="o">=</span> <span class="p">[</span><span class="n">u0</span><span class="p">,</span> <span class="n">v0</span><span class="p">]</span></pre>
<pre class='cython code score-23 '>  __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_u0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 168, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_v0);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 168, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_9 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 168, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_2);
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 168, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_2, __pyx_n_s_uvs, __pyx_t_9) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 168, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0169</span>:             <span class="n">model</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">.</span><span class="n">uvs</span> <span class="o">=</span> <span class="p">[</span><span class="n">u0</span><span class="p">,</span> <span class="n">v1</span><span class="p">]</span></pre>
<pre class='cython code score-23 '>  __pyx_t_2 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_u0);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 169, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_9 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_v1);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 169, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 169, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_9);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_t_9);
  __pyx_t_2 = 0;
  __pyx_t_9 = 0;
  __pyx_t_9 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 169, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_9, __pyx_n_s_uvs, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 169, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0170</span>:             <span class="n">model</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="o">.</span><span class="n">uvs</span> <span class="o">=</span> <span class="p">[</span><span class="n">u1</span><span class="p">,</span> <span class="n">v1</span><span class="p">]</span></pre>
<pre class='cython code score-23 '>  __pyx_t_9 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_u1);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 170, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_v1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 170, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 170, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_9);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 1, __pyx_t_1);
  __pyx_t_9 = 0;
  __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 170, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_1, __pyx_n_s_uvs, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 170, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0171</span>:             <span class="n">model</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">.</span><span class="n">uvs</span> <span class="o">=</span> <span class="p">[</span><span class="n">u1</span><span class="p">,</span> <span class="n">v0</span><span class="p">]</span></pre>
<pre class='cython code score-23 '>  __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_u1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 171, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_v0);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 171, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_9 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 171, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_2);
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_model), 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 171, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_2, __pyx_n_s_uvs, __pyx_t_9) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 171, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0172</span>:             <span class="k">if</span> <span class="ow">not</span> <span class="n">same_batch</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>  __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_same_batch); if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 172, __pyx_L1_error)</span>
  __pyx_t_10 = ((!__pyx_t_11) != 0);
  if (__pyx_t_10) {
/*  */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0173</span>:                 <span class="n">renderer</span><span class="o">.</span><span class="n">_batch_entity</span><span class="p">(</span><span class="n">component_data</span><span class="o">.</span><span class="n">entity_id</span><span class="p">,</span></pre>
<pre class='cython code score-0 '>    __pyx_t_12 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_renderer-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_batch_entity(__pyx_v_renderer, __pyx_v_component_data-&gt;entity_id, __pyx_v_component_data);<span class='error_goto'> if (unlikely(__pyx_t_12 == ((void *)NULL))) __PYX_ERR(1, 173, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">0174</span>:                     <span class="n">component_data</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0175</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0176</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0177</span>:     <span class="k">property</span> <span class="nf">render</span><span class="p">:</span></pre>
<pre class="cython line score-3" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0178</span>:         <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre>
<pre class='cython code score-3 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_6render_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_6render_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_6render___get__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_6render___get__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__get__", __pyx_f[1], 178, 0, <span class='error_goto'>__PYX_ERR(1, 178, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.render.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0179</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-3" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0180</span>:             <span class="k">return</span> <span class="n">component_data</span><span class="o">.</span><span class="n">render</span></pre>
<pre class='cython code score-3 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyBool_FromLong</span>(__pyx_v_component_data-&gt;render);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 180, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0181</span>: </pre>
<pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0182</span>:         <span class="k">def</span> <span class="nf">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">bool</span> <span class="n">value</span><span class="p">):</span></pre>
<pre class='cython code score-4 '>/* Python wrapper */
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_6render_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_6render_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__ (wrapper)", 0);
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_value), __pyx_ptype_7cpython_4bool_bool, 1, "value", 0))) <span class='error_goto'>__PYX_ERR(1, 182, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_6render_2__set__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self), ((PyBoolObject *)__pyx_v_value));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = -1;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_6render_2__set__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self, PyBoolObject *__pyx_v_value) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  int __pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__set__", __pyx_f[1], 182, 0, <span class='error_goto'>__PYX_ERR(1, 182, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.render.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0183</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0184</span>:             <span class="k">if</span> <span class="n">value</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(((PyObject *)__pyx_v_value)); if (unlikely(__pyx_t_1 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 184, __pyx_L1_error)</span>
  if (__pyx_t_1) {
/*  */
    goto __pyx_L3;
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0185</span>:                 <span class="n">component_data</span><span class="o">.</span><span class="n">render</span> <span class="o">=</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>    __pyx_v_component_data-&gt;render = 1;
</pre><pre class="cython line score-0">&#xA0;<span class="">0186</span>:             <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0187</span>:                 <span class="n">component_data</span><span class="o">.</span><span class="n">render</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  /*else*/ {
    __pyx_v_component_data-&gt;render = 0;
  }
  __pyx_L3:;
</pre><pre class="cython line score-0">&#xA0;<span class="">0188</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0189</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0190</span>:     <span class="k">property</span> <span class="nf">vertex_count</span><span class="p">:</span></pre>
<pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0191</span>:         <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre>
<pre class='cython code score-4 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_12vertex_count_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_12vertex_count_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_12vertex_count___get__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_12vertex_count___get__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__get__", __pyx_f[1], 191, 0, <span class='error_goto'>__PYX_ERR(1, 191, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.vertex_count.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0192</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0193</span>:             <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;model);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-3" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0194</span>:             <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span></pre>
<pre class='cython code score-3 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_model-&gt;_vertex_count);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 194, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0195</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0196</span>:         <span class="k">def</span> <span class="nf">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">int</span> <span class="n">value</span><span class="p">):</span></pre>
<pre class='cython code score-14 '>/* Python wrapper */
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_12vertex_count_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_arg_value); /*proto*/
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_12vertex_count_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_arg_value) {
  int __pyx_v_value;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__ (wrapper)", 0);
  assert(__pyx_arg_value); {
    __pyx_v_value = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_arg_value); if (unlikely((__pyx_v_value == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 196, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.vertex_count.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_12vertex_count_2__set__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self), ((int)__pyx_v_value));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_12vertex_count_2__set__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self, int __pyx_v_value) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_renderer = 0;
  int __pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__set__", __pyx_f[1], 196, 0, <span class='error_goto'>__PYX_ERR(1, 196, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.vertex_count.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_renderer);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0197</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0198</span>:             <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;model);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0199</span>:             <span class="k">cdef</span> <span class="kt">Renderer</span> <span class="nf">renderer</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">Renderer</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">renderer</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_renderer = ((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0200</span>:             <span class="n">renderer</span><span class="o">.</span><span class="n">_unbatch_entity</span><span class="p">(</span><span class="n">component_data</span><span class="o">.</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">component_data</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_renderer-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_unbatch_entity(__pyx_v_renderer, __pyx_v_component_data-&gt;entity_id, __pyx_v_component_data);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((void *)NULL))) __PYX_ERR(1, 200, __pyx_L1_error)</span>
</pre><pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0201</span>:             <span class="n">model</span><span class="o">.</span><span class="n">vertex_count</span> <span class="o">=</span> <span class="n">value</span></pre>
<pre class='cython code score-5 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_value);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 201, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(((PyObject *)__pyx_v_model), __pyx_n_s_vertex_count, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 201, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0202</span>:             <span class="n">renderer</span><span class="o">.</span><span class="n">_batch_entity</span><span class="p">(</span><span class="n">component_data</span><span class="o">.</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">component_data</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_renderer-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_batch_entity(__pyx_v_renderer, __pyx_v_component_data-&gt;entity_id, __pyx_v_component_data);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((void *)NULL))) __PYX_ERR(1, 202, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">0203</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0204</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0205</span>:     <span class="k">property</span> <span class="nf">index_count</span><span class="p">:</span></pre>
<pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0206</span>:         <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre>
<pre class='cython code score-4 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_11index_count_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_11index_count_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_11index_count___get__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_11index_count___get__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__get__", __pyx_f[1], 206, 0, <span class='error_goto'>__PYX_ERR(1, 206, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.index_count.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0207</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0208</span>:             <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;model);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-3" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0209</span>:             <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-3 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_model-&gt;_index_count);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 209, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0210</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0211</span>:         <span class="k">def</span> <span class="nf">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">int</span> <span class="n">value</span><span class="p">):</span></pre>
<pre class='cython code score-14 '>/* Python wrapper */
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_11index_count_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_arg_value); /*proto*/
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_11index_count_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_arg_value) {
  int __pyx_v_value;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__ (wrapper)", 0);
  assert(__pyx_arg_value); {
    __pyx_v_value = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_arg_value); if (unlikely((__pyx_v_value == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 211, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.index_count.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_11index_count_2__set__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self), ((int)__pyx_v_value));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_11index_count_2__set__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self, int __pyx_v_value) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_renderer = 0;
  int __pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__set__", __pyx_f[1], 211, 0, <span class='error_goto'>__PYX_ERR(1, 211, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.index_count.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_renderer);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0212</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0213</span>:             <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;model);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0214</span>:             <span class="k">cdef</span> <span class="kt">Renderer</span> <span class="nf">renderer</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">Renderer</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">renderer</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_renderer = ((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0215</span>:             <span class="n">renderer</span><span class="o">.</span><span class="n">_unbatch_entity</span><span class="p">(</span><span class="n">component_data</span><span class="o">.</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">component_data</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_renderer-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_unbatch_entity(__pyx_v_renderer, __pyx_v_component_data-&gt;entity_id, __pyx_v_component_data);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((void *)NULL))) __PYX_ERR(1, 215, __pyx_L1_error)</span>
</pre><pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0216</span>:             <span class="n">model</span><span class="o">.</span><span class="n">index_count</span> <span class="o">=</span> <span class="n">value</span></pre>
<pre class='cython code score-5 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_value);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 216, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(((PyObject *)__pyx_v_model), __pyx_n_s_index_count, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 216, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0217</span>:             <span class="n">renderer</span><span class="o">.</span><span class="n">_batch_entity</span><span class="p">(</span><span class="n">component_data</span><span class="o">.</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">component_data</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_renderer-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_batch_entity(__pyx_v_renderer, __pyx_v_component_data-&gt;entity_id, __pyx_v_component_data);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((void *)NULL))) __PYX_ERR(1, 217, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">0218</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0219</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0220</span>:     <span class="k">property</span> <span class="nf">model</span><span class="p">:</span></pre>
<pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0221</span>:         <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre>
<pre class='cython code score-4 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_5model_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_5model_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_5model___get__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_5model___get__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__get__", __pyx_f[1], 221, 0, <span class='error_goto'>__PYX_ERR(1, 221, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.model.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0222</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0223</span>:             <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;model);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0224</span>:             <span class="k">return</span> <span class="n">model</span></pre>
<pre class='cython code score-2 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_model));
  __pyx_r = ((PyObject *)__pyx_v_model);
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0225</span>: </pre>
<pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0226</span>:         <span class="k">def</span> <span class="nf">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">str</span> <span class="n">model_name</span><span class="p">):</span></pre>
<pre class='cython code score-13 '>/* Python wrapper */
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_5model_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_model_name); /*proto*/
static int __pyx_pw_11kivent_core_7systems_9renderers_15RenderComponent_5model_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_model_name) {
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__ (wrapper)", 0);
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_model_name), (&amp;PyString_Type), 1, "model_name", 1))) <span class='error_goto'>__PYX_ERR(1, 226, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_5model_2__set__(((struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *)__pyx_v_self), ((PyObject*)__pyx_v_model_name));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = -1;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_11kivent_core_7systems_9renderers_15RenderComponent_5model_2__set__(struct __pyx_obj_11kivent_core_7systems_9renderers_RenderComponent *__pyx_v_self, PyObject *__pyx_v_model_name) {
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data;
  struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_renderer = 0;
  struct __pyx_obj_11kivent_core_8managers_17resource_managers_ModelManager *__pyx_v_manager = 0;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  int __pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__set__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__set__", __pyx_f[1], 226, 0, <span class='error_goto'>__PYX_ERR(1, 226, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RenderComponent.model.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0227</span>:             <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_v_self-&gt;__pyx_base.pointer);
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0228</span>:             <span class="k">cdef</span> <span class="kt">Renderer</span> <span class="nf">renderer</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">Renderer</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">renderer</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_renderer = ((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0229</span>:             <span class="n">renderer</span><span class="o">.</span><span class="n">_unbatch_entity</span><span class="p">(</span><span class="n">component_data</span><span class="o">.</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">component_data</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_renderer-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_unbatch_entity(__pyx_v_renderer, __pyx_v_component_data-&gt;entity_id, __pyx_v_component_data);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((void *)NULL))) __PYX_ERR(1, 229, __pyx_L1_error)</span>
</pre><pre class="cython line score-7" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0230</span>:             <span class="k">cdef</span> <span class="kt">ModelManager</span> <span class="nf">manager</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">gameworld</span><span class="o">.</span><span class="n">model_manager</span></pre>
<pre class='cython code score-7 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_renderer), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 230, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_model_manager);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 230, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_11kivent_core_8managers_17resource_managers_ModelManager))))) <span class='error_goto'>__PYX_ERR(1, 230, __pyx_L1_error)</span>
  __pyx_v_manager = ((struct __pyx_obj_11kivent_core_8managers_17resource_managers_ModelManager *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0231</span>:             <span class="n">manager</span><span class="o">.</span><span class="n">unregister_entity_with_model</span><span class="p">(</span><span class="n">component_data</span><span class="o">.</span><span class="n">entity_id</span><span class="p">,</span></pre>
<pre class='cython code score-4 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_manager), __pyx_n_s_unregister_entity_with_model);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 231, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_component_data-&gt;entity_id);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 231, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
</pre><pre class="cython line score-39" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0232</span>:                 <span class="p">(&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span><span class="p">)</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span></pre>
<pre class='cython code score-39 '>  __pyx_t_5 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_1)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_4, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_v_component_data-&gt;model)-&gt;_name};
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 231, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_1)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_4, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_v_component_data-&gt;model)-&gt;_name};
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 231, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 231, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_5) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_v_component_data-&gt;model)-&gt;_name);
    <span class='refnanny'>__Pyx_GIVEREF</span>(((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_v_component_data-&gt;model)-&gt;_name);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_v_component_data-&gt;model)-&gt;_name);
    __pyx_t_4 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 231, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-9" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0233</span>:             <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">_models</span><span class="p">[</span><span class="n">model_name</span><span class="p">]</span></pre>
<pre class='cython code score-9 '>  if (unlikely(__pyx_v_manager-&gt;_models == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
    <span class='error_goto'>__PYX_ERR(1, 233, __pyx_L1_error)</span>
  }
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_manager-&gt;_models, __pyx_v_model_name);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 233, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_11kivent_core_9rendering_5model_VertexModel))))) <span class='error_goto'>__PYX_ERR(1, 233, __pyx_L1_error)</span>
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0234</span>:             <span class="n">component_data</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">*&gt;</span><span class="n">model</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data-&gt;model = ((void *)__pyx_v_model);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0235</span>:             <span class="n">manager</span><span class="o">.</span><span class="n">register_entity_with_model</span><span class="p">(</span><span class="n">component_data</span><span class="o">.</span><span class="n">entity_id</span><span class="p">,</span></pre>
<pre class='cython code score-4 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_manager), __pyx_n_s_register_entity_with_model);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 235, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_component_data-&gt;entity_id);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 235, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
</pre><pre class="cython line score-44" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0236</span>:                 <span class="n">renderer</span><span class="o">.</span><span class="n">system_id</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span></pre>
<pre class='cython code score-44 '>  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_renderer), __pyx_n_s_system_id);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 236, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_1)) {
    PyObject *__pyx_temp[4] = {__pyx_t_5, __pyx_t_7, __pyx_t_4, __pyx_v_model-&gt;_name};
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 235, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_1)) {
    PyObject *__pyx_temp[4] = {__pyx_t_5, __pyx_t_7, __pyx_t_4, __pyx_v_model-&gt;_name};
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 235, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(1, 235, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    if (__pyx_t_5) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0+__pyx_t_6, __pyx_t_7);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 1+__pyx_t_6, __pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_model-&gt;_name);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_model-&gt;_name);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 2+__pyx_t_6, __pyx_v_model-&gt;_name);
    __pyx_t_7 = 0;
    __pyx_t_4 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_8, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 235, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0237</span>:             <span class="n">renderer</span><span class="o">.</span><span class="n">_batch_entity</span><span class="p">(</span><span class="n">component_data</span><span class="o">.</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">component_data</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_renderer-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_batch_entity(__pyx_v_renderer, __pyx_v_component_data-&gt;entity_id, __pyx_v_component_data);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((void *)NULL))) __PYX_ERR(1, 237, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">0238</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0239</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0240</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">Renderer</span><span class="p">(</span><span class="n">StaticMemGameSystem</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer {
  struct __pyx_vtabstruct_11kivent_core_7systems_19staticmemgamesystem_StaticMemGameSystem __pyx_base;
  void *(*_batch_entity)(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *, unsigned int, __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *);
  void *(*_unbatch_entity)(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *, unsigned int, __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *);
  void *(*_init_component)(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *, unsigned int, unsigned int, PyBoolObject *, struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *, unsigned int);
  void *(*setup_batch_manager)(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *, struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *);
};
static struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *__pyx_vtabptr_11kivent_core_7systems_9renderers_Renderer;

</pre><pre class="cython line score-0">&#xA0;<span class="">0241</span>:     <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0242</span>: <span class="sd">    Processing Depends On: PositionSystem2D, Renderer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0243</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0244</span>: <span class="sd">    The basic KivEnt renderer draws with the VertexFormat4F:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0245</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0246</span>: <span class="sd">    .. code-block:: cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0247</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0248</span>: <span class="sd">        ctypedef struct VertexFormat4F:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0249</span>: <span class="sd">            GLfloat[2] pos</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0250</span>: <span class="sd">            GLfloat[2] uvs</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0251</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0252</span>: <span class="sd">    Entities will be batched into groups of up to **maximum_vertices**, if</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0253</span>: <span class="sd">    they can share the source of texture. This GameSystem is only</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0254</span>: <span class="sd">    dependent on its own component and the PositionComponent2D.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0255</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0256</span>: <span class="sd">    If you want a static renderer, set **frame_count** to 1 and **updateable**</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0257</span>: <span class="sd">    to false.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0258</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0259</span>: <span class="sd">    **Attributes:**</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0260</span>: <span class="sd">        **shader_source** (StringProperty): Path to the .glsl to be used, do</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0261</span>: <span class="sd">        include &#39;.glsl&#39; in the name. You must ensure that your shader matches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0262</span>: <span class="sd">        your vertex format or you will have problems.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0263</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0264</span>: <span class="sd">        **maximum_vertices** (NumericProperty): The maximum number of vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0265</span>: <span class="sd">        that will be placed in a batch.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0266</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0267</span>: <span class="sd">        **attribute_count** (NumericProperty): The number of attributes each</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0268</span>: <span class="sd">        vertex will contain. Computed automatically inside</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0269</span>: <span class="sd">        calculate_vertex_format.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0270</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0271</span>: <span class="sd">        **vertex_format** (dict): describes format of data sent to shaders,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0272</span>: <span class="sd">        generated automatically based on do_rotate, do_scale, do_color</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0273</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0274</span>: <span class="sd">        **blend_factor_source** (NumericProperty): Sets the Blend Source. for</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0275</span>: <span class="sd">        a visual exploration of this concept visit :</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0276</span>: <span class="sd">        http://www.andersriggelsen.dk/glblendfunc.php</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0277</span>: <span class="sd">        Options Include:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0278</span>: <span class="sd">        GL_SRC_ALPHA, GL_ONE, GL_ZERO, GL_SRC_COLOR, GL_ONE_MINUS_SRC_COLOR,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0279</span>: <span class="sd">        GL_ONE_MINUS_SRC_ALPHA, GL_DST_ALPHA, GL_ONE_MINUS_DST_ALPHA,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0280</span>: <span class="sd">        GL_DST_COLOR, GL_ONE_MINUS_DST_COLOR</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0281</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0282</span>: <span class="sd">        **blend_factor_dest** (NumericProperty): Sets the Blend Dest.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0283</span>: <span class="sd">        See blend_factor_sourc for more details.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0284</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0285</span>: <span class="sd">        **reset_blend_factor_source** (NumericProperty): The blend source</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0286</span>: <span class="sd">        will be reset to this after drawing this canvas.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0287</span>: <span class="sd">        See blend_factor_source for more details.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0288</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0289</span>: <span class="sd">        **reset_blend_factor_dest** (NumericProperty): The blend dest</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0290</span>: <span class="sd">        will be reset to this after drawing this canvas.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0291</span>: <span class="sd">        See blend_factor_source for more details.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0292</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0293</span>: <span class="sd">        **smallest_vertex_count** (NumericProperty, should be int): Used to</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0294</span>: <span class="sd">        estimate the number of entities that can fit in each batch at max,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0295</span>: <span class="sd">        batch ComponentPointerAggregator will then be **size_of_batches** //</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0296</span>: <span class="sd">        **smallest_vertex_count** * **vertex_format_size**.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0297</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0298</span>: <span class="sd">        **max_batches** (NumericProperty, should be int): The maximum number</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0299</span>: <span class="sd">        of space to reserve for this renderer. Will be **max_batches** *</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0300</span>: <span class="sd">        **frame_count** * **size_of_batches**.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0301</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0302</span>: <span class="sd">        **size_of_batches** (NumericProperty): Size in kibibytes of each batch.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0303</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0304</span>: <span class="sd">        **vertex_format_size** (NumericProperty): The size in bytes of the</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0305</span>: <span class="sd">        vertex_format to be used. Will typically be the result of calling</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0306</span>: <span class="sd">        sizeof on the struct being used.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0307</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0308</span>: <span class="sd">        **frame_count** (NumericProperty, should be int): The number of frames</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0309</span>: <span class="sd">        to multibuffer.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0310</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0311</span>: <span class="sd">        **force_update** (BooleanProperty): Set force_update if you want to be</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0312</span>: <span class="sd">        sure an Entity is drawn immediately upon being added instead of waiting</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0313</span>: <span class="sd">        for the next update tick. Useful if you want to have a static renderer,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0314</span>: <span class="sd">        or if you are adding and removing an Entity every frame.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0315</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0316</span>: <span class="sd">        **static_rendering** (BooleanProperty): Set static_rendering to True,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0317</span>: <span class="sd">        if you do not want to redraw every Entity every frame. Usually used</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0318</span>: <span class="sd">        in combination with force_update = True.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0319</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0320</span>: <span class="sd">        **update_trigger** (function): Invoke update_trigger if you want to</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0321</span>: <span class="sd">        force the renderer to redraw a frame. force_update = True will call</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0322</span>: <span class="sd">        update_trigger automatically on batching and unbatching of an Entity.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0323</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0324</span>: <span class="sd">    **Attributes: (Cython Access Only)**</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0325</span>: <span class="sd">        **attribute_count** (unsigned int): The number of attributes in the</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0326</span>: <span class="sd">        VertMesh format for this renderer. Defaults to 4 (x, y, u, v).</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0327</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0328</span>: <span class="sd">        **batch_manager** (BatchManager): The BatchManager that is responsible</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0329</span>: <span class="sd">        for actually submitting vertex data to the GPU.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0330</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0331</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0332</span>:     <span class="n">system_id</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;renderer&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 332, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_renderer) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 332, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_system_id, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 332, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0333</span>:     <span class="n">updateable</span> <span class="o">=</span> <span class="n">BooleanProperty</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_BooleanProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 333, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, Py_True) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, Py_True);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 333, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_updateable, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 333, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0334</span>:     <span class="n">renderable</span> <span class="o">=</span> <span class="n">BooleanProperty</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_BooleanProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 334, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, Py_True) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, Py_True);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 334, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_renderable, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 334, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0335</span>:     <span class="n">static_rendering</span> <span class="o">=</span> <span class="n">BooleanProperty</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_BooleanProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 335, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, Py_False) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, Py_False);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 335, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_static_rendering, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 335, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0336</span>:     <span class="n">force_update</span> <span class="o">=</span> <span class="n">BooleanProperty</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_BooleanProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 336, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, Py_False) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, Py_False);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 336, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_force_update, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 336, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0337</span>:     <span class="n">max_batches</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="mf">20</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 337, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_int_20) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_int_20);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 337, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_max_batches, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 337, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0338</span>:     <span class="n">size_of_batches</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="mf">256</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 338, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_int_256) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_int_256);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 338, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_size_of_batches, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 338, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0339</span>:     <span class="n">vertex_format_size</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat4F</span><span class="p">))</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 339, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 339, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 339, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_vertex_format_size, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 339, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0340</span>:     <span class="n">frame_count</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 340, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_int_2) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_int_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 340, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_frame_count, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 340, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0341</span>:     <span class="n">smallest_vertex_count</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="mf">4</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 341, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_int_4) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_int_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 341, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_smallest_vertex_count, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 341, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-37" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0342</span>:     <span class="n">system_names</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">([</span><span class="s">&#39;renderer&#39;</span><span class="p">,</span> <span class="s">&#39;position&#39;</span><span class="p">])</span></pre>
<pre class='cython code score-37 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 342, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 342, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_renderer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_renderer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_n_s_renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_n_s_position);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 342, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_system_names, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 342, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0343</span>:     <span class="n">shader_source</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;positionshader.glsl&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 343, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_kp_s_positionshader_glsl) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_kp_s_positionshader_glsl);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 343, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_shader_source, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 343, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0344</span>:     <span class="n">model_format</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;vertex_format_4f&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 344, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_vertex_format_4f) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_vertex_format_4f);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 344, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_model_format, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 344, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0345</span>:     <span class="n">blend_factor_source</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">GL_SRC_ALPHA</span><span class="p">)</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 345, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_GL_SRC_ALPHA);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 345, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 345, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_blend_factor_source, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 345, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0346</span>:     <span class="n">blend_factor_dest</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">GL_ONE_MINUS_SRC_ALPHA</span><span class="p">)</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 346, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_GL_ONE_MINUS_SRC_ALPHA);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 346, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 346, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_blend_factor_dest, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 346, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0347</span>:     <span class="n">reset_blend_factor_source</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">GL_SRC_ALPHA</span><span class="p">)</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 347, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_GL_SRC_ALPHA);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 347, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 347, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_reset_blend_factor_source, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 347, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0348</span>:     <span class="n">reset_blend_factor_dest</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">GL_ONE_MINUS_SRC_ALPHA</span><span class="p">)</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 348, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_GL_ONE_MINUS_SRC_ALPHA);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 348, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 348, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_reset_blend_factor_dest, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 348, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0349</span>:     <span class="n">type_size</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">sizeof</span><span class="p">(</span><span class="n">RenderStruct</span><span class="p">))</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 349, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_7systems_9renderers_RenderStruct)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 349, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 349, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_type_size, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 349, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0350</span>:     <span class="n">component_type</span> <span class="o">=</span> <span class="n">ObjectProperty</span><span class="p">(</span><span class="n">RenderComponent</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ObjectProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 350, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RenderComponent)) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RenderComponent));
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 350, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer-&gt;tp_dict, __pyx_n_s_component_type, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 350, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_Renderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">0351</span>: </pre>
<pre class="cython line score-26" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0352</span>:     <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></pre>
<pre class='cython code score-26 '>/* Python wrapper */
static int __pyx_pw_11kivent_core_7systems_9renderers_8Renderer_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static int __pyx_pw_11kivent_core_7systems_9renderers_8Renderer_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_kwargs = 0;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__init__ (wrapper)", 0);
  if (unlikely(<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) &gt; 0)) {
    <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__init__", 1, 0, 0, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); return -1;}
  if (__pyx_kwds &amp;&amp; unlikely(!<span class='pyx_c_api'>__Pyx_CheckKeywordStrings</span>(__pyx_kwds, "__init__", 1))) return -1;
  __pyx_v_kwargs = (__pyx_kwds) ? <span class='py_c_api'>PyDict_Copy</span>(__pyx_kwds) : <span class='py_c_api'>PyDict_New</span>(); if (unlikely(!__pyx_v_kwargs)) return -1;
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_kwargs);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer___init__(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), __pyx_v_kwargs);

  /* function exit code */
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_kwargs);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_11kivent_core_7systems_9renderers_8Renderer___init__(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, PyObject *__pyx_v_kwargs) {
  int __pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__init__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__init__", __pyx_f[1], 352, 0, <span class='error_goto'>__PYX_ERR(1, 352, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_12);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_13);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_15);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0353</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">RenderContext</span><span class="p">(</span><span class="n">use_parent_projection</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span></pre>
<pre class='cython code score-11 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 353, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_use_parent_projection, Py_True) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 353, __pyx_L1_error)</span>
/*  */
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_4kivy_8graphics_12instructions_RenderContext), __pyx_empty_tuple, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 353, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.canvas);
  __pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.canvas = __pyx_t_2;
  __pyx_t_2 = 0;
</pre><pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0354</span>:                                     <span class="n">nocompiler</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></pre>
<pre class='cython code score-5 '>  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_nocompiler, Py_True) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 353, __pyx_L1_error)</span>
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0355</span>:         <span class="k">if</span> <span class="s">&#39;shader_source&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>  __pyx_t_3 = (<span class='pyx_c_api'>__Pyx_PyDict_ContainsTF</span>(__pyx_n_s_shader_source, __pyx_v_kwargs, Py_EQ)); if (unlikely(__pyx_t_3 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 355, __pyx_L1_error)</span>
  __pyx_t_4 = (__pyx_t_3 != 0);
  if (__pyx_t_4) {
/*  */
  }
</pre><pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0356</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;shader_source&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-8 '>    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyDict_GetItemDefault</span>(__pyx_v_kwargs, __pyx_n_s_shader_source, Py_None);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 356, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.canvas, __pyx_n_s_shader);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 356, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_1, __pyx_n_s_source, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 356, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0357</span>:         <span class="nb">super</span><span class="p">(</span><span class="n">Renderer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></pre>
<pre class='cython code score-19 '>  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 357, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_self));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_self));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1, ((PyObject *)__pyx_v_self));
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_builtin_super, __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 357, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_init);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 357, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_empty_tuple, __pyx_v_kwargs);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 357, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-66" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0358</span>:         <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">before</span><span class="p">:</span></pre>
<pre class='cython code score-66 '>  /*with:*/ {
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.canvas, __pyx_n_s_before);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 358, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_LookupSpecial</span>(__pyx_t_2, __pyx_n_s_exit);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 358, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_LookupSpecial</span>(__pyx_t_2, __pyx_n_s_enter);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 358, __pyx_L4_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_6))) {
      __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_6);
      if (likely(__pyx_t_7)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_6, function);
      }
    }
    __pyx_t_1 = (__pyx_t_7) ? <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_6, __pyx_t_7) : <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_6);
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(1, 358, __pyx_L4_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    /*try:*/ {
      {
        /*try:*/ {
/*  */
        }
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_10); __pyx_t_10 = 0;
        goto __pyx_L13_try_end;
        __pyx_L8_error:;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        /*except:*/ {
          <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
          if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_2, &amp;__pyx_t_1, &amp;__pyx_t_6) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 358, __pyx_L10_except_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
          __pyx_t_7 = <span class='py_c_api'>PyTuple_Pack</span>(3, __pyx_t_2, __pyx_t_1, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 358, __pyx_L10_except_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
          __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_t_7, NULL);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
          if (unlikely(!__pyx_t_11)) <span class='error_goto'>__PYX_ERR(1, 358, __pyx_L10_except_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_11);
          __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_11);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_11); __pyx_t_11 = 0;
          if (__pyx_t_4 &lt; 0) <span class='error_goto'>__PYX_ERR(1, 358, __pyx_L10_except_error)</span>
          __pyx_t_3 = ((!(__pyx_t_4 != 0)) != 0);
          if (__pyx_t_3) {
            <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
            <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
            <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_6);
            <span class='pyx_c_api'>__Pyx_ErrRestoreWithState</span>(__pyx_t_2, __pyx_t_1, __pyx_t_6);
            __pyx_t_2 = 0; __pyx_t_1 = 0; __pyx_t_6 = 0; 
            <span class='error_goto'>__PYX_ERR(1, 358, __pyx_L10_except_error)</span>
          }
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
          goto __pyx_L9_exception_handled;
        }
        __pyx_L10_except_error:;
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_8);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_9);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_10);
        <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_8, __pyx_t_9, __pyx_t_10);
        goto __pyx_L1_error;
        __pyx_L9_exception_handled:;
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_8);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_9);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_10);
        <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_8, __pyx_t_9, __pyx_t_10);
        __pyx_L13_try_end:;
      }
    }
    /*finally:*/ {
      /*normal exit:*/{
        if (__pyx_t_5) {
          __pyx_t_10 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_tuple__3, NULL);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
          if (unlikely(!__pyx_t_10)) <span class='error_goto'>__PYX_ERR(1, 358, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_10);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_10); __pyx_t_10 = 0;
        }
        goto __pyx_L7;
      }
      __pyx_L7:;
    }
    goto __pyx_L17;
    __pyx_L4_error:;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L1_error;
    __pyx_L17:;
  }
/*  */
  __pyx_tuple__3 = <span class='py_c_api'>PyTuple_Pack</span>(3, Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_tuple__3)) __PYX_ERR(1, 358, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__3);
</pre><pre class="cython line score-20" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0359</span>:             <span class="n">Callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_blend_func</span><span class="p">)</span></pre>
<pre class='cython code score-20 '>          <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_Callback);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 359, __pyx_L8_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_set_blend_func);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 359, __pyx_L8_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
          __pyx_t_7 = NULL;
          if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
            __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
            if (likely(__pyx_t_7)) {
              PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
              <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
              <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
              <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
            }
          }
          __pyx_t_2 = (__pyx_t_7) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_7, __pyx_t_6) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
          if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 359, __pyx_L8_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-61" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0360</span>:         <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">after</span><span class="p">:</span></pre>
<pre class='cython code score-61 '>  /*with:*/ {
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.canvas, __pyx_n_s_after);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 360, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_LookupSpecial</span>(__pyx_t_6, __pyx_n_s_exit);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 360, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_LookupSpecial</span>(__pyx_t_6, __pyx_n_s_enter);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 360, __pyx_L18_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
      __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
      if (likely(__pyx_t_7)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
      }
    }
    __pyx_t_1 = (__pyx_t_7) ? <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_t_7) : <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(1, 360, __pyx_L18_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    /*try:*/ {
      {
        /*try:*/ {
/*  */
        }
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_10); __pyx_t_10 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
        goto __pyx_L27_try_end;
        __pyx_L22_error:;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        /*except:*/ {
          <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
          if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_6, &amp;__pyx_t_1, &amp;__pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 360, __pyx_L24_except_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
          __pyx_t_7 = <span class='py_c_api'>PyTuple_Pack</span>(3, __pyx_t_6, __pyx_t_1, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 360, __pyx_L24_except_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
          __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_t_7, NULL);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
          if (unlikely(!__pyx_t_11)) <span class='error_goto'>__PYX_ERR(1, 360, __pyx_L24_except_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_11);
          __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_11);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_11); __pyx_t_11 = 0;
          if (__pyx_t_3 &lt; 0) <span class='error_goto'>__PYX_ERR(1, 360, __pyx_L24_except_error)</span>
          __pyx_t_4 = ((!(__pyx_t_3 != 0)) != 0);
          if (__pyx_t_4) {
            <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
            <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
            <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_2);
            <span class='pyx_c_api'>__Pyx_ErrRestoreWithState</span>(__pyx_t_6, __pyx_t_1, __pyx_t_2);
            __pyx_t_6 = 0; __pyx_t_1 = 0; __pyx_t_2 = 0; 
            <span class='error_goto'>__PYX_ERR(1, 360, __pyx_L24_except_error)</span>
          }
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L23_exception_handled;
        }
        __pyx_L24_except_error:;
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_10);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_9);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_8);
        <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_10, __pyx_t_9, __pyx_t_8);
        goto __pyx_L1_error;
        __pyx_L23_exception_handled:;
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_10);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_9);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_8);
        <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_10, __pyx_t_9, __pyx_t_8);
        __pyx_L27_try_end:;
      }
    }
    /*finally:*/ {
      /*normal exit:*/{
        if (__pyx_t_5) {
          __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_tuple__3, NULL);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
          if (unlikely(!__pyx_t_8)) <span class='error_goto'>__PYX_ERR(1, 360, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
        }
        goto __pyx_L21;
      }
      __pyx_L21:;
    }
    goto __pyx_L31;
    __pyx_L18_error:;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L1_error;
    __pyx_L31:;
  }
</pre><pre class="cython line score-20" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0361</span>:             <span class="n">Callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reset_blend_func</span><span class="p">)</span></pre>
<pre class='cython code score-20 '>          <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_Callback);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 361, __pyx_L22_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_reset_blend_func);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 361, __pyx_L22_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
          __pyx_t_7 = NULL;
          if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
            __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
            if (likely(__pyx_t_7)) {
              PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
              <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
              <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
              <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
            }
          }
          __pyx_t_6 = (__pyx_t_7) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_7, __pyx_t_2) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          if (unlikely(!__pyx_t_6)) <span class='error_goto'>__PYX_ERR(1, 361, __pyx_L22_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-63" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0362</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">update_trigger</span> <span class="o">=</span> <span class="n">Clock</span><span class="o">.</span><span class="n">create_trigger</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">,</span> <span class="bp">True</span><span class="p">))</span></pre>
<pre class='cython code score-63 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_Clock);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 362, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_create_trigger);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 362, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_7, __pyx_n_s_partial);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 362, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_update);<span class='error_goto'> if (unlikely(!__pyx_t_12)) __PYX_ERR(1, 362, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_12);
  __pyx_t_13 = NULL;
  __pyx_t_14 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
    __pyx_t_13 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
    if (likely(__pyx_t_13)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_13);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
      __pyx_t_14 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_13, __pyx_t_12, Py_True};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 362, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_13); __pyx_t_13 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_12); __pyx_t_12 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_13, __pyx_t_12, Py_True};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 362, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_13); __pyx_t_13 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_12); __pyx_t_12 = 0;
  } else
  #endif
  {
    __pyx_t_15 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_14);<span class='error_goto'> if (unlikely(!__pyx_t_15)) __PYX_ERR(1, 362, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
    if (__pyx_t_13) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_13); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_15, 0, __pyx_t_13); __pyx_t_13 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_12);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_15, 0+__pyx_t_14, __pyx_t_12);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_True);
    <span class='refnanny'>__Pyx_GIVEREF</span>(Py_True);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_15, 1+__pyx_t_14, Py_True);
    __pyx_t_12 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_15, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 362, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_6))) {
    __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_6);
    if (likely(__pyx_t_7)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_6, function);
    }
  }
  __pyx_t_2 = (__pyx_t_7) ? __Pyx_PyObject_Call2Args(__pyx_t_6, __pyx_t_7, __pyx_t_1) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_6, __pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 362, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;update_trigger);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_self-&gt;update_trigger);
  __pyx_v_self-&gt;update_trigger = __pyx_t_2;
  __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0363</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0364</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0365</span>:     <span class="k">property</span> <span class="nf">update_trigger</span><span class="p">:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0366</span>: </pre>
<pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0367</span>:         <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre>
<pre class='cython code score-2 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_14update_trigger_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_14update_trigger_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_14update_trigger___get__(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_14update_trigger___get__(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
  <span class='trace'>__Pyx_TraceCall</span>("__get__", __pyx_f[1], 367, 0, <span class='error_goto'>__PYX_ERR(1, 367, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.update_trigger.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0368</span>:             <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_trigger</span></pre>
<pre class='cython code score-2 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;update_trigger);
  __pyx_r = __pyx_v_self-&gt;update_trigger;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0369</span>: </pre>
<pre class="cython line score-9" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0370</span>:     <span class="k">def</span> <span class="nf">_set_blend_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instruction</span><span class="p">):</span></pre>
<pre class='cython code score-9 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_3_set_blend_func(PyObject *__pyx_v_self, PyObject *__pyx_v_instruction); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_2_set_blend_func[] = "Renderer._set_blend_func(self, instruction)\n\n        This function is called internally in a callback on canvas.before\n        to set up the blend function, it will obey **blend_factor_source**\n        and **blend_factor_dest** properties.\n        ";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_3_set_blend_func(PyObject *__pyx_v_self, PyObject *__pyx_v_instruction) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_set_blend_func (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_2_set_blend_func(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), ((PyObject *)__pyx_v_instruction));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_2_set_blend_func(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_instruction) {
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_set_blend_func", 0);
  <span class='trace'>__Pyx_TraceCall</span>("_set_blend_func", __pyx_f[1], 370, 0, <span class='error_goto'>__PYX_ERR(1, 370, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer._set_blend_func", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0371</span>:         <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0372</span>: <span class="sd">        This function is called internally in a callback on canvas.before</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0373</span>: <span class="sd">        to set up the blend function, it will obey **blend_factor_source**</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0374</span>: <span class="sd">        and **blend_factor_dest** properties.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0375</span>: <span class="sd">        &#39;&#39;&#39;</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0376</span>:         <span class="n">gl_log_debug_message</span><span class="p">(</span><span class="s">&#39;Renderer._set_blend_func-preglBlendFunc&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_f_11kivent_core_9rendering_8gl_debug_gl_log_debug_message(__pyx_kp_s_Renderer__set_blend_func_preglBl, NULL);
</pre><pre class="cython line score-46" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0377</span>:         <span class="n">glBlendFunc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blend_factor_source</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">blend_factor_dest</span><span class="p">)</span></pre>
<pre class='cython code score-46 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_2, __pyx_n_s_glBlendFunc);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 377, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_blend_factor_source);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 377, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_blend_factor_dest);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 377, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_3, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 377, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_3, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 377, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 377, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_5) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 377, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0378</span>:         <span class="n">gl_log_debug_message</span><span class="p">(</span><span class="s">&#39;Renderer._set_blend_func-glBlendFunc&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_f_11kivent_core_9rendering_8gl_debug_gl_log_debug_message(__pyx_kp_s_Renderer__set_blend_func_glBlend, NULL);
</pre><pre class="cython line score-0">&#xA0;<span class="">0379</span>: </pre>
<pre class="cython line score-9" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0380</span>:     <span class="k">def</span> <span class="nf">_reset_blend_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instruction</span><span class="p">):</span></pre>
<pre class='cython code score-9 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_5_reset_blend_func(PyObject *__pyx_v_self, PyObject *__pyx_v_instruction); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_4_reset_blend_func[] = "Renderer._reset_blend_func(self, instruction)\n\n        This function is called internally in a callback on canvas.after\n        to reset the blend function, it will obey **reset_blend_factor_source**\n        and **reset_blend_factor_dest** properties.\n        ";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_5_reset_blend_func(PyObject *__pyx_v_self, PyObject *__pyx_v_instruction) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_reset_blend_func (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_4_reset_blend_func(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), ((PyObject *)__pyx_v_instruction));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_4_reset_blend_func(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_instruction) {
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_reset_blend_func", 0);
  <span class='trace'>__Pyx_TraceCall</span>("_reset_blend_func", __pyx_f[1], 380, 0, <span class='error_goto'>__PYX_ERR(1, 380, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer._reset_blend_func", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0381</span>:         <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0382</span>: <span class="sd">        This function is called internally in a callback on canvas.after</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0383</span>: <span class="sd">        to reset the blend function, it will obey **reset_blend_factor_source**</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0384</span>: <span class="sd">        and **reset_blend_factor_dest** properties.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0385</span>: <span class="sd">        &#39;&#39;&#39;</span></pre>
<pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0386</span>:         <span class="n">glBlendFunc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_blend_factor_source</span><span class="p">,</span></pre>
<pre class='cython code score-4 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_2, __pyx_n_s_glBlendFunc);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 386, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_reset_blend_factor_source);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 386, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
</pre><pre class="cython line score-42" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0387</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">reset_blend_factor_dest</span><span class="p">)</span></pre>
<pre class='cython code score-42 '>  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_reset_blend_factor_dest);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 387, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_3, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 386, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_3, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 386, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 386, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_5) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 386, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0388</span>:         <span class="n">gl_log_debug_message</span><span class="p">(</span><span class="s">&#39;Renderer._reset_blend_func-glBlendFunc&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_f_11kivent_core_9rendering_8gl_debug_gl_log_debug_message(__pyx_kp_s_Renderer__reset_blend_func_glBle, NULL);
</pre><pre class="cython line score-0">&#xA0;<span class="">0389</span>: </pre>
<pre class="cython line score-7" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0390</span>:     <span class="k">def</span> <span class="nf">_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-7 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_7_update(PyObject *__pyx_v_self, PyObject *__pyx_v_dt); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_6_update[] = "Renderer._update(self, dt)\n\n        We only want to update renderer once per frame, so we will override\n        the basic GameSystem logic here which accounts appropriately for\n        dt.\n        ";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_7_update(PyObject *__pyx_v_self, PyObject *__pyx_v_dt) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_update (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_6_update(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), ((PyObject *)__pyx_v_dt));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_6_update(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, PyObject *__pyx_v_dt) {
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("_update", __pyx_f[1], 390, 0, <span class='error_goto'>__PYX_ERR(1, 390, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer._update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0391</span>:         <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0392</span>: <span class="sd">        We only want to update renderer once per frame, so we will override</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0393</span>: <span class="sd">        the basic GameSystem logic here which accounts appropriately for</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0394</span>: <span class="sd">        dt.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0395</span>: <span class="sd">        &#39;&#39;&#39;</span></pre>
<pre class="cython line score-40" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0396</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span></pre>
<pre class='cython code score-40 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_update);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 396, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, Py_False, __pyx_v_dt};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 396, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, Py_False, __pyx_v_dt};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 396, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 396, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    if (__pyx_t_3) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_False);
    <span class='refnanny'>__Pyx_GIVEREF</span>(Py_False);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0+__pyx_t_4, Py_False);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_dt);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_dt);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1+__pyx_t_4, __pyx_v_dt);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 396, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0397</span>: </pre>
<pre class="cython line score-28" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0398</span>:     <span class="k">def</span> <span class="nf">on_shader_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span></pre>
<pre class='cython code score-28 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_9on_shader_source(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_8on_shader_source[] = "Renderer.on_shader_source(self, instance, value)\n\n        Event that sets the canvas.shader.source property when the\n        **shader_source** property is set\n        ";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_9on_shader_source(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  CYTHON_UNUSED PyObject *__pyx_v_instance = 0;
  PyObject *__pyx_v_value = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("on_shader_source (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_instance,&amp;__pyx_n_s_value,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_instance)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_value)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("on_shader_source", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 398, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "on_shader_source") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 398, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_instance = values[0];
    __pyx_v_value = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("on_shader_source", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 398, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.on_shader_source", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_8on_shader_source(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), __pyx_v_instance, __pyx_v_value);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_8on_shader_source(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_instance, PyObject *__pyx_v_value) {
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("on_shader_source", 0);
  <span class='trace'>__Pyx_TraceCall</span>("on_shader_source", __pyx_f[1], 398, 0, <span class='error_goto'>__PYX_ERR(1, 398, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.on_shader_source", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0399</span>:         <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0400</span>: <span class="sd">        Event that sets the canvas.shader.source property when the</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0401</span>: <span class="sd">        **shader_source** property is set</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0402</span>: <span class="sd">        &#39;&#39;&#39;</span></pre>
<pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0403</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">value</span></pre>
<pre class='cython code score-5 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.canvas, __pyx_n_s_shader);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 403, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_t_1, __pyx_n_s_source, __pyx_v_value) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 403, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0404</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0405</span>:     <span class="k">def</span> <span class="nf">clear_component</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">unsigned</span> <span class="nb">int</span> <span class="n">component_index</span><span class="p">):</span></pre>
<pre class='cython code score-14 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_11clear_component(PyObject *__pyx_v_self, PyObject *__pyx_arg_component_index); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_10clear_component[] = "Renderer.clear_component(self, unsigned int component_index)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_11clear_component(PyObject *__pyx_v_self, PyObject *__pyx_arg_component_index) {
  unsigned int __pyx_v_component_index;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("clear_component (wrapper)", 0);
  assert(__pyx_arg_component_index); {
    __pyx_v_component_index = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_arg_component_index); if (unlikely((__pyx_v_component_index == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 405, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.clear_component", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_10clear_component(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), ((unsigned int)__pyx_v_component_index));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_10clear_component(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, unsigned int __pyx_v_component_index) {
  struct __pyx_obj_11kivent_core_15memory_handlers_4zone_MemoryZone *__pyx_v_memory_zone = 0;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_pointer;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("clear_component", 0);
  <span class='trace'>__Pyx_TraceCall</span>("clear_component", __pyx_f[1], 405, 0, <span class='error_goto'>__PYX_ERR(1, 405, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.clear_component", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_memory_zone);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0406</span>:         <span class="k">cdef</span> <span class="kt">MemoryZone</span> <span class="nf">memory_zone</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">imz_components</span><span class="o">.</span><span class="n">memory_zone</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.imz_components-&gt;memory_zone);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_memory_zone = ((struct __pyx_obj_11kivent_core_15memory_handlers_4zone_MemoryZone *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0407</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">pointer</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">memory_zone</span><span class="o">.</span><span class="n">get_pointer</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_11kivent_core_15memory_handlers_4zone_MemoryZone *)__pyx_v_memory_zone-&gt;__pyx_vtab)-&gt;get_pointer(__pyx_v_memory_zone, __pyx_v_component_index);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((void *)NULL))) __PYX_ERR(1, 407, __pyx_L1_error)</span>
  __pyx_v_pointer = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_t_2);
</pre><pre class="cython line score-0">&#xA0;<span class="">0408</span>:             <span class="n">component_index</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0409</span>:         <span class="n">pointer</span><span class="o">.</span><span class="n">entity_id</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>  __pyx_v_pointer-&gt;entity_id = -1;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0410</span>:         <span class="n">pointer</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="bp">NULL</span></pre>
<pre class='cython code score-0 '>  __pyx_v_pointer-&gt;model = NULL;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0411</span>:         <span class="n">pointer</span><span class="o">.</span><span class="n">renderer</span> <span class="o">=</span> <span class="bp">NULL</span></pre>
<pre class='cython code score-0 '>  __pyx_v_pointer-&gt;renderer = NULL;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0412</span>:         <span class="n">pointer</span><span class="o">.</span><span class="n">texkey</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>  __pyx_v_pointer-&gt;texkey = -1;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0413</span>:         <span class="n">pointer</span><span class="o">.</span><span class="n">render</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_pointer-&gt;render = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0414</span>:         <span class="n">pointer</span><span class="o">.</span><span class="n">batch_id</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>  __pyx_v_pointer-&gt;batch_id = -1;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0415</span>:         <span class="n">pointer</span><span class="o">.</span><span class="n">vert_index</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>  __pyx_v_pointer-&gt;vert_index = -1;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0416</span>:         <span class="n">pointer</span><span class="o">.</span><span class="n">ind_index</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>  __pyx_v_pointer-&gt;ind_index = -1;
</pre><pre class="cython line score-0">&#xA0;<span class="">0417</span>: </pre>
<pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0418</span>:     <span class="k">cdef</span> <span class="kt">void</span>* <span class="nf">setup_batch_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Buffer</span> <span class="n">master_buffer</span><span class="p">)</span> <span class="k">except</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-11 '>static void *__pyx_f_11kivent_core_7systems_9renderers_8Renderer_setup_batch_manager(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *__pyx_v_master_buffer) {
  struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *__pyx_v_batch_vertex_format = 0;
  PyObject *__pyx_v_x = NULL;
  void *__pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("setup_batch_manager", 0);
  <span class='trace'>__Pyx_TraceCall</span>("setup_batch_manager", __pyx_f[1], 418, 0, <span class='error_goto'>__PYX_ERR(1, 418, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.setup_batch_manager", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_vertex_format);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_x);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0419</span>:         <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0420</span>: <span class="sd">        Function called internally during **allocate** to setup the</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0421</span>: <span class="sd">        BatchManager. The KEVertexFormat should be initialized in this</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0422</span>: <span class="sd">        function as well.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0423</span>: <span class="sd">        &#39;&#39;&#39;</span></pre>
<pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0424</span>:         <span class="k">cdef</span> <span class="kt">KEVertexFormat</span> <span class="nf">batch_vertex_format</span> <span class="o">=</span> <span class="n">KEVertexFormat</span><span class="p">(</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 424, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
/*  */
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PySequence_Tuple</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 424, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_2, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 424, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_13vertex_format_KEVertexFormat), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 424, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_batch_vertex_format = ((struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0425</span>:             <span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat4F</span><span class="p">),</span> <span class="o">*</span><span class="n">vertex_format_4f</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 425, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/*  */
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_vertex_format_4f);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 425, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0426</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span> <span class="o">=</span> <span class="n">BatchManager</span><span class="p">(</span></pre>
<pre class='cython code score-23 '>  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(10);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 426, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, ((PyObject *)__pyx_v_batch_vertex_format));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, ((PyObject *)__pyx_v_master_buffer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_triangles);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_triangles);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 5, __pyx_n_s_triangles);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 6, __pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 7, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 8, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 9, __pyx_t_5);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_4 = 0;
  __pyx_t_6 = 0;
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_8batching_BatchManager), __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 426, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;batch_manager);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;batch_manager));
  __pyx_v_self-&gt;batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_5);
  __pyx_t_5 = 0;
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0427</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">size_of_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_count</span><span class="p">,</span></pre>
<pre class='cython code score-6 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_size_of_batches);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 427, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_max_batches);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 427, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_frame_count);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 427, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class="cython line score-0">&#xA0;<span class="">0428</span>:             <span class="n">batch_vertex_format</span><span class="p">,</span> <span class="n">master_buffer</span><span class="p">,</span> <span class="s">&#39;triangles&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span></pre>
<pre class="cython line score-53" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0429</span>:             <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_names</span><span class="p">],</span></pre>
<pre class='cython code score-53 '>  __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 429, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_names);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 429, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_5)) || <span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_5)) {
    __pyx_t_6 = __pyx_t_5; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_7 = -1; __pyx_t_6 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 429, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = Py_TYPE(__pyx_t_6)-&gt;tp_iternext;<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(1, 429, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_6))) {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 429, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 429, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 429, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 429, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_8(__pyx_t_6);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = <span class='py_c_api'>PyErr_Occurred</span>();
        if (exc_type) {
          if (likely(<span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(exc_type, PyExc_StopIteration))) <span class='py_c_api'>PyErr_Clear</span>();
          else <span class='error_goto'>__PYX_ERR(1, 429, __pyx_L1_error)</span>
        }
        break;
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_x, __pyx_t_5);
    __pyx_t_5 = 0;
    if (unlikely(<span class='pyx_c_api'>__Pyx_ListComp_Append</span>(__pyx_t_4, (PyObject*)__pyx_v_x))) <span class='error_goto'>__PYX_ERR(1, 429, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0430</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">smallest_vertex_count</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_smallest_vertex_count);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 430, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 430, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0431</span>:         <span class="k">return</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-0 '>  __pyx_r = ((void *)__pyx_v_self-&gt;batch_manager);
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0432</span>: </pre>
<pre class="cython line score-35" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0433</span>:     <span class="k">def</span> <span class="nf">allocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Buffer</span> <span class="n">master_buffer</span><span class="p">,</span> <span class="nb">dict</span> <span class="n">reserve_spec</span><span class="p">):</span></pre>
<pre class='cython code score-35 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_13allocate(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_12allocate[] = "Renderer.allocate(self, Buffer master_buffer, dict reserve_spec)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_13allocate(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *__pyx_v_master_buffer = 0;
  PyObject *__pyx_v_reserve_spec = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("allocate (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_master_buffer,&amp;__pyx_n_s_reserve_spec,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_master_buffer)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_reserve_spec)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("allocate", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 433, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "allocate") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 433, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_master_buffer = ((struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *)values[0]);
    __pyx_v_reserve_spec = ((PyObject*)values[1]);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("allocate", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 433, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.allocate", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_master_buffer), __pyx_ptype_11kivent_core_15memory_handlers_9membuffer_Buffer, 1, "master_buffer", 0))) <span class='error_goto'>__PYX_ERR(1, 433, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_reserve_spec), (&amp;PyDict_Type), 1, "reserve_spec", 1))) <span class='error_goto'>__PYX_ERR(1, 433, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_12allocate(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), __pyx_v_master_buffer, __pyx_v_reserve_spec);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_12allocate(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *__pyx_v_master_buffer, PyObject *__pyx_v_reserve_spec) {
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("allocate", 0);
  <span class='trace'>__Pyx_TraceCall</span>("allocate", __pyx_f[1], 433, 0, <span class='error_goto'>__PYX_ERR(1, 433, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.allocate", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-53" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0434</span>:         <span class="nb">super</span><span class="p">(</span><span class="n">Renderer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">allocate</span><span class="p">(</span><span class="n">master_buffer</span><span class="p">,</span> <span class="n">reserve_spec</span><span class="p">)</span></pre>
<pre class='cython code score-53 '>  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 434, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_self));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_self));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, ((PyObject *)__pyx_v_self));
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_builtin_super, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 434, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_allocate);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 434, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, ((PyObject *)__pyx_v_master_buffer), __pyx_v_reserve_spec};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 434, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, ((PyObject *)__pyx_v_master_buffer), __pyx_v_reserve_spec};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 434, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 434, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    if (__pyx_t_3) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_master_buffer));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_master_buffer));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0+__pyx_t_4, ((PyObject *)__pyx_v_master_buffer));
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_reserve_spec);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_reserve_spec);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1+__pyx_t_4, __pyx_v_reserve_spec);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 434, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0435</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">setup_batch_manager</span><span class="p">(</span><span class="n">master_buffer</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_t_6 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;setup_batch_manager(__pyx_v_self, __pyx_v_master_buffer);<span class='error_goto'> if (unlikely(__pyx_t_6 == ((void *)NULL))) __PYX_ERR(1, 435, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">0436</span>: </pre>
<pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0437</span>:     <span class="k">def</span> <span class="nf">get_system_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre>
<pre class='cython code score-5 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_15get_system_size(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_14get_system_size[] = "Renderer.get_system_size(self)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_15get_system_size(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("get_system_size (wrapper)", 0);
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_14get_system_size(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_14get_system_size(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("get_system_size", 0);
  <span class='trace'>__Pyx_TraceCall</span>("get_system_size", __pyx_f[1], 437, 0, <span class='error_goto'>__PYX_ERR(1, 437, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.get_system_size", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0438</span>:         <span class="k">return</span> <span class="nb">super</span><span class="p">(</span></pre>
<pre class='cython code score-13 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
/*  */
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 438, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_self));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_self));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, ((PyObject *)__pyx_v_self));
/*  */
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_builtin_super, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 438, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-28" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0439</span>:             <span class="n">Renderer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_system_size</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span></pre>
<pre class='cython code score-28 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_get_system_size);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 439, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(1, 439, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_BatchManager *)__pyx_v_self-&gt;batch_manager-&gt;__pyx_vtab)-&gt;get_size(__pyx_v_self-&gt;batch_manager));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 439, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_1, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 439, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0440</span>: </pre>
<pre class="cython line score-9" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0441</span>:     <span class="k">def</span> <span class="nf">get_size_estimate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">dict</span> <span class="n">reserve_spec</span><span class="p">):</span></pre>
<pre class='cython code score-9 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_17get_size_estimate(PyObject *__pyx_v_self, PyObject *__pyx_v_reserve_spec); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_16get_size_estimate[] = "Renderer.get_size_estimate(self, dict reserve_spec)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_17get_size_estimate(PyObject *__pyx_v_self, PyObject *__pyx_v_reserve_spec) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("get_size_estimate (wrapper)", 0);
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_reserve_spec), (&amp;PyDict_Type), 1, "reserve_spec", 1))) <span class='error_goto'>__PYX_ERR(1, 441, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_16get_size_estimate(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), ((PyObject*)__pyx_v_reserve_spec));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_16get_size_estimate(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, PyObject *__pyx_v_reserve_spec) {
  unsigned int __pyx_v_total;
  unsigned int __pyx_v_count;
  unsigned int __pyx_v_vsize_in_bytes;
  unsigned int __pyx_v_vtype_size;
  unsigned int __pyx_v_vert_slots_per_block;
  unsigned int __pyx_v_ent_per_batch;
  unsigned int __pyx_v_size_per_ent;
  PyObject *__pyx_v_pointer_size_in_kb = NULL;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("get_size_estimate", 0);
  <span class='trace'>__Pyx_TraceCall</span>("get_size_estimate", __pyx_f[1], 441, 0, <span class='error_goto'>__PYX_ERR(1, 441, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.get_size_estimate", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_pointer_size_in_kb);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0442</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">total</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">Renderer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_size_estimate</span><span class="p">(</span></pre>
<pre class='cython code score-23 '>  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 442, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_self));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_self));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, ((PyObject *)__pyx_v_self));
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_builtin_super, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 442, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_get_size_estimate);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 442, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
/*  */
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_1); if (unlikely((__pyx_t_4 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 442, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_total = __pyx_t_4;
</pre><pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0443</span>:             <span class="n">reserve_spec</span><span class="p">)</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_2, __pyx_t_3, __pyx_v_reserve_spec) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_v_reserve_spec);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(1, 442, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0444</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">system_names</span><span class="p">)</span></pre>
<pre class='cython code score-8 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_names);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 444, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_5 = <span class='py_c_api'>PyObject_Length</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(__pyx_t_5 == ((Py_ssize_t)-1))) __PYX_ERR(1, 444, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_count = __pyx_t_5;
</pre><pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0445</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">vsize_in_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size_of_batches</span> <span class="o">*</span> <span class="mf">1024</span></pre>
<pre class='cython code score-16 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_size_of_batches);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 445, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyNumber_Multiply</span>(__pyx_t_1, __pyx_int_1024);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 445, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_2); if (unlikely((__pyx_t_4 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 445, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_vsize_in_bytes = __pyx_t_4;
</pre><pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0446</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">vtype_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex_format_size</span></pre>
<pre class='cython code score-10 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_vertex_format_size);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 446, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_2); if (unlikely((__pyx_t_4 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 446, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_vtype_size = __pyx_t_4;
</pre><pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0447</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">vert_slots_per_block</span> <span class="o">=</span> <span class="n">vsize_in_bytes</span> <span class="o">//</span> <span class="n">vtype_size</span></pre>
<pre class='cython code score-5 '>  if (unlikely(__pyx_v_vtype_size == 0)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
    <span class='error_goto'>__PYX_ERR(1, 447, __pyx_L1_error)</span>
  }
  __pyx_v_vert_slots_per_block = (__pyx_v_vsize_in_bytes / __pyx_v_vtype_size);
</pre><pre class="cython line score-0">&#xA0;<span class="">0448</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">ent_per_batch</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0449</span>:             <span class="n">vert_slots_per_block</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">smallest_vertex_count</span><span class="p">)</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_vert_slots_per_block);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 449, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_smallest_vertex_count);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 449, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyNumber_FloorDivide</span>(__pyx_t_2, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 449, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_3); if (unlikely((__pyx_t_4 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 449, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_ent_per_batch = __pyx_t_4;
</pre><pre class="cython line score-0">&#xA0;<span class="">0450</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0451</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">size_per_ent</span> <span class="o">=</span> <span class="n">sizeof</span><span class="p">(</span><span class="n">void</span><span class="o">*</span><span class="p">)</span> <span class="o">*</span> <span class="n">count</span></pre>
<pre class='cython code score-0 '>  __pyx_v_size_per_ent = ((sizeof(void *)) * __pyx_v_count);
</pre><pre class="cython line score-0">&#xA0;<span class="">0452</span>:         <span class="n">pointer_size_in_kb</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class="cython line score-26" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0453</span>:             <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_batches</span> <span class="o">*</span> <span class="n">ent_per_batch</span> <span class="o">*</span> <span class="n">size_per_ent</span><span class="p">)</span> <span class="o">//</span> <span class="mf">1024</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1</span></pre>
<pre class='cython code score-26 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_max_batches);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 453, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_ent_per_batch);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 453, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyNumber_Multiply</span>(__pyx_t_3, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 453, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_size_per_ent);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 453, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyNumber_Multiply</span>(__pyx_t_2, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 453, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FloorDivideObjC</span>(__pyx_t_3, __pyx_int_1024, 0x400, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 453, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_AddObjC</span>(__pyx_t_1, __pyx_int_1, 1, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 453, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_pointer_size_in_kb = __pyx_t_3;
  __pyx_t_3 = 0;
</pre><pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0454</span>:         <span class="k">return</span> <span class="n">total</span> <span class="o">+</span> <span class="n">pointer_size_in_kb</span> <span class="o">+</span> <span class="p">(</span></pre>
<pre class='cython code score-16 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_total);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 454, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_3, __pyx_v_pointer_size_in_kb);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 454, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
/*  */
  __pyx_t_3 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_1, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 454, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-26" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0455</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">max_batches</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">size_of_batches</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_count</span> <span class="o">*</span> <span class="mf">2</span><span class="p">)</span></pre>
<pre class='cython code score-26 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_max_batches);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 455, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_size_of_batches);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 455, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_6 = <span class='py_c_api'>PyNumber_Multiply</span>(__pyx_t_3, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 455, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_frame_count);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 455, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='py_c_api'>PyNumber_Multiply</span>(__pyx_t_6, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 455, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyNumber_Multiply</span>(__pyx_t_3, __pyx_int_2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 455, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0456</span>: </pre>
<pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0457</span>:     <span class="k">cdef</span> <span class="kt">void</span>* <span class="nf">_init_component</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">unsigned</span> <span class="nb">int</span> <span class="n">component_index</span><span class="p">,</span></pre>
<pre class='cython code score-4 '>static void *__pyx_f_11kivent_core_7systems_9renderers_8Renderer__init_component(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, unsigned int __pyx_v_component_index, unsigned int __pyx_v_entity_id, PyBoolObject *__pyx_v_render, struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model, unsigned int __pyx_v_texkey) {
  struct __pyx_obj_11kivent_core_15memory_handlers_4zone_MemoryZone *__pyx_v_memory_zone = 0;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_pointer;
  void *__pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_init_component", 0);
  <span class='trace'>__Pyx_TraceCall</span>("_init_component", __pyx_f[1], 457, 0, <span class='error_goto'>__PYX_ERR(1, 457, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer._init_component", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_memory_zone);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0458</span>:         <span class="nb">unsigned</span> <span class="nb">int</span> <span class="n">entity_id</span><span class="p">,</span> <span class="nb">bool</span> <span class="n">render</span><span class="p">,</span> <span class="n">VertexModel</span> <span class="n">model</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0459</span>:         <span class="nb">unsigned</span> <span class="nb">int</span> <span class="n">texkey</span><span class="p">)</span> <span class="k">except</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0460</span>:         <span class="k">cdef</span> <span class="kt">MemoryZone</span> <span class="nf">memory_zone</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">imz_components</span><span class="o">.</span><span class="n">memory_zone</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.imz_components-&gt;memory_zone);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_memory_zone = ((struct __pyx_obj_11kivent_core_15memory_handlers_4zone_MemoryZone *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0461</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">pointer</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">memory_zone</span><span class="o">.</span><span class="n">get_pointer</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_11kivent_core_15memory_handlers_4zone_MemoryZone *)__pyx_v_memory_zone-&gt;__pyx_vtab)-&gt;get_pointer(__pyx_v_memory_zone, __pyx_v_component_index);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((void *)NULL))) __PYX_ERR(1, 461, __pyx_L1_error)</span>
  __pyx_v_pointer = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_t_2);
</pre><pre class="cython line score-0">&#xA0;<span class="">0462</span>:             <span class="n">component_index</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0463</span>:         <span class="n">pointer</span><span class="o">.</span><span class="n">entity_id</span> <span class="o">=</span> <span class="n">entity_id</span></pre>
<pre class='cython code score-0 '>  __pyx_v_pointer-&gt;entity_id = __pyx_v_entity_id;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0464</span>:         <span class="n">pointer</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">*&gt;</span><span class="n">model</span></pre>
<pre class='cython code score-0 '>  __pyx_v_pointer-&gt;model = ((void *)__pyx_v_model);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0465</span>:         <span class="n">pointer</span><span class="o">.</span><span class="n">renderer</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">*&gt;</span><span class="bp">self</span></pre>
<pre class='cython code score-0 '>  __pyx_v_pointer-&gt;renderer = ((void *)__pyx_v_self);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0466</span>:         <span class="n">pointer</span><span class="o">.</span><span class="n">texkey</span> <span class="o">=</span> <span class="n">texkey</span></pre>
<pre class='cython code score-0 '>  __pyx_v_pointer-&gt;texkey = __pyx_v_texkey;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0467</span>:         <span class="k">if</span> <span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(((PyObject *)__pyx_v_render)); if (unlikely(__pyx_t_3 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 467, __pyx_L1_error)</span>
  if (__pyx_t_3) {
/*  */
    goto __pyx_L3;
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0468</span>:             <span class="n">pointer</span><span class="o">.</span><span class="n">render</span> <span class="o">=</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>    __pyx_v_pointer-&gt;render = 1;
</pre><pre class="cython line score-0">&#xA0;<span class="">0469</span>:         <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0470</span>:             <span class="n">pointer</span><span class="o">.</span><span class="n">render</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  /*else*/ {
    __pyx_v_pointer-&gt;render = 0;
  }
  __pyx_L3:;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0471</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">_batch_entity</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">pointer</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_batch_entity(__pyx_v_self, __pyx_v_entity_id, __pyx_v_pointer);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((void *)NULL))) __PYX_ERR(1, 471, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0472</span>:         <span class="k">return</span> <span class="n">pointer</span></pre>
<pre class='cython code score-0 '>  __pyx_r = __pyx_v_pointer;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0473</span>: </pre>
<pre class="cython line score-68" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0474</span>:     <span class="k">def</span> <span class="nf">init_component</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">unsigned</span> <span class="nb">int</span> <span class="n">component_index</span><span class="p">,</span></pre>
<pre class='cython code score-68 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_19init_component(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_18init_component[] = "Renderer.init_component(self, unsigned int component_index, unsigned int entity_id, str zone_name, args)\n\n        A RenderComponent is initialized with an args dict with many\n        optional values.\n\n        Optional Args:\n\n            texture (str): If 'texture' is in args, the appropriate texture\n            will be loaded from managers.resource_managers.texture_manager.\n            #change to model_key\n            vert_mesh_key (str): If 'vert_mesh_key' is in args, the associated\n            model from managers.resource_managers.model_manager will be loaded.\n            Otherwise, it will be assumed we are rendering a sprite and the\n            appropriate model for that sprite will either be generated or\n            loaded from the model_manager if it already exists. If this occurs\n            the models name will be str(**attribute_count**) + texture_key.\n\n            size (tuple): If size is provided and there is no 'vert_mesh_key'\n            and the sprite has not been loaded before the size of the newly\n            generated sprite VertMesh will be set to (width, height).\n\n            render (bool): If 'render' is in args, the components render\n            attribute will be set to the provided, otherwise it defaults to\n            True.\n\n        Keep in mind that all RenderComponent will share the same VertMesh if\n        they have the same vert_mesh_key or load the same sprite.\n        ";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_19init_component(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  unsigned int __pyx_v_component_index;
  unsigned int __pyx_v_entity_id;
  CYTHON_UNUSED PyObject *__pyx_v_zone_name = 0;
  PyObject *__pyx_v_args = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("init_component (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_component_index,&amp;__pyx_n_s_entity_id,&amp;__pyx_n_s_zone_name,&amp;__pyx_n_s_args,0};
    PyObject* values[4] = {0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_component_index)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_entity_id)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("init_component", 1, 4, 4, 1); <span class='error_goto'>__PYX_ERR(1, 474, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_zone_name)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("init_component", 1, 4, 4, 2); <span class='error_goto'>__PYX_ERR(1, 474, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (likely((values[3] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_args)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("init_component", 1, 4, 4, 3); <span class='error_goto'>__PYX_ERR(1, 474, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "init_component") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 474, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 4) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
      values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
    }
    __pyx_v_component_index = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(values[0]); if (unlikely((__pyx_v_component_index == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 474, __pyx_L3_error)</span>
    __pyx_v_entity_id = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(values[1]); if (unlikely((__pyx_v_entity_id == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 475, __pyx_L3_error)</span>
    __pyx_v_zone_name = ((PyObject*)values[2]);
    __pyx_v_args = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("init_component", 1, 4, 4, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 474, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.init_component", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_zone_name), (&amp;PyString_Type), 1, "zone_name", 1))) <span class='error_goto'>__PYX_ERR(1, 475, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_18init_component(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), __pyx_v_component_index, __pyx_v_entity_id, __pyx_v_zone_name, __pyx_v_args);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_18init_component(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, unsigned int __pyx_v_component_index, unsigned int __pyx_v_entity_id, CYTHON_UNUSED PyObject *__pyx_v_zone_name, PyObject *__pyx_v_args) {
  float __pyx_v_w;
  float __pyx_v_h;
  int __pyx_v_texkey;
  PyBoolObject *__pyx_v_copy = 0;
  PyBoolObject *__pyx_v_render = 0;
  PyObject *__pyx_v_texture_key = NULL;
  PyObject *__pyx_v_copy_name = NULL;
  PyObject *__pyx_v_model_key = NULL;
  struct __pyx_obj_11kivent_core_8managers_17resource_managers_ModelManager *__pyx_v_model_manager = 0;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("init_component", 0);
  <span class='trace'>__Pyx_TraceCall</span>("init_component", __pyx_f[1], 474, 0, <span class='error_goto'>__PYX_ERR(1, 474, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_11);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_13);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.init_component", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_copy);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_render);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_texture_key);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_copy_name);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_model_key);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0475</span>:         <span class="nb">unsigned</span> <span class="nb">int</span> <span class="n">entity_id</span><span class="p">,</span> <span class="nb">str</span> <span class="n">zone_name</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0476</span>:         <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0477</span>: <span class="sd">        A RenderComponent is initialized with an args dict with many</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0478</span>: <span class="sd">        optional values.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0479</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0480</span>: <span class="sd">        Optional Args:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0481</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0482</span>: <span class="sd">            texture (str): If &#39;texture&#39; is in args, the appropriate texture</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0483</span>: <span class="sd">            will be loaded from managers.resource_managers.texture_manager.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0484</span>: <span class="sd">            #change to model_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0485</span>: <span class="sd">            vert_mesh_key (str): If &#39;vert_mesh_key&#39; is in args, the associated</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0486</span>: <span class="sd">            model from managers.resource_managers.model_manager will be loaded.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0487</span>: <span class="sd">            Otherwise, it will be assumed we are rendering a sprite and the</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0488</span>: <span class="sd">            appropriate model for that sprite will either be generated or</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0489</span>: <span class="sd">            loaded from the model_manager if it already exists. If this occurs</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0490</span>: <span class="sd">            the models name will be str(**attribute_count**) + texture_key.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0491</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0492</span>: <span class="sd">            size (tuple): If size is provided and there is no &#39;vert_mesh_key&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0493</span>: <span class="sd">            and the sprite has not been loaded before the size of the newly</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0494</span>: <span class="sd">            generated sprite VertMesh will be set to (width, height).</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0495</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0496</span>: <span class="sd">            render (bool): If &#39;render&#39; is in args, the components render</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0497</span>: <span class="sd">            attribute will be set to the provided, otherwise it defaults to</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0498</span>: <span class="sd">            True.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0499</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0500</span>: <span class="sd">        Keep in mind that all RenderComponent will share the same VertMesh if</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0501</span>: <span class="sd">        they have the same vert_mesh_key or load the same sprite.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0502</span>: <span class="sd">        &#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0503</span>:         <span class="k">cdef</span> <span class="kt">float</span> <span class="nf">w</span><span class="p">,</span> <span class="nf">h</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0504</span>:         <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">vert_index_key</span><span class="p">,</span> <span class="nf">texkey</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0505</span>:         <span class="k">cdef</span> <span class="kt">bool</span> <span class="nf">copy</span><span class="p">,</span> <span class="nf">render</span></pre>
<pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0506</span>:         <span class="k">if</span> <span class="s">&#39;texture&#39;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>  __pyx_t_1 = (<span class='pyx_c_api'>__Pyx_PySequence_ContainsTF</span>(__pyx_n_s_texture, __pyx_v_args, Py_EQ)); if (unlikely(__pyx_t_1 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 506, __pyx_L1_error)</span>
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {
/*  */
    goto __pyx_L3;
  }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0507</span>:             <span class="n">texture_key</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="s">&#39;texture&#39;</span><span class="p">]</span></pre>
<pre class='cython code score-2 '>    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Dict_GetItem</span>(__pyx_v_args, __pyx_n_s_texture);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 507, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_v_texture_key = __pyx_t_3;
    __pyx_t_3 = 0;
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0508</span>:             <span class="n">texkey</span> <span class="o">=</span> <span class="n">texture_manager</span><span class="o">.</span><span class="n">get_texkey_from_name</span><span class="p">(</span><span class="n">texture_key</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>    <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_4, __pyx_n_s_texture_manager);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 508, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_get_texkey_from_name);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 508, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_5))) {
      __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_5);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_5, function);
      }
    }
    __pyx_t_3 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_5, __pyx_t_4, __pyx_v_texture_key) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_5, __pyx_v_texture_key);
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_3)) <span class='error_goto'>__PYX_ERR(1, 508, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_3); if (unlikely((__pyx_t_6 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 508, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_v_texkey = __pyx_t_6;
</pre><pre class="cython line score-88" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0509</span>:             <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">texture_manager</span><span class="o">.</span><span class="n">get_size</span><span class="p">(</span><span class="n">texkey</span><span class="p">)</span></pre>
<pre class='cython code score-88 '>    <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_5, __pyx_n_s_texture_manager);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 509, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_5, __pyx_n_s_get_size);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 509, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_texkey);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 509, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
      __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
      if (likely(__pyx_t_7)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
      }
    }
    __pyx_t_3 = (__pyx_t_7) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_7, __pyx_t_5) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(!__pyx_t_3)) <span class='error_goto'>__PYX_ERR(1, 509, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_3))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_3))) {
      PyObject* sequence = __pyx_t_3;
      Py_ssize_t size = <span class='pyx_c_api'>__Pyx_PySequence_SIZE</span>(sequence);
      if (unlikely(size != 2)) {
        if (size &gt; 2) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(2);
        else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
        <span class='error_goto'>__PYX_ERR(1, 509, __pyx_L1_error)</span>
      }
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
        __pyx_t_4 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
        __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
      } else {
        __pyx_t_4 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
        __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
      }
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      #else
      __pyx_t_4 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 509, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 509, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      #endif
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    } else {
      Py_ssize_t index = -1;
      __pyx_t_7 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 509, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_8 = Py_TYPE(__pyx_t_7)-&gt;tp_iternext;
      index = 0; __pyx_t_4 = __pyx_t_8(__pyx_t_7); if (unlikely(!__pyx_t_4)) goto __pyx_L4_unpacking_failed;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      index = 1; __pyx_t_5 = __pyx_t_8(__pyx_t_7); if (unlikely(!__pyx_t_5)) goto __pyx_L4_unpacking_failed;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_8(__pyx_t_7), 2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 509, __pyx_L1_error)</span>
      __pyx_t_8 = NULL;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      goto __pyx_L5_unpacking_done;
      __pyx_L4_unpacking_failed:;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_8 = NULL;
      if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
      <span class='error_goto'>__PYX_ERR(1, 509, __pyx_L1_error)</span>
      __pyx_L5_unpacking_done:;
    }
    __pyx_t_9 = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_t_4); if (unlikely((__pyx_t_9 == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 509, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_10 = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_t_5); if (unlikely((__pyx_t_10 == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 509, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_v_w = __pyx_t_9;
    __pyx_v_h = __pyx_t_10;
</pre><pre class="cython line score-0">&#xA0;<span class="">0510</span>:         <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-7" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0511</span>:             <span class="n">texture_key</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span></pre>
<pre class='cython code score-7 '>  /*else*/ {
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)(&amp;PyString_Type)), __pyx_tuple__4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 511, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_v_texture_key = __pyx_t_3;
    __pyx_t_3 = 0;
/*  */
  __pyx_tuple__4 = <span class='py_c_api'>PyTuple_Pack</span>(1, Py_None);<span class='error_goto'> if (unlikely(!__pyx_tuple__4)) __PYX_ERR(1, 511, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__4);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0512</span>:             <span class="n">texkey</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>    __pyx_v_texkey = -1;
  }
  __pyx_L3:;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0513</span>:         <span class="k">if</span> <span class="s">&#39;size&#39;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>  __pyx_t_2 = (<span class='pyx_c_api'>__Pyx_PySequence_ContainsTF</span>(__pyx_n_s_size, __pyx_v_args, Py_EQ)); if (unlikely(__pyx_t_2 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 513, __pyx_L1_error)</span>
  __pyx_t_1 = (__pyx_t_2 != 0);
  if (__pyx_t_1) {
/*  */
  }
</pre><pre class="cython line score-68" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0514</span>:             <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="s">&#39;size&#39;</span><span class="p">]</span></pre>
<pre class='cython code score-68 '>    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Dict_GetItem</span>(__pyx_v_args, __pyx_n_s_size);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 514, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_3))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_3))) {
      PyObject* sequence = __pyx_t_3;
      Py_ssize_t size = <span class='pyx_c_api'>__Pyx_PySequence_SIZE</span>(sequence);
      if (unlikely(size != 2)) {
        if (size &gt; 2) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(2);
        else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
        <span class='error_goto'>__PYX_ERR(1, 514, __pyx_L1_error)</span>
      }
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
        __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
        __pyx_t_4 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
      } else {
        __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
        __pyx_t_4 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
      }
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      #else
      __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 0);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 514, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      __pyx_t_4 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 514, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      #endif
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    } else {
      Py_ssize_t index = -1;
      __pyx_t_7 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 514, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_8 = Py_TYPE(__pyx_t_7)-&gt;tp_iternext;
      index = 0; __pyx_t_5 = __pyx_t_8(__pyx_t_7); if (unlikely(!__pyx_t_5)) goto __pyx_L7_unpacking_failed;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      index = 1; __pyx_t_4 = __pyx_t_8(__pyx_t_7); if (unlikely(!__pyx_t_4)) goto __pyx_L7_unpacking_failed;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_8(__pyx_t_7), 2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 514, __pyx_L1_error)</span>
      __pyx_t_8 = NULL;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      goto __pyx_L8_unpacking_done;
      __pyx_L7_unpacking_failed:;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_8 = NULL;
      if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
      <span class='error_goto'>__PYX_ERR(1, 514, __pyx_L1_error)</span>
      __pyx_L8_unpacking_done:;
    }
    __pyx_t_10 = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_t_5); if (unlikely((__pyx_t_10 == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 514, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_9 = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_t_4); if (unlikely((__pyx_t_9 == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 514, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_w = __pyx_t_10;
    __pyx_v_h = __pyx_t_9;
</pre><pre class="cython line score-12" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0515</span>:         <span class="n">copy</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;copy&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span></pre>
<pre class='cython code score-12 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_args, __pyx_n_s_get);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 515, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_tuple__5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 515, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_4) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_4, __pyx_ptype_7cpython_4bool_bool))))) <span class='error_goto'>__PYX_ERR(1, 515, __pyx_L1_error)</span>
  __pyx_v_copy = ((PyBoolObject *)__pyx_t_4);
  __pyx_t_4 = 0;
/*  */
  __pyx_tuple__5 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_n_s_copy, Py_False);<span class='error_goto'> if (unlikely(!__pyx_tuple__5)) __PYX_ERR(1, 515, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__5);
</pre><pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0516</span>:         <span class="n">copy_name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;copy_name&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span></pre>
<pre class='cython code score-10 '>  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_args, __pyx_n_s_get);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 516, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_tuple__6, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 516, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_copy_name = __pyx_t_3;
  __pyx_t_3 = 0;
/*  */
  __pyx_tuple__6 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_n_s_copy_name, Py_None);<span class='error_goto'> if (unlikely(!__pyx_tuple__6)) __PYX_ERR(1, 516, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__6);
</pre><pre class="cython line score-12" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0517</span>:         <span class="n">render</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;render&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span></pre>
<pre class='cython code score-12 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_args, __pyx_n_s_get);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 517, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_tuple__7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 517, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_4) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_4, __pyx_ptype_7cpython_4bool_bool))))) <span class='error_goto'>__PYX_ERR(1, 517, __pyx_L1_error)</span>
  __pyx_v_render = ((PyBoolObject *)__pyx_t_4);
  __pyx_t_4 = 0;
/*  */
  __pyx_tuple__7 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_n_s_render, Py_True);<span class='error_goto'> if (unlikely(!__pyx_tuple__7)) __PYX_ERR(1, 517, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__7);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__7);
</pre><pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0518</span>:         <span class="n">model_key</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;model_key&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span></pre>
<pre class='cython code score-10 '>  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_args, __pyx_n_s_get);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 518, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_tuple__8, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 518, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_model_key = __pyx_t_3;
  __pyx_t_3 = 0;
/*  */
  __pyx_tuple__8 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_n_s_model_key, Py_None);<span class='error_goto'> if (unlikely(!__pyx_tuple__8)) __PYX_ERR(1, 518, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__8);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__8);
</pre><pre class="cython line score-7" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0519</span>:         <span class="k">cdef</span> <span class="kt">ModelManager</span> <span class="nf">model_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="o">.</span><span class="n">model_manager</span></pre>
<pre class='cython code score-7 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 519, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_model_manager);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 519, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_4) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_4, __pyx_ptype_11kivent_core_8managers_17resource_managers_ModelManager))))) <span class='error_goto'>__PYX_ERR(1, 519, __pyx_L1_error)</span>
  __pyx_v_model_manager = ((struct __pyx_obj_11kivent_core_8managers_17resource_managers_ModelManager *)__pyx_t_4);
  __pyx_t_4 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0520</span>:         <span class="k">if</span> <span class="n">model_key</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = (__pyx_v_model_key == Py_None);
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {
/*  */
    goto __pyx_L9;
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0521</span>:             <span class="k">if</span> <span class="n">copy_name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    __pyx_t_2 = (__pyx_v_copy_name == Py_None);
    __pyx_t_1 = (__pyx_t_2 != 0);
    if (__pyx_t_1) {
/*  */
    }
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0522</span>:                 <span class="n">copy_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_format</span> <span class="o">+</span> <span class="s">&#39;_&#39;</span> <span class="o">+</span> <span class="n">texture_key</span></pre>
<pre class='cython code score-15 '>      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_model_format);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 522, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_3 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_4, __pyx_n_s__9);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 522, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_3, __pyx_v_texture_key);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 522, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_copy_name, __pyx_t_4);
      __pyx_t_4 = 0;
</pre><pre class="cython line score-20" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0523</span>:             <span class="n">model_key</span> <span class="o">=</span> <span class="n">model_manager</span><span class="o">.</span><span class="n">load_textured_rectangle</span><span class="p">(</span></pre>
<pre class='cython code score-20 '>    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_model_manager), __pyx_n_s_load_textured_rectangle);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 523, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
/*  */
    __pyx_t_11 = <span class='py_c_api'>PyTuple_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_11)) __PYX_ERR(1, 523, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_11);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_11, 0, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_11, 1, __pyx_t_5);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_11, 2, __pyx_t_7);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_texture_key);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_texture_key);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_11, 3, __pyx_v_texture_key);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_copy_name);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_copy_name);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_11, 4, __pyx_v_copy_name);
    __pyx_t_3 = 0;
    __pyx_t_5 = 0;
    __pyx_t_7 = 0;
/*  */
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_11, __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 523, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_11); __pyx_t_11 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_model_key, __pyx_t_5);
    __pyx_t_5 = 0;
</pre><pre class="cython line score-12" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0524</span>:                 <span class="bp">self</span><span class="o">.</span><span class="n">model_format</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">texture_key</span><span class="p">,</span> <span class="n">copy_name</span><span class="p">,</span></pre>
<pre class='cython code score-12 '>    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_model_format);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 524, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_5 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_w);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 524, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_7 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_h);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 524, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
</pre><pre class="cython line score-7" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0525</span>:                 <span class="n">do_copy</span><span class="o">=</span><span class="n">copy</span><span class="p">)</span></pre>
<pre class='cython code score-7 '>    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 525, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_7, __pyx_n_s_do_copy, ((PyObject *)__pyx_v_copy)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 525, __pyx_L1_error)</span>
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0526</span>:         <span class="k">elif</span> <span class="n">model_key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">copy</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>  __pyx_t_2 = (__pyx_v_model_key != Py_None);
  __pyx_t_12 = (__pyx_t_2 != 0);
  if (__pyx_t_12) {
  } else {
    __pyx_t_1 = __pyx_t_12;
    goto __pyx_L11_bool_binop_done;
  }
  __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(((PyObject *)__pyx_v_copy)); if (unlikely(__pyx_t_12 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 526, __pyx_L1_error)</span>
  __pyx_t_1 = __pyx_t_12;
  __pyx_L11_bool_binop_done:;
  if (__pyx_t_1) {
/*  */
  }
  __pyx_L9:;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0527</span>:             <span class="n">model_key</span> <span class="o">=</span> <span class="n">model_manager</span><span class="o">.</span><span class="n">copy_model</span><span class="p">(</span><span class="n">model_key</span><span class="p">,</span></pre>
<pre class='cython code score-15 '>    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_model_manager), __pyx_n_s_copy_model);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 527, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 527, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_model_key);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_model_key);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_v_model_key);
/*  */
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_t_7, __pyx_t_11);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 527, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_11); __pyx_t_11 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_model_key, __pyx_t_4);
    __pyx_t_4 = 0;
</pre><pre class="cython line score-7" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0528</span>:                 <span class="n">model_name</span><span class="o">=</span><span class="n">copy_name</span><span class="p">)</span></pre>
<pre class='cython code score-7 '>    __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_11)) __PYX_ERR(1, 528, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_11);
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_11, __pyx_n_s_model_name, __pyx_v_copy_name) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 528, __pyx_L1_error)</span>
</pre><pre class="cython line score-9" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0529</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="n">model_manager</span><span class="o">.</span><span class="n">_models</span><span class="p">[</span><span class="n">model_key</span><span class="p">]</span></pre>
<pre class='cython code score-9 '>  if (unlikely(__pyx_v_model_manager-&gt;_models == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
    <span class='error_goto'>__PYX_ERR(1, 529, __pyx_L1_error)</span>
  }
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_model_manager-&gt;_models, __pyx_v_model_key);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 529, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  if (!(likely(((__pyx_t_4) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_4, __pyx_ptype_11kivent_core_9rendering_5model_VertexModel))))) <span class='error_goto'>__PYX_ERR(1, 529, __pyx_L1_error)</span>
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_4);
  __pyx_t_4 = 0;
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0530</span>:         <span class="n">model_manager</span><span class="o">.</span><span class="n">register_entity_with_model</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_id</span><span class="p">,</span></pre>
<pre class='cython code score-6 '>  __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_model_manager), __pyx_n_s_register_entity_with_model);<span class='error_goto'> if (unlikely(!__pyx_t_11)) __PYX_ERR(1, 530, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_11);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_entity_id);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 530, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_id);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 530, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
</pre><pre class="cython line score-42" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0531</span>:             <span class="n">model_key</span><span class="p">)</span></pre>
<pre class='cython code score-42 '>  __pyx_t_3 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_11))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_11);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_11);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_11, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_11)) {
    PyObject *__pyx_temp[4] = {__pyx_t_3, __pyx_t_7, __pyx_t_5, __pyx_v_model_key};
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_11, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 530, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_11)) {
    PyObject *__pyx_temp[4] = {__pyx_t_3, __pyx_t_7, __pyx_t_5, __pyx_v_model_key};
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_11, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 530, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_13 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_13)) __PYX_ERR(1, 530, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_13);
    if (__pyx_t_3) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_13, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_13, 0+__pyx_t_6, __pyx_t_7);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_13, 1+__pyx_t_6, __pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_model_key);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_model_key);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_13, 2+__pyx_t_6, __pyx_v_model_key);
    __pyx_t_7 = 0;
    __pyx_t_5 = 0;
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_11, __pyx_t_13, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 530, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_13); __pyx_t_13 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_11); __pyx_t_11 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0532</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">_init_component</span><span class="p">(</span><span class="n">component_index</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">render</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">texkey</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_t_14 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_init_component(__pyx_v_self, __pyx_v_component_index, __pyx_v_entity_id, __pyx_v_render, __pyx_v_model, __pyx_v_texkey);<span class='error_goto'> if (unlikely(__pyx_t_14 == ((void *)NULL))) __PYX_ERR(1, 532, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">0533</span>: </pre>
<pre class="cython line score-38" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0534</span>:     <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-38 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_21update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_20update[] = "Renderer.update(self, force_update, dt)\n\n        Update function where all drawing of entities is performed.\n        Override this method if you would like to create a renderer with\n        customized behavior. The basic logic is that we iterate through\n        each batch getting the entities in that batch, then iterate through\n        the vertices in the RenderComponent.vert_mesh, copying every\n        vertex into the batches data and combining it with data from other\n        components.\n\n        Args:\n            dt (float): The time elapsed since last update, not usually\n            used in rendering but passed in to maintain a consistent API.\n        ";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_21update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_force_update = 0;
  CYTHON_UNUSED PyObject *__pyx_v_dt = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_force_update,&amp;__pyx_n_s_dt,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_force_update)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 534, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "update") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 534, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_force_update = values[0];
    __pyx_v_dt = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 534, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_20update(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), __pyx_v_force_update, __pyx_v_dt);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_20update(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, PyObject *__pyx_v_force_update, CYTHON_UNUSED PyObject *__pyx_v_dt) {
  struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *__pyx_v_batch = 0;
  PyObject *__pyx_v_batches = 0;
  unsigned int __pyx_v_batch_key;
  unsigned int __pyx_v_index_offset;
  unsigned int __pyx_v_vert_offset;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_render_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_pos_comp;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *__pyx_v_frame_data;
  GLushort *__pyx_v_frame_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *__pyx_v_vertex;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  GLushort *__pyx_v_model_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *__pyx_v_model_vertices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F __pyx_v_model_vertex;
  unsigned int __pyx_v_used;
  unsigned int __pyx_v_i;
  unsigned int __pyx_v_ri;
  unsigned int __pyx_v_component_count;
  unsigned int __pyx_v_n;
  unsigned int __pyx_v_t;
  struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *__pyx_v_entity_components = 0;
  struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *__pyx_v_batch_manager = 0;
  PyObject *__pyx_v_batch_groups = 0;
  struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *__pyx_v_mesh_instruction = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *__pyx_v_components_block = 0;
  void **__pyx_v_component_data;
  int __pyx_v_static_rendering;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("update", __pyx_f[1], 534, 0, <span class='error_goto'>__PYX_ERR(1, 534, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batches);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_groups);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_mesh_instruction);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components_block);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0535</span>:         <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0536</span>: <span class="sd">        Update function where all drawing of entities is performed.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0537</span>: <span class="sd">        Override this method if you would like to create a renderer with</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0538</span>: <span class="sd">        customized behavior. The basic logic is that we iterate through</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0539</span>: <span class="sd">        each batch getting the entities in that batch, then iterate through</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0540</span>: <span class="sd">        the vertices in the RenderComponent.vert_mesh, copying every</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0541</span>: <span class="sd">        vertex into the batches data and combining it with data from other</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0542</span>: <span class="sd">        components.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0543</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0544</span>: <span class="sd">        Args:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0545</span>: <span class="sd">            dt (float): The time elapsed since last update, not usually</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0546</span>: <span class="sd">            used in rendering but passed in to maintain a consistent API.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0547</span>: <span class="sd">        &#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0548</span>:         <span class="k">cdef</span> <span class="kt">IndexedBatch</span> <span class="nf">batch</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0549</span>:         <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">batches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0550</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">batch_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0551</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">index_offset</span><span class="p">,</span> <span class="nf">vert_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0552</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">render_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0553</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0554</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span>* <span class="nf">frame_data</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0555</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">frame_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0556</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span>* <span class="nf">vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0557</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0558</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">model_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0559</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span>* <span class="nf">model_vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0560</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span> <span class="nf">model_vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0561</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">used</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">ri</span><span class="p">,</span> <span class="nf">component_count</span><span class="p">,</span> <span class="nf">n</span><span class="p">,</span> <span class="nf">t</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0562</span>:         <span class="k">cdef</span> <span class="kt">ComponentPointerAggregator</span> <span class="nf">entity_components</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0563</span>:         <span class="k">cdef</span> <span class="kt">BatchManager</span> <span class="nf">batch_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;batch_manager);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0564</span>:         <span class="k">cdef</span> <span class="kt">dict</span> <span class="nf">batch_groups</span> <span class="o">=</span> <span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_groups</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_v_batch_manager-&gt;batch_groups;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_groups = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0565</span>:         <span class="k">cdef</span> <span class="kt">CMesh</span> <span class="nf">mesh_instruction</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0566</span>:         <span class="k">cdef</span> <span class="kt">MemoryBlock</span> <span class="nf">components_block</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0567</span>:         <span class="k">cdef</span> <span class="kt">void</span>** <span class="nf">component_data</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0568</span>:         <span class="k">cdef</span> <span class="kt">bint</span> <span class="nf">static_rendering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_rendering</span></pre>
<pre class='cython code score-10 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_static_rendering);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 568, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 568, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_static_rendering = __pyx_t_2;
</pre><pre class="cython line score-0">&#xA0;<span class="">0569</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0570</span>:         <span class="k">for</span> <span class="n">batch_key</span> <span class="ow">in</span> <span class="n">batch_groups</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = 0;
  if (unlikely(__pyx_v_batch_groups == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
    <span class='error_goto'>__PYX_ERR(1, 570, __pyx_L1_error)</span>
  }
  __pyx_t_6 = __Pyx_dict_iterator(__pyx_v_batch_groups, 1, ((PyObject *)NULL), (&amp;__pyx_t_4), (&amp;__pyx_t_5));<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 570, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  __pyx_t_1 = __pyx_t_6;
  __pyx_t_6 = 0;
  while (1) {
    __pyx_t_7 = __Pyx_dict_iter_next(__pyx_t_1, __pyx_t_4, &amp;__pyx_t_3, &amp;__pyx_t_6, NULL, NULL, __pyx_t_5);
    if (unlikely(__pyx_t_7 == 0)) break;
    if (unlikely(__pyx_t_7 == -1)) <span class='error_goto'>__PYX_ERR(1, 570, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_6); if (unlikely((__pyx_t_8 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 570, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_batch_key = __pyx_t_8;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0571</span>:             <span class="n">batches</span> <span class="o">=</span> <span class="n">batch_groups</span><span class="p">[</span><span class="n">batch_key</span><span class="p">]</span></pre>
<pre class='cython code score-21 '>    if (unlikely(__pyx_v_batch_groups == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
      <span class='error_goto'>__PYX_ERR(1, 571, __pyx_L1_error)</span>
    }
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_batch_key);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 571, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_batch_groups, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 571, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))||((__pyx_t_9) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_9)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 571, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batches, ((PyObject*)__pyx_t_9));
    __pyx_t_9 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0572</span>:             <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span></pre>
<pre class='cython code score-15 '>    if (unlikely(__pyx_v_batches == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
      <span class='error_goto'>__PYX_ERR(1, 572, __pyx_L1_error)</span>
    }
    __pyx_t_9 = __pyx_v_batches; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_9); __pyx_t_10 = 0;
    for (;;) {
      if (__pyx_t_10 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_9)) break;
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_6 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_9, __pyx_t_10); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_10++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 572, __pyx_L1_error)</span>
      #else
      __pyx_t_6 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_9, __pyx_t_10); __pyx_t_10++;<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 572, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      #endif
      if (!(likely(((__pyx_t_6) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_6, __pyx_ptype_11kivent_core_9rendering_8batching_IndexedBatch))))) <span class='error_goto'>__PYX_ERR(1, 572, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batch, ((struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_t_6));
      __pyx_t_6 = 0;
/*  */
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0573</span>:                 <span class="k">if</span> <span class="ow">not</span> <span class="n">static_rendering</span> <span class="ow">or</span> <span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>      __pyx_t_11 = ((!(__pyx_v_static_rendering != 0)) != 0);
      if (!__pyx_t_11) {
      } else {
        __pyx_t_2 = __pyx_t_11;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_force_update); if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 573, __pyx_L1_error)</span>
      __pyx_t_2 = __pyx_t_11;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_2) {
/*  */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0574</span>:                     <span class="n">entity_components</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">entity_components</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_batch-&gt;entity_components);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_entity_components, ((struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0575</span>:                     <span class="n">components_block</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">memory_block</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_entity_components-&gt;memory_block);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_components_block, ((struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0576</span>:                     <span class="n">used</span> <span class="o">=</span> <span class="n">components_block</span><span class="o">.</span><span class="n">used_count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_components_block-&gt;__pyx_base.used_count;
        __pyx_v_used = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0577</span>:                     <span class="n">component_count</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_entity_components-&gt;count;
        __pyx_v_component_count = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0578</span>:                     <span class="n">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">**&gt;</span><span class="n">components_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>        __pyx_v_component_data = ((void **)__pyx_v_components_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0579</span>:                     <span class="n">frame_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat4F</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_vbo_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_data = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_vbo_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0580</span>:                     <span class="n">frame_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_indices_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_indices = ((GLushort *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_indices_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0581</span>:                     <span class="n">index_offset</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_v_index_offset = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0582</span>:                     <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">used</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_used;
        __pyx_t_12 = __pyx_t_8;
        for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_12; __pyx_t_13+=1) {
          __pyx_v_t = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0583</span>:                         <span class="n">ri</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">component_count</span></pre>
<pre class='cython code score-0 '>          __pyx_v_ri = (__pyx_v_t * __pyx_v_component_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0584</span>:                         <span class="k">if</span> <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="p">]</span> <span class="o">==</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (((__pyx_v_component_data[__pyx_v_ri]) == NULL) != 0);
          if (__pyx_t_2) {
/*  */
          }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0585</span>:                             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>            goto __pyx_L10_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0586</span>:                         <span class="n">render_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>          __pyx_v_render_comp = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)(__pyx_v_component_data[(__pyx_v_ri + 0)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0587</span>:                         <span class="n">vert_offset</span> <span class="o">=</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">vert_index</span></pre>
<pre class='cython code score-0 '>          __pyx_t_7 = __pyx_v_render_comp-&gt;vert_index;
          __pyx_v_vert_offset = __pyx_t_7;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0588</span>:                         <span class="n">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">render_comp</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-2 '>          __pyx_t_6 = ((PyObject *)__pyx_v_render_comp-&gt;model);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_model, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_6));
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0589</span>:                         <span class="k">if</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (__pyx_v_render_comp-&gt;render != 0);
          if (__pyx_t_2) {
/*  */
          }
          __pyx_L10_continue:;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0590</span>:                             <span class="n">pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 1)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0591</span>:                             <span class="n">model_vertices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat4F</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_vertices = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *)__pyx_v_model-&gt;vertices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0">&#xA0;<span class="">0592</span>:                                 <span class="n">model</span><span class="o">.</span><span class="n">vertices_block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0593</span>:                             <span class="n">model_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">model</span><span class="o">.</span><span class="n">indices_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_indices = ((GLushort *)__pyx_v_model-&gt;indices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0594</span>:                             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_index_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0595</span>:                                 <span class="n">frame_indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_frame_indices[(__pyx_v_i + __pyx_v_index_offset)]) = ((__pyx_v_model_indices[__pyx_v_i]) + __pyx_v_vert_offset);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">0596</span>:                                     <span class="n">model_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0597</span>:                             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_vertex_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_n = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0598</span>:                                 <span class="n">vertex</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">frame_data</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_vertex = (&amp;(__pyx_v_frame_data[(__pyx_v_n + __pyx_v_vert_offset)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0599</span>:                                 <span class="n">model_vertex</span> <span class="o">=</span> <span class="n">model_vertices</span><span class="p">[</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_model_vertex = (__pyx_v_model_vertices[__pyx_v_n]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0600</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[0]) = (__pyx_v_pos_comp-&gt;x + (__pyx_v_model_vertex.pos[0]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0601</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[1]) = (__pyx_v_pos_comp-&gt;y + (__pyx_v_model_vertex.pos[1]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0602</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;uvs[0]) = (__pyx_v_model_vertex.uvs[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0603</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;uvs[1]) = (__pyx_v_model_vertex.uvs[1]);
            }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0604</span>:                             <span class="n">index_offset</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-0 '>            __pyx_v_index_offset = (__pyx_v_index_offset + __pyx_v_model-&gt;_index_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0605</span>:                     <span class="n">batch</span><span class="o">.</span><span class="n">set_index_count_for_frame</span><span class="p">(</span><span class="n">index_offset</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>        ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;set_index_count_for_frame(__pyx_v_batch, __pyx_v_index_offset);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0606</span>:                 <span class="n">mesh_instruction</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">mesh_instruction</span></pre>
<pre class='cython code score-4 '>      if (!(likely(((__pyx_v_batch-&gt;mesh_instruction) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_batch-&gt;mesh_instruction, __pyx_ptype_11kivent_core_9rendering_5cmesh_CMesh))))) <span class='error_goto'>__PYX_ERR(1, 606, __pyx_L1_error)</span>
      __pyx_t_6 = __pyx_v_batch-&gt;mesh_instruction;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_mesh_instruction, ((struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_t_6));
      __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0607</span>:                 <span class="n">mesh_instruction</span><span class="o">.</span><span class="n">flag_update</span><span class="p">()</span></pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_v_mesh_instruction-&gt;__pyx_base.__pyx_base.__pyx_vtab)-&gt;__pyx_base.__pyx_base.flag_update(((struct __pyx_obj_4kivy_8graphics_12instructions_Instruction *)__pyx_v_mesh_instruction), 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 607, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0608</span>: </pre>
<pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0609</span>:     <span class="k">def</span> <span class="nf">remove_component</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">unsigned</span> <span class="nb">int</span> <span class="n">component_index</span><span class="p">):</span></pre>
<pre class='cython code score-18 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_23remove_component(PyObject *__pyx_v_self, PyObject *__pyx_arg_component_index); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_22remove_component[] = "Renderer.remove_component(self, unsigned int component_index)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_23remove_component(PyObject *__pyx_v_self, PyObject *__pyx_arg_component_index) {
  unsigned int __pyx_v_component_index;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("remove_component (wrapper)", 0);
  assert(__pyx_arg_component_index); {
    __pyx_v_component_index = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_arg_component_index); if (unlikely((__pyx_v_component_index == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 609, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.remove_component", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_22remove_component(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), ((unsigned int)__pyx_v_component_index));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_22remove_component(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, unsigned int __pyx_v_component_index) {
  struct __pyx_obj_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *__pyx_v_components = 0;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_pointer;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("remove_component", 0);
  <span class='trace'>__Pyx_TraceCall</span>("remove_component", __pyx_f[1], 609, 0, <span class='error_goto'>__PYX_ERR(1, 609, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.remove_component", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0610</span>:         <span class="k">cdef</span> <span class="kt">IndexedMemoryZone</span> <span class="nf">components</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">imz_components</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.imz_components);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_components = ((struct __pyx_obj_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0611</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">pointer</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">components</span><span class="o">.</span><span class="n">get_pointer</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *)__pyx_v_components-&gt;__pyx_vtab)-&gt;get_pointer(__pyx_v_components, __pyx_v_component_index);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((void *)NULL))) __PYX_ERR(1, 611, __pyx_L1_error)</span>
  __pyx_v_pointer = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_t_2);
</pre><pre class="cython line score-0">&#xA0;<span class="">0612</span>:             <span class="n">component_index</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0613</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">_unbatch_entity</span><span class="p">(</span><span class="n">pointer</span><span class="o">.</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">pointer</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_unbatch_entity(__pyx_v_self, __pyx_v_pointer-&gt;entity_id, __pyx_v_pointer);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((void *)NULL))) __PYX_ERR(1, 613, __pyx_L1_error)</span>
</pre><pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0614</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="o">.</span><span class="n">model_manager</span><span class="o">.</span><span class="n">unregister_entity_with_model</span><span class="p">(</span></pre>
<pre class='cython code score-8 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 614, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_model_manager);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 614, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_unregister_entity_with_model);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 614, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
</pre><pre class="cython line score-41" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0615</span>:             <span class="n">pointer</span><span class="o">.</span><span class="n">entity_id</span><span class="p">,</span> <span class="p">(&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">pointer</span><span class="o">.</span><span class="n">model</span><span class="p">)</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span></pre>
<pre class='cython code score-41 '>  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_pointer-&gt;entity_id);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 615, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_4, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_v_pointer-&gt;model)-&gt;_name};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 614, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_4, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_v_pointer-&gt;model)-&gt;_name};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 614, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 614, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_5) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_v_pointer-&gt;model)-&gt;_name);
    <span class='refnanny'>__Pyx_GIVEREF</span>(((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_v_pointer-&gt;model)-&gt;_name);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_v_pointer-&gt;model)-&gt;_name);
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 614, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-33" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0616</span>:         <span class="nb">super</span><span class="p">(</span><span class="n">Renderer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">remove_component</span><span class="p">(</span><span class="n">component_index</span><span class="p">)</span></pre>
<pre class='cython code score-33 '>  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 616, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_self));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_self));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, ((PyObject *)__pyx_v_self));
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_builtin_super, __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 616, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s_remove_component);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 616, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_component_index);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(1, 616, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
    }
  }
  __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_4, __pyx_t_7) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(1, 616, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0617</span>: </pre>
<pre class="cython line score-17" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0618</span>:     <span class="k">def</span> <span class="nf">unbatch_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">unsigned</span> <span class="nb">int</span> <span class="n">entity_id</span><span class="p">):</span></pre>
<pre class='cython code score-17 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_25unbatch_entity(PyObject *__pyx_v_self, PyObject *__pyx_arg_entity_id); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_24unbatch_entity[] = "Renderer.unbatch_entity(self, unsigned int entity_id)\n\n        Python accessible function for unbatching the entity, the real work\n        is done in the cdefed _unbatch_entity.\n\n        Args:\n            entity_id (unsigned int): The id of the entity to unbatch.\n        ";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_25unbatch_entity(PyObject *__pyx_v_self, PyObject *__pyx_arg_entity_id) {
  unsigned int __pyx_v_entity_id;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("unbatch_entity (wrapper)", 0);
  assert(__pyx_arg_entity_id); {
    __pyx_v_entity_id = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_arg_entity_id); if (unlikely((__pyx_v_entity_id == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 618, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.unbatch_entity", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_24unbatch_entity(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), ((unsigned int)__pyx_v_entity_id));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_24unbatch_entity(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, unsigned int __pyx_v_entity_id) {
  struct __pyx_obj_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *__pyx_v_components = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *__pyx_v_entities = 0;
  struct __pyx_obj_11kivent_core_6entity_Entity *__pyx_v_entity = 0;
  unsigned int __pyx_v_component_index;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("unbatch_entity", 0);
  <span class='trace'>__Pyx_TraceCall</span>("unbatch_entity", __pyx_f[1], 618, 0, <span class='error_goto'>__PYX_ERR(1, 618, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.unbatch_entity", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entities);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0619</span>:         <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0620</span>: <span class="sd">        Python accessible function for unbatching the entity, the real work</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0621</span>: <span class="sd">        is done in the cdefed _unbatch_entity.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0622</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0623</span>: <span class="sd">        Args:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0624</span>: <span class="sd">            entity_id (unsigned int): The id of the entity to unbatch.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0625</span>: <span class="sd">        &#39;&#39;&#39;</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0626</span>:         <span class="k">cdef</span> <span class="kt">IndexedMemoryZone</span> <span class="nf">components</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">imz_components</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.imz_components);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_components = ((struct __pyx_obj_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-7" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0627</span>:         <span class="k">cdef</span> <span class="kt">IndexedMemoryZone</span> <span class="nf">entities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="o">.</span><span class="n">entities</span></pre>
<pre class='cython code score-7 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 627, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_entities);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 627, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (!(likely(((__pyx_t_2) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_2, __pyx_ptype_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone))))) <span class='error_goto'>__PYX_ERR(1, 627, __pyx_L1_error)</span>
  __pyx_v_entities = ((struct __pyx_obj_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *)__pyx_t_2);
  __pyx_t_2 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0628</span>:         <span class="k">cdef</span> <span class="kt">Entity</span> <span class="nf">entity</span> <span class="o">=</span> <span class="n">entities</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span></pre>
<pre class='cython code score-4 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_entities), __pyx_v_entity_id, unsigned int, 0, __Pyx_PyInt_From_unsigned_int, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 628, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (!(likely(((__pyx_t_2) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_2, __pyx_ptype_11kivent_core_6entity_Entity))))) <span class='error_goto'>__PYX_ERR(1, 628, __pyx_L1_error)</span>
  __pyx_v_entity = ((struct __pyx_obj_11kivent_core_6entity_Entity *)__pyx_t_2);
  __pyx_t_2 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0629</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">component_index</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">get_component_index</span><span class="p">(</span></pre>
<pre class='cython code score-1 '>  __pyx_v_component_index = ((struct __pyx_vtabstruct_11kivent_core_6entity_Entity *)__pyx_v_entity-&gt;__pyx_vtab)-&gt;get_component_index(__pyx_v_entity, ((PyObject*)__pyx_t_2), 0);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-12" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0630</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">system_id</span><span class="p">)</span></pre>
<pre class='cython code score-12 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_id);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 630, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (!(likely(<span class='py_c_api'>PyString_CheckExact</span>(__pyx_t_2))||((__pyx_t_2) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "str", Py_TYPE(__pyx_t_2)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 630, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0631</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">_unbatch_entity</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">components</span><span class="o">.</span><span class="n">get_pointer</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>  __pyx_t_3 = ((struct __pyx_vtabstruct_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *)__pyx_v_components-&gt;__pyx_vtab)-&gt;get_pointer(__pyx_v_components, __pyx_v_component_index);<span class='error_goto'> if (unlikely(__pyx_t_3 == ((void *)NULL))) __PYX_ERR(1, 631, __pyx_L1_error)</span>
  __pyx_t_4 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_unbatch_entity(__pyx_v_self, __pyx_v_entity_id, ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_t_3));<span class='error_goto'> if (unlikely(__pyx_t_4 == ((void *)NULL))) __PYX_ERR(1, 631, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">0632</span>:             <span class="n">component_index</span><span class="p">))</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0633</span>: </pre>
<pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0634</span>:     <span class="k">cdef</span> <span class="kt">void</span>* <span class="nf">_unbatch_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">unsigned</span> <span class="nb">int</span> <span class="n">entity_id</span><span class="p">,</span></pre>
<pre class='cython code score-6 '>static void *__pyx_f_11kivent_core_7systems_9renderers_8Renderer__unbatch_entity(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, unsigned int __pyx_v_entity_id, __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data) {
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  void *__pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_unbatch_entity", 0);
  <span class='trace'>__Pyx_TraceCall</span>("_unbatch_entity", __pyx_f[1], 634, 0, <span class='error_goto'>__PYX_ERR(1, 634, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer._unbatch_entity", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0635</span>:         <span class="n">RenderStruct</span><span class="o">*</span> <span class="n">component_data</span><span class="p">)</span> <span class="k">except</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0636</span>:         <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0637</span>: <span class="sd">        The actual unbatching function. Will call</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0638</span>: <span class="sd">        **batch_manager**.unbatch_entity.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0639</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0640</span>: <span class="sd">        Args:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0641</span>: <span class="sd">            entity_id (unsigned int): The id of the entity to be unbatched.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0642</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0643</span>: <span class="sd">            component_data (RenderStruct*): Pointer to the actual component</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0644</span>: <span class="sd">            data for the entity.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0645</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0646</span>: <span class="sd">        Return:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0647</span>: <span class="sd">            void*: Will return a pointer to the component_data passed in</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0648</span>: <span class="sd">            if successful, will raise an exception if NULL is returned. This</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0649</span>: <span class="sd">            return is required for exception propogation.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0650</span>: <span class="sd">        &#39;&#39;&#39;</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0651</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;model);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0652</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span><span class="o">.</span><span class="n">unbatch_entity</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">component_data</span><span class="o">.</span><span class="n">batch_id</span><span class="p">,</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_BatchManager *)__pyx_v_self-&gt;batch_manager-&gt;__pyx_vtab)-&gt;unbatch_entity(__pyx_v_self-&gt;batch_manager, __pyx_v_entity_id, __pyx_v_component_data-&gt;batch_id, __pyx_v_model-&gt;_vertex_count, __pyx_v_model-&gt;_index_count, __pyx_v_component_data-&gt;vert_index, __pyx_v_component_data-&gt;ind_index);<span class='error_goto'> if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(1, 652, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">0653</span>:             <span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">,</span> <span class="n">component_data</span><span class="o">.</span><span class="n">vert_index</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0654</span>:             <span class="n">component_data</span><span class="o">.</span><span class="n">ind_index</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0655</span>:         <span class="n">component_data</span><span class="o">.</span><span class="n">batch_id</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data-&gt;batch_id = -1;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0656</span>:         <span class="n">component_data</span><span class="o">.</span><span class="n">vert_index</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data-&gt;vert_index = -1;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0657</span>:         <span class="n">component_data</span><span class="o">.</span><span class="n">ind_index</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>  __pyx_v_component_data-&gt;ind_index = -1;
</pre><pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0658</span>:         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-5 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_force_update);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 658, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_2 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 658, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {
/*  */
  }
</pre><pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0659</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">update_trigger</span><span class="p">()</span></pre>
<pre class='cython code score-18 '>    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;update_trigger);
    __pyx_t_3 = __pyx_v_self-&gt;update_trigger; __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
      __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
      if (likely(__pyx_t_4)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      }
    }
    __pyx_t_1 = (__pyx_t_4) ? <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_4) : <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(1, 659, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0660</span>:         <span class="k">return</span> <span class="n">component_data</span></pre>
<pre class='cython code score-0 '>  __pyx_r = __pyx_v_component_data;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0661</span>: </pre>
<pre class="cython line score-17" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0662</span>:     <span class="k">def</span> <span class="nf">batch_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">unsigned</span> <span class="nb">int</span> <span class="n">entity_id</span><span class="p">):</span></pre>
<pre class='cython code score-17 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_27batch_entity(PyObject *__pyx_v_self, PyObject *__pyx_arg_entity_id); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_8Renderer_26batch_entity[] = "Renderer.batch_entity(self, unsigned int entity_id)\n\n        Python accessible function for batching the entity, the real work\n        is done in the cdefed _batch_entity.\n\n        Args:\n            entity_id (unsigned int): The id of the entity to unbatch.\n        ";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_8Renderer_27batch_entity(PyObject *__pyx_v_self, PyObject *__pyx_arg_entity_id) {
  unsigned int __pyx_v_entity_id;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("batch_entity (wrapper)", 0);
  assert(__pyx_arg_entity_id); {
    __pyx_v_entity_id = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_arg_entity_id); if (unlikely((__pyx_v_entity_id == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 662, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.batch_entity", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_8Renderer_26batch_entity(((struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self), ((unsigned int)__pyx_v_entity_id));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_8Renderer_26batch_entity(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, unsigned int __pyx_v_entity_id) {
  struct __pyx_obj_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *__pyx_v_components = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *__pyx_v_entities = 0;
  struct __pyx_obj_11kivent_core_6entity_Entity *__pyx_v_entity = 0;
  unsigned int __pyx_v_component_index;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("batch_entity", 0);
  <span class='trace'>__Pyx_TraceCall</span>("batch_entity", __pyx_f[1], 662, 0, <span class='error_goto'>__PYX_ERR(1, 662, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer.batch_entity", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entities);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0663</span>:         <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0664</span>: <span class="sd">        Python accessible function for batching the entity, the real work</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0665</span>: <span class="sd">        is done in the cdefed _batch_entity.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0666</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0667</span>: <span class="sd">        Args:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0668</span>: <span class="sd">            entity_id (unsigned int): The id of the entity to unbatch.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0669</span>: <span class="sd">        &#39;&#39;&#39;</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0670</span>:         <span class="k">cdef</span> <span class="kt">IndexedMemoryZone</span> <span class="nf">components</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">imz_components</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.imz_components);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_components = ((struct __pyx_obj_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-7" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0671</span>:         <span class="k">cdef</span> <span class="kt">IndexedMemoryZone</span> <span class="nf">entities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="o">.</span><span class="n">entities</span></pre>
<pre class='cython code score-7 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 671, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_entities);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 671, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (!(likely(((__pyx_t_2) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_2, __pyx_ptype_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone))))) <span class='error_goto'>__PYX_ERR(1, 671, __pyx_L1_error)</span>
  __pyx_v_entities = ((struct __pyx_obj_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *)__pyx_t_2);
  __pyx_t_2 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0672</span>:         <span class="k">cdef</span> <span class="kt">Entity</span> <span class="nf">entity</span> <span class="o">=</span> <span class="n">entities</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span></pre>
<pre class='cython code score-4 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_entities), __pyx_v_entity_id, unsigned int, 0, __Pyx_PyInt_From_unsigned_int, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 672, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (!(likely(((__pyx_t_2) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_2, __pyx_ptype_11kivent_core_6entity_Entity))))) <span class='error_goto'>__PYX_ERR(1, 672, __pyx_L1_error)</span>
  __pyx_v_entity = ((struct __pyx_obj_11kivent_core_6entity_Entity *)__pyx_t_2);
  __pyx_t_2 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0673</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">component_index</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">get_component_index</span><span class="p">(</span></pre>
<pre class='cython code score-1 '>  __pyx_v_component_index = ((struct __pyx_vtabstruct_11kivent_core_6entity_Entity *)__pyx_v_entity-&gt;__pyx_vtab)-&gt;get_component_index(__pyx_v_entity, ((PyObject*)__pyx_t_2), 0);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-12" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0674</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">system_id</span><span class="p">)</span></pre>
<pre class='cython code score-12 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_id);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 674, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (!(likely(<span class='py_c_api'>PyString_CheckExact</span>(__pyx_t_2))||((__pyx_t_2) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "str", Py_TYPE(__pyx_t_2)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 674, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0675</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">_batch_entity</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span></pre>
<pre class='cython code score-0 '>  __pyx_t_4 = ((struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer *)__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_vtab)-&gt;_batch_entity(__pyx_v_self, __pyx_v_entity_id, ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)__pyx_t_3));<span class='error_goto'> if (unlikely(__pyx_t_4 == ((void *)NULL))) __PYX_ERR(1, 675, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0676</span>:             <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">components</span><span class="o">.</span><span class="n">get_pointer</span><span class="p">(</span><span class="n">component_index</span><span class="p">))</span></pre>
<pre class='cython code score-0 '>  __pyx_t_3 = ((struct __pyx_vtabstruct_11kivent_core_15memory_handlers_8indexing_IndexedMemoryZone *)__pyx_v_components-&gt;__pyx_vtab)-&gt;get_pointer(__pyx_v_components, __pyx_v_component_index);<span class='error_goto'> if (unlikely(__pyx_t_3 == ((void *)NULL))) __PYX_ERR(1, 676, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">0677</span>: </pre>
<pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0678</span>:     <span class="k">cdef</span> <span class="kt">void</span>* <span class="nf">_batch_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">unsigned</span> <span class="nb">int</span> <span class="n">entity_id</span><span class="p">,</span></pre>
<pre class='cython code score-8 '>static void *__pyx_f_11kivent_core_7systems_9renderers_8Renderer__batch_entity(struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer *__pyx_v_self, unsigned int __pyx_v_entity_id, __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_component_data) {
  PyObject *__pyx_v_batch_indices = 0;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  unsigned int __pyx_v_texkey;
  void *__pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_batch_entity", 0);
  <span class='trace'>__Pyx_TraceCall</span>("_batch_entity", __pyx_f[1], 678, 0, <span class='error_goto'>__PYX_ERR(1, 678, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.Renderer._batch_entity", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_indices);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0679</span>:         <span class="n">RenderStruct</span><span class="o">*</span> <span class="n">component_data</span><span class="p">)</span> <span class="k">except</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0680</span>:         <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0681</span>: <span class="sd">        The actual batching function. Will call</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0682</span>: <span class="sd">        **batch_manager**.batch_entity.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0683</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0684</span>: <span class="sd">        Args:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0685</span>: <span class="sd">            entity_id (unsigned int): The id of the entity to be unbatched.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0686</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0687</span>: <span class="sd">            component_data (RenderStruct*): Pointer to the actual component</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0688</span>: <span class="sd">            data for the entity.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0689</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0690</span>: <span class="sd">        Return:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0691</span>: <span class="sd">            void*: Will return a pointer to the component_data passed in</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0692</span>: <span class="sd">            if successful, will raise an exception if NULL is returned. This</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0693</span>: <span class="sd">            return is required for exception propogation.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0694</span>: <span class="sd">        &#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0695</span>:         <span class="k">cdef</span> <span class="kt">tuple</span> <span class="nf">batch_indices</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0696</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">component_data</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_component_data-&gt;model);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_model = ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0697</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">texkey</span> <span class="o">=</span> <span class="n">texture_manager</span><span class="o">.</span><span class="n">get_groupkey_from_texkey</span><span class="p">(</span></pre>
<pre class='cython code score-13 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_2, __pyx_n_s_texture_manager);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 697, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_get_groupkey_from_texkey);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 697, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
/*  */
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_1); if (unlikely((__pyx_t_5 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 697, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_texkey = __pyx_t_5;
</pre><pre class="cython line score-17" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0698</span>:             <span class="n">component_data</span><span class="o">.</span><span class="n">texkey</span><span class="p">)</span></pre>
<pre class='cython code score-17 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_component_data-&gt;texkey);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 698, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
    }
  }
  __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_4, __pyx_t_2) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(1, 697, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0699</span>:         <span class="n">batch_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_entity</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_BatchManager *)__pyx_v_self-&gt;batch_manager-&gt;__pyx_vtab)-&gt;batch_entity(__pyx_v_self-&gt;batch_manager, __pyx_v_entity_id, __pyx_v_texkey, __pyx_v_model-&gt;_vertex_count, __pyx_v_model-&gt;_index_count);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 699, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_batch_indices = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0700</span>:             <span class="n">texkey</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">)</span></pre>
<pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0701</span>:         <span class="n">component_data</span><span class="o">.</span><span class="n">batch_id</span> <span class="o">=</span> <span class="n">batch_indices</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-15 '>  if (unlikely(__pyx_v_batch_indices == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
    <span class='error_goto'>__PYX_ERR(1, 701, __pyx_L1_error)</span>
  }
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt_Tuple</span>(__pyx_v_batch_indices, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 701, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_1); if (unlikely((__pyx_t_5 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 701, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_component_data-&gt;batch_id = __pyx_t_5;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0702</span>:         <span class="n">component_data</span><span class="o">.</span><span class="n">vert_index</span> <span class="o">=</span> <span class="n">batch_indices</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-15 '>  if (unlikely(__pyx_v_batch_indices == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
    <span class='error_goto'>__PYX_ERR(1, 702, __pyx_L1_error)</span>
  }
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt_Tuple</span>(__pyx_v_batch_indices, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 702, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_1); if (unlikely((__pyx_t_6 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 702, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_component_data-&gt;vert_index = __pyx_t_6;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0703</span>:         <span class="n">component_data</span><span class="o">.</span><span class="n">ind_index</span> <span class="o">=</span> <span class="n">batch_indices</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-15 '>  if (unlikely(__pyx_v_batch_indices == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
    <span class='error_goto'>__PYX_ERR(1, 703, __pyx_L1_error)</span>
  }
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt_Tuple</span>(__pyx_v_batch_indices, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 703, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(__pyx_t_1); if (unlikely((__pyx_t_6 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 703, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_component_data-&gt;ind_index = __pyx_t_6;
</pre><pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0704</span>:         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-5 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_force_update);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 704, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 704, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_7) {
/*  */
  }
</pre><pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0705</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">update_trigger</span><span class="p">()</span></pre>
<pre class='cython code score-18 '>    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;update_trigger);
    __pyx_t_3 = __pyx_v_self-&gt;update_trigger; __pyx_t_2 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
      __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
      if (likely(__pyx_t_2)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      }
    }
    __pyx_t_1 = (__pyx_t_2) ? <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_2) : <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    if (unlikely(!__pyx_t_1)) <span class='error_goto'>__PYX_ERR(1, 705, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0706</span>:         <span class="k">return</span> <span class="n">component_data</span></pre>
<pre class='cython code score-0 '>  __pyx_r = __pyx_v_component_data;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0707</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0708</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0709</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">RotateRenderer</span><span class="p">(</span><span class="n">Renderer</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotateRenderer {
  struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer __pyx_base;
};
static struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotateRenderer *__pyx_vtabptr_11kivent_core_7systems_9renderers_RotateRenderer;

</pre><pre class="cython line score-0">&#xA0;<span class="">0710</span>:     <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0711</span>: <span class="sd">    Processing Depends On: PositionSystem2D, RotateSystem2D, RotateRenderer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0712</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0713</span>: <span class="sd">    The renderer draws with the VertexFormat7F:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0714</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0715</span>: <span class="sd">    .. code-block:: cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0716</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0717</span>: <span class="sd">        ctypedef struct VertexFormat7F:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0718</span>: <span class="sd">            GLfloat[2] pos</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0719</span>: <span class="sd">            GLfloat[2] uvs</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0720</span>: <span class="sd">            GLfloat rot</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0721</span>: <span class="sd">            GLfloat[2] center</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0722</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0723</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0724</span>: <span class="sd">    This renderer draws every entity with rotation data suitable</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0725</span>: <span class="sd">    for use with entities using the CymunkPhysics GameSystems.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0726</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0727</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-39" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0728</span>:     <span class="n">system_names</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">([</span><span class="s">&#39;rotate_renderer&#39;</span><span class="p">,</span> <span class="s">&#39;position&#39;</span><span class="p">,</span></pre>
<pre class='cython code score-39 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 728, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 728, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_rotate_renderer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_rotate_renderer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_n_s_rotate_renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_n_s_position);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_rotate);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_rotate);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_n_s_rotate);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 728, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateRenderer-&gt;tp_dict, __pyx_n_s_system_names, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 728, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">0729</span>:         <span class="s">&#39;rotate&#39;</span><span class="p">])</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0730</span>:     <span class="n">system_id</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;rotate_renderer&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 730, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_rotate_renderer) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_rotate_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 730, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateRenderer-&gt;tp_dict, __pyx_n_s_system_id, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 730, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateRenderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0731</span>:     <span class="n">vertex_format_size</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat7F</span><span class="p">))</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 731, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 731, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 731, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateRenderer-&gt;tp_dict, __pyx_n_s_vertex_format_size, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 731, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">0732</span>: </pre>
<pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0733</span>:     <span class="k">cdef</span> <span class="kt">void</span>* <span class="nf">setup_batch_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Buffer</span> <span class="n">master_buffer</span><span class="p">)</span> <span class="k">except</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-11 '>static void *__pyx_f_11kivent_core_7systems_9renderers_14RotateRenderer_setup_batch_manager(struct __pyx_obj_11kivent_core_7systems_9renderers_RotateRenderer *__pyx_v_self, struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *__pyx_v_master_buffer) {
  struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *__pyx_v_batch_vertex_format = 0;
  PyObject *__pyx_v_x = NULL;
  void *__pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("setup_batch_manager", 0);
  <span class='trace'>__Pyx_TraceCall</span>("setup_batch_manager", __pyx_f[1], 733, 0, <span class='error_goto'>__PYX_ERR(1, 733, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotateRenderer.setup_batch_manager", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_vertex_format);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_x);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0734</span>:         <span class="k">cdef</span> <span class="kt">KEVertexFormat</span> <span class="nf">batch_vertex_format</span> <span class="o">=</span> <span class="n">KEVertexFormat</span><span class="p">(</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 734, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
/*  */
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PySequence_Tuple</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 734, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_2, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 734, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_13vertex_format_KEVertexFormat), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 734, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_batch_vertex_format = ((struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0735</span>:             <span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat7F</span><span class="p">),</span> <span class="o">*</span><span class="n">vertex_format_7f</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 735, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/*  */
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_vertex_format_7f);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 735, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0736</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span> <span class="o">=</span> <span class="n">BatchManager</span><span class="p">(</span></pre>
<pre class='cython code score-23 '>  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(10);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 736, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, ((PyObject *)__pyx_v_batch_vertex_format));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, ((PyObject *)__pyx_v_master_buffer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_triangles);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_triangles);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 5, __pyx_n_s_triangles);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 6, __pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 7, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 8, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 9, __pyx_t_5);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_4 = 0;
  __pyx_t_6 = 0;
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_8batching_BatchManager), __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 736, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager));
  __pyx_v_self-&gt;__pyx_base.batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_5);
  __pyx_t_5 = 0;
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0737</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">size_of_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_count</span><span class="p">,</span></pre>
<pre class='cython code score-6 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_size_of_batches);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 737, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_max_batches);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 737, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_frame_count);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 737, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class="cython line score-0">&#xA0;<span class="">0738</span>:             <span class="n">batch_vertex_format</span><span class="p">,</span> <span class="n">master_buffer</span><span class="p">,</span> <span class="s">&#39;triangles&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span></pre>
<pre class="cython line score-53" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0739</span>:             <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_names</span><span class="p">],</span></pre>
<pre class='cython code score-53 '>  __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 739, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_names);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 739, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_5)) || <span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_5)) {
    __pyx_t_6 = __pyx_t_5; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_7 = -1; __pyx_t_6 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 739, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = Py_TYPE(__pyx_t_6)-&gt;tp_iternext;<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(1, 739, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_6))) {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 739, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 739, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 739, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 739, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_8(__pyx_t_6);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = <span class='py_c_api'>PyErr_Occurred</span>();
        if (exc_type) {
          if (likely(<span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(exc_type, PyExc_StopIteration))) <span class='py_c_api'>PyErr_Clear</span>();
          else <span class='error_goto'>__PYX_ERR(1, 739, __pyx_L1_error)</span>
        }
        break;
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_x, __pyx_t_5);
    __pyx_t_5 = 0;
    if (unlikely(<span class='pyx_c_api'>__Pyx_ListComp_Append</span>(__pyx_t_4, (PyObject*)__pyx_v_x))) <span class='error_goto'>__PYX_ERR(1, 739, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0740</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">smallest_vertex_count</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_smallest_vertex_count);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 740, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 740, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0741</span>:         <span class="k">return</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-0 '>  __pyx_r = ((void *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0742</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0743</span>: </pre>
<pre class="cython line score-38" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0744</span>:     <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-38 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_14RotateRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_14RotateRenderer_update[] = "RotateRenderer.update(self, force_update, dt)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_14RotateRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_force_update = 0;
  CYTHON_UNUSED PyObject *__pyx_v_dt = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_force_update,&amp;__pyx_n_s_dt,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_force_update)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 744, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "update") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 744, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_force_update = values[0];
    __pyx_v_dt = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 744, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotateRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_14RotateRenderer_update(((struct __pyx_obj_11kivent_core_7systems_9renderers_RotateRenderer *)__pyx_v_self), __pyx_v_force_update, __pyx_v_dt);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_14RotateRenderer_update(struct __pyx_obj_11kivent_core_7systems_9renderers_RotateRenderer *__pyx_v_self, PyObject *__pyx_v_force_update, CYTHON_UNUSED PyObject *__pyx_v_dt) {
  struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *__pyx_v_batch = 0;
  PyObject *__pyx_v_batches = 0;
  unsigned int __pyx_v_batch_key;
  unsigned int __pyx_v_index_offset;
  unsigned int __pyx_v_vert_offset;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_render_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_pos_comp;
  __pyx_t_11kivent_core_7systems_14rotate_systems_RotateStruct2D *__pyx_v_rot_comp;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F *__pyx_v_frame_data;
  GLushort *__pyx_v_frame_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F *__pyx_v_vertex;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  GLushort *__pyx_v_model_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *__pyx_v_model_vertices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F __pyx_v_model_vertex;
  unsigned int __pyx_v_used;
  unsigned int __pyx_v_i;
  unsigned int __pyx_v_ri;
  unsigned int __pyx_v_component_count;
  unsigned int __pyx_v_n;
  unsigned int __pyx_v_t;
  struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *__pyx_v_entity_components = 0;
  struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *__pyx_v_batch_manager = 0;
  PyObject *__pyx_v_batch_groups = 0;
  struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *__pyx_v_mesh_instruction = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *__pyx_v_components_block = 0;
  void **__pyx_v_component_data;
  int __pyx_v_static_rendering;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("update", __pyx_f[1], 744, 0, <span class='error_goto'>__PYX_ERR(1, 744, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotateRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batches);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_groups);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_mesh_instruction);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components_block);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0745</span>:         <span class="k">cdef</span> <span class="kt">IndexedBatch</span> <span class="nf">batch</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0746</span>:         <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">batches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0747</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">batch_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0748</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">index_offset</span><span class="p">,</span> <span class="nf">vert_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0749</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">render_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0750</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0751</span>:         <span class="k">cdef</span> <span class="kt">RotateStruct2D</span>* <span class="nf">rot_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0752</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat7F</span>* <span class="nf">frame_data</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0753</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">frame_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0754</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat7F</span>* <span class="nf">vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0755</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0756</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">model_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0757</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span>* <span class="nf">model_vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0758</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span> <span class="nf">model_vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0759</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">used</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">ri</span><span class="p">,</span> <span class="nf">component_count</span><span class="p">,</span> <span class="nf">n</span><span class="p">,</span> <span class="nf">t</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0760</span>:         <span class="k">cdef</span> <span class="kt">ComponentPointerAggregator</span> <span class="nf">entity_components</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0761</span>:         <span class="k">cdef</span> <span class="kt">BatchManager</span> <span class="nf">batch_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0762</span>:         <span class="k">cdef</span> <span class="kt">dict</span> <span class="nf">batch_groups</span> <span class="o">=</span> <span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_groups</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_v_batch_manager-&gt;batch_groups;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_groups = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0763</span>:         <span class="k">cdef</span> <span class="kt">CMesh</span> <span class="nf">mesh_instruction</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0764</span>:         <span class="k">cdef</span> <span class="kt">MemoryBlock</span> <span class="nf">components_block</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0765</span>:         <span class="k">cdef</span> <span class="kt">void</span>** <span class="nf">component_data</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0766</span>:         <span class="k">cdef</span> <span class="kt">bint</span> <span class="nf">static_rendering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_rendering</span></pre>
<pre class='cython code score-10 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_static_rendering);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 766, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 766, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_static_rendering = __pyx_t_2;
</pre><pre class="cython line score-0">&#xA0;<span class="">0767</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0768</span>:         <span class="k">for</span> <span class="n">batch_key</span> <span class="ow">in</span> <span class="n">batch_groups</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = 0;
  if (unlikely(__pyx_v_batch_groups == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
    <span class='error_goto'>__PYX_ERR(1, 768, __pyx_L1_error)</span>
  }
  __pyx_t_6 = __Pyx_dict_iterator(__pyx_v_batch_groups, 1, ((PyObject *)NULL), (&amp;__pyx_t_4), (&amp;__pyx_t_5));<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 768, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  __pyx_t_1 = __pyx_t_6;
  __pyx_t_6 = 0;
  while (1) {
    __pyx_t_7 = __Pyx_dict_iter_next(__pyx_t_1, __pyx_t_4, &amp;__pyx_t_3, &amp;__pyx_t_6, NULL, NULL, __pyx_t_5);
    if (unlikely(__pyx_t_7 == 0)) break;
    if (unlikely(__pyx_t_7 == -1)) <span class='error_goto'>__PYX_ERR(1, 768, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_6); if (unlikely((__pyx_t_8 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 768, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_batch_key = __pyx_t_8;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0769</span>:             <span class="n">batches</span> <span class="o">=</span> <span class="n">batch_groups</span><span class="p">[</span><span class="n">batch_key</span><span class="p">]</span></pre>
<pre class='cython code score-21 '>    if (unlikely(__pyx_v_batch_groups == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
      <span class='error_goto'>__PYX_ERR(1, 769, __pyx_L1_error)</span>
    }
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_batch_key);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 769, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_batch_groups, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 769, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))||((__pyx_t_9) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_9)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 769, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batches, ((PyObject*)__pyx_t_9));
    __pyx_t_9 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0770</span>:             <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span></pre>
<pre class='cython code score-15 '>    if (unlikely(__pyx_v_batches == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
      <span class='error_goto'>__PYX_ERR(1, 770, __pyx_L1_error)</span>
    }
    __pyx_t_9 = __pyx_v_batches; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_9); __pyx_t_10 = 0;
    for (;;) {
      if (__pyx_t_10 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_9)) break;
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_6 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_9, __pyx_t_10); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_10++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 770, __pyx_L1_error)</span>
      #else
      __pyx_t_6 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_9, __pyx_t_10); __pyx_t_10++;<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 770, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      #endif
      if (!(likely(((__pyx_t_6) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_6, __pyx_ptype_11kivent_core_9rendering_8batching_IndexedBatch))))) <span class='error_goto'>__PYX_ERR(1, 770, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batch, ((struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_t_6));
      __pyx_t_6 = 0;
/*  */
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0771</span>:                 <span class="k">if</span> <span class="ow">not</span> <span class="n">static_rendering</span> <span class="ow">or</span> <span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>      __pyx_t_11 = ((!(__pyx_v_static_rendering != 0)) != 0);
      if (!__pyx_t_11) {
      } else {
        __pyx_t_2 = __pyx_t_11;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_force_update); if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 771, __pyx_L1_error)</span>
      __pyx_t_2 = __pyx_t_11;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_2) {
/*  */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0772</span>:                     <span class="n">entity_components</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">entity_components</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_batch-&gt;entity_components);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_entity_components, ((struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0773</span>:                     <span class="n">components_block</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">memory_block</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_entity_components-&gt;memory_block);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_components_block, ((struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0774</span>:                     <span class="n">used</span> <span class="o">=</span> <span class="n">components_block</span><span class="o">.</span><span class="n">used_count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_components_block-&gt;__pyx_base.used_count;
        __pyx_v_used = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0775</span>:                     <span class="n">component_count</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_entity_components-&gt;count;
        __pyx_v_component_count = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0776</span>:                     <span class="n">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">**&gt;</span><span class="n">components_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>        __pyx_v_component_data = ((void **)__pyx_v_components_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0777</span>:                     <span class="n">frame_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat7F</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_vbo_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_data = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_vbo_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0778</span>:                     <span class="n">frame_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_indices_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_indices = ((GLushort *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_indices_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0779</span>:                     <span class="n">index_offset</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_v_index_offset = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0780</span>:                     <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">used</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_used;
        __pyx_t_12 = __pyx_t_8;
        for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_12; __pyx_t_13+=1) {
          __pyx_v_t = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0781</span>:                         <span class="n">ri</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">component_count</span></pre>
<pre class='cython code score-0 '>          __pyx_v_ri = (__pyx_v_t * __pyx_v_component_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0782</span>:                         <span class="k">if</span> <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="p">]</span> <span class="o">==</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (((__pyx_v_component_data[__pyx_v_ri]) == NULL) != 0);
          if (__pyx_t_2) {
/*  */
          }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0783</span>:                             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>            goto __pyx_L10_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0784</span>:                         <span class="n">render_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>          __pyx_v_render_comp = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)(__pyx_v_component_data[(__pyx_v_ri + 0)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0785</span>:                         <span class="n">vert_offset</span> <span class="o">=</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">vert_index</span></pre>
<pre class='cython code score-0 '>          __pyx_t_7 = __pyx_v_render_comp-&gt;vert_index;
          __pyx_v_vert_offset = __pyx_t_7;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0786</span>:                         <span class="n">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">render_comp</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-2 '>          __pyx_t_6 = ((PyObject *)__pyx_v_render_comp-&gt;model);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_model, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_6));
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0787</span>:                         <span class="k">if</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (__pyx_v_render_comp-&gt;render != 0);
          if (__pyx_t_2) {
/*  */
          }
          __pyx_L10_continue:;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0788</span>:                             <span class="n">pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 1)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0789</span>:                             <span class="n">rot_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RotateStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_rot_comp = ((__pyx_t_11kivent_core_7systems_14rotate_systems_RotateStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 2)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0790</span>:                             <span class="n">model_vertices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat4F</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_vertices = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *)__pyx_v_model-&gt;vertices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0">&#xA0;<span class="">0791</span>:                                 <span class="n">model</span><span class="o">.</span><span class="n">vertices_block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0792</span>:                             <span class="n">model_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">model</span><span class="o">.</span><span class="n">indices_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_indices = ((GLushort *)__pyx_v_model-&gt;indices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0793</span>:                             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_index_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0794</span>:                                 <span class="n">frame_indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_frame_indices[(__pyx_v_i + __pyx_v_index_offset)]) = ((__pyx_v_model_indices[__pyx_v_i]) + __pyx_v_vert_offset);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">0795</span>:                                     <span class="n">model_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0796</span>:                             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_vertex_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_n = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0797</span>:                                 <span class="n">vertex</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">frame_data</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_vertex = (&amp;(__pyx_v_frame_data[(__pyx_v_n + __pyx_v_vert_offset)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0798</span>:                                 <span class="n">model_vertex</span> <span class="o">=</span> <span class="n">model_vertices</span><span class="p">[</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_model_vertex = (__pyx_v_model_vertices[__pyx_v_n]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0799</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[0]) = (__pyx_v_model_vertex.pos[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0800</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[1]) = (__pyx_v_model_vertex.pos[1]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0801</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;uvs[0]) = (__pyx_v_model_vertex.uvs[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0802</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;uvs[1]) = (__pyx_v_model_vertex.uvs[1]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0803</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">rot</span> <span class="o">=</span> <span class="n">rot_comp</span><span class="o">.</span><span class="n">r</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_rot_comp-&gt;r;
              __pyx_v_vertex-&gt;rot = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0804</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">x</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_pos_comp-&gt;x;
              (__pyx_v_vertex-&gt;center[0]) = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0805</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">y</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_pos_comp-&gt;y;
              (__pyx_v_vertex-&gt;center[1]) = __pyx_t_17;
            }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0806</span>:                             <span class="n">index_offset</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-0 '>            __pyx_v_index_offset = (__pyx_v_index_offset + __pyx_v_model-&gt;_index_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0807</span>:                     <span class="n">batch</span><span class="o">.</span><span class="n">set_index_count_for_frame</span><span class="p">(</span><span class="n">index_offset</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>        ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;set_index_count_for_frame(__pyx_v_batch, __pyx_v_index_offset);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0808</span>:                 <span class="n">mesh_instruction</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">mesh_instruction</span></pre>
<pre class='cython code score-4 '>      if (!(likely(((__pyx_v_batch-&gt;mesh_instruction) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_batch-&gt;mesh_instruction, __pyx_ptype_11kivent_core_9rendering_5cmesh_CMesh))))) <span class='error_goto'>__PYX_ERR(1, 808, __pyx_L1_error)</span>
      __pyx_t_6 = __pyx_v_batch-&gt;mesh_instruction;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_mesh_instruction, ((struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_t_6));
      __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0809</span>:                 <span class="n">mesh_instruction</span><span class="o">.</span><span class="n">flag_update</span><span class="p">()</span></pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_v_mesh_instruction-&gt;__pyx_base.__pyx_base.__pyx_vtab)-&gt;__pyx_base.__pyx_base.flag_update(((struct __pyx_obj_4kivy_8graphics_12instructions_Instruction *)__pyx_v_mesh_instruction), 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 809, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0810</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0811</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0812</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">RotateScaleRenderer</span><span class="p">(</span><span class="n">RotateRenderer</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotateScaleRenderer {
  struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotateRenderer __pyx_base;
};
static struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotateScaleRenderer *__pyx_vtabptr_11kivent_core_7systems_9renderers_RotateScaleRenderer;

</pre><pre class="cython line score-0">&#xA0;<span class="">0813</span>:     <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0814</span>: <span class="sd">    Processing Depends On: PositionSystem2D, RotateSystem2D, ScaleSystem2D, RotateScaleRenderer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0815</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0816</span>: <span class="sd">    The renderer draws with the VertexFormat7F:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0817</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0818</span>: <span class="sd">    .. code-block:: cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0819</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0820</span>: <span class="sd">        ctypedef struct VertexFormat7F:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0821</span>: <span class="sd">            GLfloat[2] pos</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0822</span>: <span class="sd">            GLfloat[2] uvs</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0823</span>: <span class="sd">            GLfloat rot</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0824</span>: <span class="sd">            GLfloat[2] center</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0825</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0826</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0827</span>: <span class="sd">    This renderer draws every entity with rotation data suitable</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0828</span>: <span class="sd">    for use with entities using the CymunkPhysics GameSystems.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0829</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0830</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-41" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0831</span>:     <span class="n">system_names</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">([</span><span class="s">&#39;rotate_scale_renderer&#39;</span><span class="p">,</span> <span class="s">&#39;position&#39;</span><span class="p">,</span></pre>
<pre class='cython code score-41 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 831, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(4);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 831, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_rotate_scale_renderer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_rotate_scale_renderer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_n_s_rotate_scale_renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_n_s_position);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_rotate);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_rotate);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_n_s_rotate);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_scale);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_scale);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 3, __pyx_n_s_scale);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 831, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateScaleRenderer-&gt;tp_dict, __pyx_n_s_system_names, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 831, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateScaleRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">0832</span>:         <span class="s">&#39;rotate&#39;</span><span class="p">,</span> <span class="s">&#39;scale&#39;</span><span class="p">])</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0833</span>:     <span class="n">system_id</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;rotate_scale_renderer&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 833, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_rotate_scale_renderer) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_rotate_scale_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 833, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateScaleRenderer-&gt;tp_dict, __pyx_n_s_system_id, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 833, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateScaleRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">0834</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0835</span>: </pre>
<pre class="cython line score-38" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0836</span>:     <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-38 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_19RotateScaleRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_19RotateScaleRenderer_update[] = "RotateScaleRenderer.update(self, force_update, dt)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_19RotateScaleRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_force_update = 0;
  CYTHON_UNUSED PyObject *__pyx_v_dt = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_force_update,&amp;__pyx_n_s_dt,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_force_update)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 836, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "update") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 836, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_force_update = values[0];
    __pyx_v_dt = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 836, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotateScaleRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_19RotateScaleRenderer_update(((struct __pyx_obj_11kivent_core_7systems_9renderers_RotateScaleRenderer *)__pyx_v_self), __pyx_v_force_update, __pyx_v_dt);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_19RotateScaleRenderer_update(struct __pyx_obj_11kivent_core_7systems_9renderers_RotateScaleRenderer *__pyx_v_self, PyObject *__pyx_v_force_update, CYTHON_UNUSED PyObject *__pyx_v_dt) {
  struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *__pyx_v_batch = 0;
  PyObject *__pyx_v_batches = 0;
  unsigned int __pyx_v_batch_key;
  unsigned int __pyx_v_index_offset;
  unsigned int __pyx_v_vert_offset;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_render_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_pos_comp;
  __pyx_t_11kivent_core_7systems_14rotate_systems_RotateStruct2D *__pyx_v_rot_comp;
  __pyx_t_11kivent_core_7systems_13scale_systems_ScaleStruct2D *__pyx_v_scale_comp;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F *__pyx_v_frame_data;
  GLushort *__pyx_v_frame_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F *__pyx_v_vertex;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  GLushort *__pyx_v_model_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *__pyx_v_model_vertices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F __pyx_v_model_vertex;
  unsigned int __pyx_v_used;
  unsigned int __pyx_v_i;
  unsigned int __pyx_v_ri;
  unsigned int __pyx_v_component_count;
  unsigned int __pyx_v_n;
  unsigned int __pyx_v_t;
  struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *__pyx_v_entity_components = 0;
  struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *__pyx_v_batch_manager = 0;
  PyObject *__pyx_v_batch_groups = 0;
  struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *__pyx_v_mesh_instruction = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *__pyx_v_components_block = 0;
  void **__pyx_v_component_data;
  int __pyx_v_static_rendering;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("update", __pyx_f[1], 836, 0, <span class='error_goto'>__PYX_ERR(1, 836, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotateScaleRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batches);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_groups);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_mesh_instruction);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components_block);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0837</span>:         <span class="k">cdef</span> <span class="kt">IndexedBatch</span> <span class="nf">batch</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0838</span>:         <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">batches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0839</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">batch_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0840</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">index_offset</span><span class="p">,</span> <span class="nf">vert_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0841</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">render_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0842</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0843</span>:         <span class="k">cdef</span> <span class="kt">RotateStruct2D</span>* <span class="nf">rot_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0844</span>:         <span class="k">cdef</span> <span class="kt">ScaleStruct2D</span>* <span class="nf">scale_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0845</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat7F</span>* <span class="nf">frame_data</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0846</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">frame_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0847</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat7F</span>* <span class="nf">vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0848</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0849</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">model_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0850</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span>* <span class="nf">model_vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0851</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span> <span class="nf">model_vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0852</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">used</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">ri</span><span class="p">,</span> <span class="nf">component_count</span><span class="p">,</span> <span class="nf">n</span><span class="p">,</span> <span class="nf">t</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0853</span>:         <span class="k">cdef</span> <span class="kt">ComponentPointerAggregator</span> <span class="nf">entity_components</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0854</span>:         <span class="k">cdef</span> <span class="kt">BatchManager</span> <span class="nf">batch_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0855</span>:         <span class="k">cdef</span> <span class="kt">dict</span> <span class="nf">batch_groups</span> <span class="o">=</span> <span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_groups</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_v_batch_manager-&gt;batch_groups;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_groups = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0856</span>:         <span class="k">cdef</span> <span class="kt">CMesh</span> <span class="nf">mesh_instruction</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0857</span>:         <span class="k">cdef</span> <span class="kt">MemoryBlock</span> <span class="nf">components_block</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0858</span>:         <span class="k">cdef</span> <span class="kt">void</span>** <span class="nf">component_data</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0859</span>:         <span class="k">cdef</span> <span class="kt">bint</span> <span class="nf">static_rendering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_rendering</span></pre>
<pre class='cython code score-10 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_static_rendering);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 859, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 859, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_static_rendering = __pyx_t_2;
</pre><pre class="cython line score-0">&#xA0;<span class="">0860</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0861</span>:         <span class="k">for</span> <span class="n">batch_key</span> <span class="ow">in</span> <span class="n">batch_groups</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = 0;
  if (unlikely(__pyx_v_batch_groups == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
    <span class='error_goto'>__PYX_ERR(1, 861, __pyx_L1_error)</span>
  }
  __pyx_t_6 = __Pyx_dict_iterator(__pyx_v_batch_groups, 1, ((PyObject *)NULL), (&amp;__pyx_t_4), (&amp;__pyx_t_5));<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 861, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  __pyx_t_1 = __pyx_t_6;
  __pyx_t_6 = 0;
  while (1) {
    __pyx_t_7 = __Pyx_dict_iter_next(__pyx_t_1, __pyx_t_4, &amp;__pyx_t_3, &amp;__pyx_t_6, NULL, NULL, __pyx_t_5);
    if (unlikely(__pyx_t_7 == 0)) break;
    if (unlikely(__pyx_t_7 == -1)) <span class='error_goto'>__PYX_ERR(1, 861, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_6); if (unlikely((__pyx_t_8 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 861, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_batch_key = __pyx_t_8;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0862</span>:             <span class="n">batches</span> <span class="o">=</span> <span class="n">batch_groups</span><span class="p">[</span><span class="n">batch_key</span><span class="p">]</span></pre>
<pre class='cython code score-21 '>    if (unlikely(__pyx_v_batch_groups == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
      <span class='error_goto'>__PYX_ERR(1, 862, __pyx_L1_error)</span>
    }
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_batch_key);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 862, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_batch_groups, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 862, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))||((__pyx_t_9) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_9)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 862, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batches, ((PyObject*)__pyx_t_9));
    __pyx_t_9 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0863</span>:             <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span></pre>
<pre class='cython code score-15 '>    if (unlikely(__pyx_v_batches == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
      <span class='error_goto'>__PYX_ERR(1, 863, __pyx_L1_error)</span>
    }
    __pyx_t_9 = __pyx_v_batches; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_9); __pyx_t_10 = 0;
    for (;;) {
      if (__pyx_t_10 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_9)) break;
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_6 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_9, __pyx_t_10); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_10++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 863, __pyx_L1_error)</span>
      #else
      __pyx_t_6 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_9, __pyx_t_10); __pyx_t_10++;<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 863, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      #endif
      if (!(likely(((__pyx_t_6) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_6, __pyx_ptype_11kivent_core_9rendering_8batching_IndexedBatch))))) <span class='error_goto'>__PYX_ERR(1, 863, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batch, ((struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_t_6));
      __pyx_t_6 = 0;
/*  */
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0864</span>:                 <span class="k">if</span> <span class="ow">not</span> <span class="n">static_rendering</span> <span class="ow">or</span> <span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>      __pyx_t_11 = ((!(__pyx_v_static_rendering != 0)) != 0);
      if (!__pyx_t_11) {
      } else {
        __pyx_t_2 = __pyx_t_11;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_force_update); if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 864, __pyx_L1_error)</span>
      __pyx_t_2 = __pyx_t_11;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_2) {
/*  */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0865</span>:                     <span class="n">entity_components</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">entity_components</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_batch-&gt;entity_components);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_entity_components, ((struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0866</span>:                     <span class="n">components_block</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">memory_block</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_entity_components-&gt;memory_block);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_components_block, ((struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0867</span>:                     <span class="n">used</span> <span class="o">=</span> <span class="n">components_block</span><span class="o">.</span><span class="n">used_count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_components_block-&gt;__pyx_base.used_count;
        __pyx_v_used = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0868</span>:                     <span class="n">component_count</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_entity_components-&gt;count;
        __pyx_v_component_count = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0869</span>:                     <span class="n">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">**&gt;</span><span class="n">components_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>        __pyx_v_component_data = ((void **)__pyx_v_components_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0870</span>:                     <span class="n">frame_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat7F</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_vbo_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_data = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_vbo_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0871</span>:                     <span class="n">frame_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_indices_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_indices = ((GLushort *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_indices_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0872</span>:                     <span class="n">index_offset</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_v_index_offset = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0873</span>:                     <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">used</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_used;
        __pyx_t_12 = __pyx_t_8;
        for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_12; __pyx_t_13+=1) {
          __pyx_v_t = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0874</span>:                         <span class="n">ri</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">component_count</span></pre>
<pre class='cython code score-0 '>          __pyx_v_ri = (__pyx_v_t * __pyx_v_component_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0875</span>:                         <span class="k">if</span> <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="p">]</span> <span class="o">==</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (((__pyx_v_component_data[__pyx_v_ri]) == NULL) != 0);
          if (__pyx_t_2) {
/*  */
          }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0876</span>:                             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>            goto __pyx_L10_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0877</span>:                         <span class="n">render_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>          __pyx_v_render_comp = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)(__pyx_v_component_data[(__pyx_v_ri + 0)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0878</span>:                         <span class="n">vert_offset</span> <span class="o">=</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">vert_index</span></pre>
<pre class='cython code score-0 '>          __pyx_t_7 = __pyx_v_render_comp-&gt;vert_index;
          __pyx_v_vert_offset = __pyx_t_7;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0879</span>:                         <span class="n">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">render_comp</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-2 '>          __pyx_t_6 = ((PyObject *)__pyx_v_render_comp-&gt;model);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_model, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_6));
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0880</span>:                         <span class="k">if</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (__pyx_v_render_comp-&gt;render != 0);
          if (__pyx_t_2) {
/*  */
          }
          __pyx_L10_continue:;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0881</span>:                             <span class="n">pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 1)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0882</span>:                             <span class="n">rot_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RotateStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_rot_comp = ((__pyx_t_11kivent_core_7systems_14rotate_systems_RotateStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 2)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0883</span>:                             <span class="n">scale_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">ScaleStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_scale_comp = ((__pyx_t_11kivent_core_7systems_13scale_systems_ScaleStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 3)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0884</span>:                             <span class="n">model_vertices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat4F</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_vertices = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *)__pyx_v_model-&gt;vertices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0">&#xA0;<span class="">0885</span>:                                 <span class="n">model</span><span class="o">.</span><span class="n">vertices_block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0886</span>:                             <span class="n">model_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">model</span><span class="o">.</span><span class="n">indices_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_indices = ((GLushort *)__pyx_v_model-&gt;indices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0887</span>:                             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_index_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0888</span>:                                 <span class="n">frame_indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_frame_indices[(__pyx_v_i + __pyx_v_index_offset)]) = ((__pyx_v_model_indices[__pyx_v_i]) + __pyx_v_vert_offset);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">0889</span>:                                     <span class="n">model_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0890</span>:                             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_vertex_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_n = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0891</span>:                                 <span class="n">vertex</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">frame_data</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_vertex = (&amp;(__pyx_v_frame_data[(__pyx_v_n + __pyx_v_vert_offset)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0892</span>:                                 <span class="n">model_vertex</span> <span class="o">=</span> <span class="n">model_vertices</span><span class="p">[</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_model_vertex = (__pyx_v_model_vertices[__pyx_v_n]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0893</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_comp</span><span class="o">.</span><span class="n">sx</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[0]) = ((__pyx_v_model_vertex.pos[0]) * __pyx_v_scale_comp-&gt;sx);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0894</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_comp</span><span class="o">.</span><span class="n">sy</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[1]) = ((__pyx_v_model_vertex.pos[1]) * __pyx_v_scale_comp-&gt;sy);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0895</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;uvs[0]) = (__pyx_v_model_vertex.uvs[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0896</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;uvs[1]) = (__pyx_v_model_vertex.uvs[1]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0897</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">rot</span> <span class="o">=</span> <span class="n">rot_comp</span><span class="o">.</span><span class="n">r</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_rot_comp-&gt;r;
              __pyx_v_vertex-&gt;rot = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0898</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">x</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_pos_comp-&gt;x;
              (__pyx_v_vertex-&gt;center[0]) = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0899</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">y</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_pos_comp-&gt;y;
              (__pyx_v_vertex-&gt;center[1]) = __pyx_t_17;
            }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0900</span>:                             <span class="n">index_offset</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-0 '>            __pyx_v_index_offset = (__pyx_v_index_offset + __pyx_v_model-&gt;_index_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0901</span>:                     <span class="n">batch</span><span class="o">.</span><span class="n">set_index_count_for_frame</span><span class="p">(</span><span class="n">index_offset</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>        ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;set_index_count_for_frame(__pyx_v_batch, __pyx_v_index_offset);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0902</span>:                 <span class="n">mesh_instruction</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">mesh_instruction</span></pre>
<pre class='cython code score-4 '>      if (!(likely(((__pyx_v_batch-&gt;mesh_instruction) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_batch-&gt;mesh_instruction, __pyx_ptype_11kivent_core_9rendering_5cmesh_CMesh))))) <span class='error_goto'>__PYX_ERR(1, 902, __pyx_L1_error)</span>
      __pyx_t_6 = __pyx_v_batch-&gt;mesh_instruction;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_mesh_instruction, ((struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_t_6));
      __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0903</span>:                 <span class="n">mesh_instruction</span><span class="o">.</span><span class="n">flag_update</span><span class="p">()</span></pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_v_mesh_instruction-&gt;__pyx_base.__pyx_base.__pyx_vtab)-&gt;__pyx_base.__pyx_base.flag_update(((struct __pyx_obj_4kivy_8graphics_12instructions_Instruction *)__pyx_v_mesh_instruction), 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 903, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0904</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0905</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0906</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0907</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">RotateColorRenderer</span><span class="p">(</span><span class="n">Renderer</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotateColorRenderer {
  struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer __pyx_base;
};
static struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotateColorRenderer *__pyx_vtabptr_11kivent_core_7systems_9renderers_RotateColorRenderer;

</pre><pre class="cython line score-0">&#xA0;<span class="">0908</span>:     <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0909</span>: <span class="sd">    Processing Depends On: PositionSystem2D, RotateSystem2D,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0910</span>: <span class="sd">    ColorSystem, RotateColorRenderer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0911</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0912</span>: <span class="sd">    The renderer draws with the VertexFormat7F4UB:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0913</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0914</span>: <span class="sd">    .. code-block:: cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0915</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0916</span>: <span class="sd">        ctypedef struct VertexFormat7F:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0917</span>: <span class="sd">            GLfloat[2] pos</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0918</span>: <span class="sd">            GLfloat[2] uvs</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0919</span>: <span class="sd">            GLfloat rot</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0920</span>: <span class="sd">            GLfloat[2] center</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0921</span>: <span class="sd">            GLubyte[4] v_color</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0922</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0923</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0924</span>: <span class="sd">    This renderer draws every entity with rotation data suitable</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0925</span>: <span class="sd">    for use with entities using the CymunkPhysics GameSystems. </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0926</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0927</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-41" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0928</span>:     <span class="n">system_names</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">([</span><span class="s">&#39;rotate_color_renderer&#39;</span><span class="p">,</span> <span class="s">&#39;position&#39;</span><span class="p">,</span></pre>
<pre class='cython code score-41 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 928, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(4);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 928, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_rotate_color_renderer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_rotate_color_renderer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_n_s_rotate_color_renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_n_s_position);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_rotate);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_rotate);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_n_s_rotate);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_color);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_color);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 3, __pyx_n_s_color);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 928, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorRenderer-&gt;tp_dict, __pyx_n_s_system_names, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 928, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">0929</span>:         <span class="s">&#39;rotate&#39;</span><span class="p">,</span> <span class="s">&#39;color&#39;</span><span class="p">])</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0930</span>:     <span class="n">system_id</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;rotate_color_renderer&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 930, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_rotate_color_renderer) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_rotate_color_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 930, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorRenderer-&gt;tp_dict, __pyx_n_s_system_id, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 930, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorRenderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0931</span>:     <span class="n">vertex_format_size</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat7F4UB</span><span class="p">))</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 931, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 931, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 931, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorRenderer-&gt;tp_dict, __pyx_n_s_vertex_format_size, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 931, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">0932</span>: </pre>
<pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0933</span>:     <span class="k">cdef</span> <span class="kt">void</span>* <span class="nf">setup_batch_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Buffer</span> <span class="n">master_buffer</span><span class="p">)</span> <span class="k">except</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-11 '>static void *__pyx_f_11kivent_core_7systems_9renderers_19RotateColorRenderer_setup_batch_manager(struct __pyx_obj_11kivent_core_7systems_9renderers_RotateColorRenderer *__pyx_v_self, struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *__pyx_v_master_buffer) {
  struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *__pyx_v_batch_vertex_format = 0;
  PyObject *__pyx_v_x = NULL;
  void *__pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("setup_batch_manager", 0);
  <span class='trace'>__Pyx_TraceCall</span>("setup_batch_manager", __pyx_f[1], 933, 0, <span class='error_goto'>__PYX_ERR(1, 933, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotateColorRenderer.setup_batch_manager", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_vertex_format);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_x);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0934</span>:         <span class="k">cdef</span> <span class="kt">KEVertexFormat</span> <span class="nf">batch_vertex_format</span> <span class="o">=</span> <span class="n">KEVertexFormat</span><span class="p">(</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 934, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
/*  */
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PySequence_Tuple</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 934, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_2, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 934, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_13vertex_format_KEVertexFormat), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 934, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_batch_vertex_format = ((struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0935</span>:             <span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat7F4UB</span><span class="p">),</span> <span class="o">*</span><span class="n">vertex_format_7f4ub</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 935, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/*  */
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_vertex_format_7f4ub);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 935, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0936</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span> <span class="o">=</span> <span class="n">BatchManager</span><span class="p">(</span></pre>
<pre class='cython code score-23 '>  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(10);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 936, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, ((PyObject *)__pyx_v_batch_vertex_format));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, ((PyObject *)__pyx_v_master_buffer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_triangles);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_triangles);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 5, __pyx_n_s_triangles);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 6, __pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 7, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 8, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 9, __pyx_t_5);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_4 = 0;
  __pyx_t_6 = 0;
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_8batching_BatchManager), __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 936, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager));
  __pyx_v_self-&gt;__pyx_base.batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_5);
  __pyx_t_5 = 0;
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0937</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">size_of_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_count</span><span class="p">,</span></pre>
<pre class='cython code score-6 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_size_of_batches);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 937, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_max_batches);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 937, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_frame_count);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 937, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class="cython line score-0">&#xA0;<span class="">0938</span>:             <span class="n">batch_vertex_format</span><span class="p">,</span> <span class="n">master_buffer</span><span class="p">,</span> <span class="s">&#39;triangles&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span></pre>
<pre class="cython line score-53" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0939</span>:             <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_names</span><span class="p">],</span></pre>
<pre class='cython code score-53 '>  __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 939, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_names);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 939, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_5)) || <span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_5)) {
    __pyx_t_6 = __pyx_t_5; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_7 = -1; __pyx_t_6 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 939, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = Py_TYPE(__pyx_t_6)-&gt;tp_iternext;<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(1, 939, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_6))) {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 939, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 939, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 939, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 939, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_8(__pyx_t_6);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = <span class='py_c_api'>PyErr_Occurred</span>();
        if (exc_type) {
          if (likely(<span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(exc_type, PyExc_StopIteration))) <span class='py_c_api'>PyErr_Clear</span>();
          else <span class='error_goto'>__PYX_ERR(1, 939, __pyx_L1_error)</span>
        }
        break;
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_x, __pyx_t_5);
    __pyx_t_5 = 0;
    if (unlikely(<span class='pyx_c_api'>__Pyx_ListComp_Append</span>(__pyx_t_4, (PyObject*)__pyx_v_x))) <span class='error_goto'>__PYX_ERR(1, 939, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0940</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">smallest_vertex_count</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_smallest_vertex_count);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 940, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 940, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0941</span>:         <span class="k">return</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-0 '>  __pyx_r = ((void *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0942</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">0943</span>: </pre>
<pre class="cython line score-38" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0944</span>:     <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-38 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_19RotateColorRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_19RotateColorRenderer_update[] = "RotateColorRenderer.update(self, force_update, dt)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_19RotateColorRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_force_update = 0;
  CYTHON_UNUSED PyObject *__pyx_v_dt = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_force_update,&amp;__pyx_n_s_dt,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_force_update)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 944, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "update") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 944, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_force_update = values[0];
    __pyx_v_dt = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 944, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotateColorRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_19RotateColorRenderer_update(((struct __pyx_obj_11kivent_core_7systems_9renderers_RotateColorRenderer *)__pyx_v_self), __pyx_v_force_update, __pyx_v_dt);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_19RotateColorRenderer_update(struct __pyx_obj_11kivent_core_7systems_9renderers_RotateColorRenderer *__pyx_v_self, PyObject *__pyx_v_force_update, CYTHON_UNUSED PyObject *__pyx_v_dt) {
  struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *__pyx_v_batch = 0;
  PyObject *__pyx_v_batches = 0;
  unsigned int __pyx_v_batch_key;
  unsigned int __pyx_v_index_offset;
  unsigned int __pyx_v_vert_offset;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_render_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_pos_comp;
  __pyx_t_11kivent_core_7systems_14rotate_systems_RotateStruct2D *__pyx_v_rot_comp;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F4UB *__pyx_v_frame_data;
  GLushort *__pyx_v_frame_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F4UB *__pyx_v_vertex;
  __pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *__pyx_v_color_comp;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  GLushort *__pyx_v_model_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *__pyx_v_model_vertices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F __pyx_v_model_vertex;
  unsigned int __pyx_v_used;
  unsigned int __pyx_v_i;
  unsigned int __pyx_v_ri;
  unsigned int __pyx_v_component_count;
  unsigned int __pyx_v_n;
  unsigned int __pyx_v_t;
  struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *__pyx_v_entity_components = 0;
  struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *__pyx_v_batch_manager = 0;
  PyObject *__pyx_v_batch_groups = 0;
  struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *__pyx_v_mesh_instruction = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *__pyx_v_components_block = 0;
  void **__pyx_v_component_data;
  int __pyx_v_static_rendering;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("update", __pyx_f[1], 944, 0, <span class='error_goto'>__PYX_ERR(1, 944, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotateColorRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batches);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_groups);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_mesh_instruction);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components_block);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">0945</span>:         <span class="k">cdef</span> <span class="kt">IndexedBatch</span> <span class="nf">batch</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0946</span>:         <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">batches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0947</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">batch_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0948</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">index_offset</span><span class="p">,</span> <span class="nf">vert_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0949</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">render_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0950</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0951</span>:         <span class="k">cdef</span> <span class="kt">RotateStruct2D</span>* <span class="nf">rot_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0952</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat7F4UB</span>* <span class="nf">frame_data</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0953</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">frame_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0954</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat7F4UB</span>* <span class="nf">vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0955</span>:         <span class="k">cdef</span> <span class="kt">ColorStruct</span>* <span class="nf">color_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0956</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0957</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">model_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0958</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span>* <span class="nf">model_vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0959</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span> <span class="nf">model_vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0960</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">used</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">ri</span><span class="p">,</span> <span class="nf">component_count</span><span class="p">,</span> <span class="nf">n</span><span class="p">,</span> <span class="nf">t</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0961</span>:         <span class="k">cdef</span> <span class="kt">ComponentPointerAggregator</span> <span class="nf">entity_components</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0962</span>:         <span class="k">cdef</span> <span class="kt">BatchManager</span> <span class="nf">batch_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0963</span>:         <span class="k">cdef</span> <span class="kt">dict</span> <span class="nf">batch_groups</span> <span class="o">=</span> <span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_groups</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_v_batch_manager-&gt;batch_groups;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_groups = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">0964</span>:         <span class="k">cdef</span> <span class="kt">CMesh</span> <span class="nf">mesh_instruction</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0965</span>:         <span class="k">cdef</span> <span class="kt">MemoryBlock</span> <span class="nf">components_block</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">0966</span>:         <span class="k">cdef</span> <span class="kt">void</span>** <span class="nf">component_data</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0967</span>:         <span class="k">cdef</span> <span class="kt">bint</span> <span class="nf">static_rendering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_rendering</span></pre>
<pre class='cython code score-10 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_static_rendering);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 967, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 967, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_static_rendering = __pyx_t_2;
</pre><pre class="cython line score-0">&#xA0;<span class="">0968</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0969</span>:         <span class="k">for</span> <span class="n">batch_key</span> <span class="ow">in</span> <span class="n">batch_groups</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = 0;
  if (unlikely(__pyx_v_batch_groups == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
    <span class='error_goto'>__PYX_ERR(1, 969, __pyx_L1_error)</span>
  }
  __pyx_t_6 = __Pyx_dict_iterator(__pyx_v_batch_groups, 1, ((PyObject *)NULL), (&amp;__pyx_t_4), (&amp;__pyx_t_5));<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 969, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  __pyx_t_1 = __pyx_t_6;
  __pyx_t_6 = 0;
  while (1) {
    __pyx_t_7 = __Pyx_dict_iter_next(__pyx_t_1, __pyx_t_4, &amp;__pyx_t_3, &amp;__pyx_t_6, NULL, NULL, __pyx_t_5);
    if (unlikely(__pyx_t_7 == 0)) break;
    if (unlikely(__pyx_t_7 == -1)) <span class='error_goto'>__PYX_ERR(1, 969, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_6); if (unlikely((__pyx_t_8 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 969, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_batch_key = __pyx_t_8;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0970</span>:             <span class="n">batches</span> <span class="o">=</span> <span class="n">batch_groups</span><span class="p">[</span><span class="n">batch_key</span><span class="p">]</span></pre>
<pre class='cython code score-21 '>    if (unlikely(__pyx_v_batch_groups == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
      <span class='error_goto'>__PYX_ERR(1, 970, __pyx_L1_error)</span>
    }
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_batch_key);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 970, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_batch_groups, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 970, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))||((__pyx_t_9) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_9)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 970, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batches, ((PyObject*)__pyx_t_9));
    __pyx_t_9 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0971</span>:             <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span></pre>
<pre class='cython code score-15 '>    if (unlikely(__pyx_v_batches == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
      <span class='error_goto'>__PYX_ERR(1, 971, __pyx_L1_error)</span>
    }
    __pyx_t_9 = __pyx_v_batches; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_9); __pyx_t_10 = 0;
    for (;;) {
      if (__pyx_t_10 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_9)) break;
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_6 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_9, __pyx_t_10); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_10++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 971, __pyx_L1_error)</span>
      #else
      __pyx_t_6 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_9, __pyx_t_10); __pyx_t_10++;<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 971, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      #endif
      if (!(likely(((__pyx_t_6) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_6, __pyx_ptype_11kivent_core_9rendering_8batching_IndexedBatch))))) <span class='error_goto'>__PYX_ERR(1, 971, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batch, ((struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_t_6));
      __pyx_t_6 = 0;
/*  */
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0972</span>:                 <span class="k">if</span> <span class="ow">not</span> <span class="n">static_rendering</span> <span class="ow">or</span> <span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>      __pyx_t_11 = ((!(__pyx_v_static_rendering != 0)) != 0);
      if (!__pyx_t_11) {
      } else {
        __pyx_t_2 = __pyx_t_11;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_force_update); if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 972, __pyx_L1_error)</span>
      __pyx_t_2 = __pyx_t_11;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_2) {
/*  */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0973</span>:                     <span class="n">entity_components</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">entity_components</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_batch-&gt;entity_components);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_entity_components, ((struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0974</span>:                     <span class="n">components_block</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">memory_block</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_entity_components-&gt;memory_block);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_components_block, ((struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0975</span>:                     <span class="n">used</span> <span class="o">=</span> <span class="n">components_block</span><span class="o">.</span><span class="n">used_count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_components_block-&gt;__pyx_base.used_count;
        __pyx_v_used = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0976</span>:                     <span class="n">component_count</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_entity_components-&gt;count;
        __pyx_v_component_count = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0977</span>:                     <span class="n">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">**&gt;</span><span class="n">components_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>        __pyx_v_component_data = ((void **)__pyx_v_components_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0978</span>:                     <span class="n">frame_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat7F4UB</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_vbo_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_data = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F4UB *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_vbo_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0979</span>:                     <span class="n">frame_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_indices_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_indices = ((GLushort *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_indices_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0980</span>:                     <span class="n">index_offset</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_v_index_offset = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0981</span>:                     <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">used</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_used;
        __pyx_t_12 = __pyx_t_8;
        for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_12; __pyx_t_13+=1) {
          __pyx_v_t = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0982</span>:                         <span class="n">ri</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">component_count</span></pre>
<pre class='cython code score-0 '>          __pyx_v_ri = (__pyx_v_t * __pyx_v_component_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0983</span>:                         <span class="k">if</span> <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="p">]</span> <span class="o">==</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (((__pyx_v_component_data[__pyx_v_ri]) == NULL) != 0);
          if (__pyx_t_2) {
/*  */
          }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0984</span>:                             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>            goto __pyx_L10_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0985</span>:                         <span class="n">render_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>          __pyx_v_render_comp = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)(__pyx_v_component_data[(__pyx_v_ri + 0)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0986</span>:                         <span class="n">vert_offset</span> <span class="o">=</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">vert_index</span></pre>
<pre class='cython code score-0 '>          __pyx_t_7 = __pyx_v_render_comp-&gt;vert_index;
          __pyx_v_vert_offset = __pyx_t_7;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0987</span>:                         <span class="n">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">render_comp</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-2 '>          __pyx_t_6 = ((PyObject *)__pyx_v_render_comp-&gt;model);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_model, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_6));
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0988</span>:                         <span class="k">if</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (__pyx_v_render_comp-&gt;render != 0);
          if (__pyx_t_2) {
/*  */
          }
          __pyx_L10_continue:;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0989</span>:                             <span class="n">pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 1)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0990</span>:                             <span class="n">rot_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RotateStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_rot_comp = ((__pyx_t_11kivent_core_7systems_14rotate_systems_RotateStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 2)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0991</span>:                             <span class="n">color_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">ColorStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_color_comp = ((__pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *)(__pyx_v_component_data[(__pyx_v_ri + 3)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0992</span>:                             <span class="n">model_vertices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat4F</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_vertices = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *)__pyx_v_model-&gt;vertices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0">&#xA0;<span class="">0993</span>:                                 <span class="n">model</span><span class="o">.</span><span class="n">vertices_block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0994</span>:                             <span class="n">model_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">model</span><span class="o">.</span><span class="n">indices_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_indices = ((GLushort *)__pyx_v_model-&gt;indices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0995</span>:                             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_index_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0996</span>:                                 <span class="n">frame_indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_frame_indices[(__pyx_v_i + __pyx_v_index_offset)]) = ((__pyx_v_model_indices[__pyx_v_i]) + __pyx_v_vert_offset);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">0997</span>:                                     <span class="n">model_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0998</span>:                             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_vertex_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_n = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">0999</span>:                                 <span class="n">vertex</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">frame_data</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_vertex = (&amp;(__pyx_v_frame_data[(__pyx_v_n + __pyx_v_vert_offset)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1000</span>:                                 <span class="n">model_vertex</span> <span class="o">=</span> <span class="n">model_vertices</span><span class="p">[</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_model_vertex = (__pyx_v_model_vertices[__pyx_v_n]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1001</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[0]) = (__pyx_v_model_vertex.pos[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1002</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[1]) = (__pyx_v_model_vertex.pos[1]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1003</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;uvs[0]) = (__pyx_v_model_vertex.uvs[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1004</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;uvs[1]) = (__pyx_v_model_vertex.uvs[1]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1005</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">rot</span> <span class="o">=</span> <span class="n">rot_comp</span><span class="o">.</span><span class="n">r</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_rot_comp-&gt;r;
              __pyx_v_vertex-&gt;rot = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1006</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">x</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_pos_comp-&gt;x;
              (__pyx_v_vertex-&gt;center[0]) = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1007</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">y</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_pos_comp-&gt;y;
              (__pyx_v_vertex-&gt;center[1]) = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1008</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[0]) = (__pyx_v_color_comp-&gt;color[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1009</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[1]) = (__pyx_v_color_comp-&gt;color[1]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1010</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[2]) = (__pyx_v_color_comp-&gt;color[2]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1011</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[3]) = (__pyx_v_color_comp-&gt;color[3]);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1012</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1013</span>:                             <span class="n">index_offset</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-0 '>            __pyx_v_index_offset = (__pyx_v_index_offset + __pyx_v_model-&gt;_index_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1014</span>:                     <span class="n">batch</span><span class="o">.</span><span class="n">set_index_count_for_frame</span><span class="p">(</span><span class="n">index_offset</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>        ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;set_index_count_for_frame(__pyx_v_batch, __pyx_v_index_offset);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1015</span>:                 <span class="n">mesh_instruction</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">mesh_instruction</span></pre>
<pre class='cython code score-4 '>      if (!(likely(((__pyx_v_batch-&gt;mesh_instruction) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_batch-&gt;mesh_instruction, __pyx_ptype_11kivent_core_9rendering_5cmesh_CMesh))))) <span class='error_goto'>__PYX_ERR(1, 1015, __pyx_L1_error)</span>
      __pyx_t_6 = __pyx_v_batch-&gt;mesh_instruction;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_mesh_instruction, ((struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_t_6));
      __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1016</span>:                 <span class="n">mesh_instruction</span><span class="o">.</span><span class="n">flag_update</span><span class="p">()</span></pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_v_mesh_instruction-&gt;__pyx_base.__pyx_base.__pyx_vtab)-&gt;__pyx_base.__pyx_base.flag_update(((struct __pyx_obj_4kivy_8graphics_12instructions_Instruction *)__pyx_v_mesh_instruction), 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1016, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1017</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1018</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1019</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">RotateColorScaleRenderer</span><span class="p">(</span><span class="n">RotateColorRenderer</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotateColorScaleRenderer {
  struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotateColorRenderer __pyx_base;
};
static struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotateColorScaleRenderer *__pyx_vtabptr_11kivent_core_7systems_9renderers_RotateColorScaleRenderer;

</pre><pre class="cython line score-0">&#xA0;<span class="">1020</span>:     <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1021</span>: <span class="sd">    Processing Depends On: PositionSystem2D, RotateSystem2D,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1022</span>: <span class="sd">    ColorSystem, ScaleSystem2D, RotateColorRenderer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1023</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1024</span>: <span class="sd">    The renderer draws with the VertexFormat7F4UB:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1025</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1026</span>: <span class="sd">    .. code-block:: cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1027</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1028</span>: <span class="sd">        ctypedef struct VertexFormat7F:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1029</span>: <span class="sd">            GLfloat[2] pos</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1030</span>: <span class="sd">            GLfloat[2] uvs</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1031</span>: <span class="sd">            GLfloat rot</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1032</span>: <span class="sd">            GLfloat[2] center</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1033</span>: <span class="sd">            GLubyte[4] v_color</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1034</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1035</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1036</span>: <span class="sd">    This renderer draws every entity with rotation data suitable</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1037</span>: <span class="sd">    for use with entities using the CymunkPhysics GameSystems. </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1038</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1039</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-43" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1040</span>:     <span class="n">system_names</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">([</span><span class="s">&#39;rotate_color_scale_renderer&#39;</span><span class="p">,</span> <span class="s">&#39;position&#39;</span><span class="p">,</span></pre>
<pre class='cython code score-43 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1040, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1040, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_rotate_color_scale_renderer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_rotate_color_scale_renderer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_n_s_rotate_color_scale_renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_n_s_position);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_rotate);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_rotate);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_n_s_rotate);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_color);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_color);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 3, __pyx_n_s_color);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_scale);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_scale);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 4, __pyx_n_s_scale);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1040, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScaleRenderer-&gt;tp_dict, __pyx_n_s_system_names, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1040, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScaleRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">1041</span>:         <span class="s">&#39;rotate&#39;</span><span class="p">,</span> <span class="s">&#39;color&#39;</span><span class="p">,</span> <span class="s">&#39;scale&#39;</span><span class="p">])</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1042</span>:     <span class="n">system_id</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;rotate_color_scale_renderer&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1042, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_rotate_color_scale_renderer) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_rotate_color_scale_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1042, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScaleRenderer-&gt;tp_dict, __pyx_n_s_system_id, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1042, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScaleRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">1043</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1044</span>: </pre>
<pre class="cython line score-38" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1045</span>:     <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-38 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_24RotateColorScaleRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_24RotateColorScaleRenderer_update[] = "RotateColorScaleRenderer.update(self, force_update, dt)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_24RotateColorScaleRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_force_update = 0;
  CYTHON_UNUSED PyObject *__pyx_v_dt = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_force_update,&amp;__pyx_n_s_dt,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_force_update)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 1045, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "update") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1045, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_force_update = values[0];
    __pyx_v_dt = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 1045, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotateColorScaleRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_24RotateColorScaleRenderer_update(((struct __pyx_obj_11kivent_core_7systems_9renderers_RotateColorScaleRenderer *)__pyx_v_self), __pyx_v_force_update, __pyx_v_dt);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_24RotateColorScaleRenderer_update(struct __pyx_obj_11kivent_core_7systems_9renderers_RotateColorScaleRenderer *__pyx_v_self, PyObject *__pyx_v_force_update, CYTHON_UNUSED PyObject *__pyx_v_dt) {
  struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *__pyx_v_batch = 0;
  PyObject *__pyx_v_batches = 0;
  unsigned int __pyx_v_batch_key;
  unsigned int __pyx_v_index_offset;
  unsigned int __pyx_v_vert_offset;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_render_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_pos_comp;
  __pyx_t_11kivent_core_7systems_14rotate_systems_RotateStruct2D *__pyx_v_rot_comp;
  __pyx_t_11kivent_core_7systems_13scale_systems_ScaleStruct2D *__pyx_v_scale_comp;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F4UB *__pyx_v_frame_data;
  GLushort *__pyx_v_frame_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F4UB *__pyx_v_vertex;
  __pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *__pyx_v_color_comp;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  GLushort *__pyx_v_model_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *__pyx_v_model_vertices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F __pyx_v_model_vertex;
  unsigned int __pyx_v_used;
  unsigned int __pyx_v_i;
  unsigned int __pyx_v_ri;
  unsigned int __pyx_v_component_count;
  unsigned int __pyx_v_n;
  unsigned int __pyx_v_t;
  struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *__pyx_v_entity_components = 0;
  struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *__pyx_v_batch_manager = 0;
  PyObject *__pyx_v_batch_groups = 0;
  struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *__pyx_v_mesh_instruction = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *__pyx_v_components_block = 0;
  void **__pyx_v_component_data;
  int __pyx_v_static_rendering;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("update", __pyx_f[1], 1045, 0, <span class='error_goto'>__PYX_ERR(1, 1045, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotateColorScaleRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batches);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_groups);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_mesh_instruction);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components_block);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">1046</span>:         <span class="k">cdef</span> <span class="kt">IndexedBatch</span> <span class="nf">batch</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1047</span>:         <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">batches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1048</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">batch_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1049</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">index_offset</span><span class="p">,</span> <span class="nf">vert_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1050</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">render_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1051</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1052</span>:         <span class="k">cdef</span> <span class="kt">RotateStruct2D</span>* <span class="nf">rot_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1053</span>:         <span class="k">cdef</span> <span class="kt">ScaleStruct2D</span>* <span class="nf">scale_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1054</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat7F4UB</span>* <span class="nf">frame_data</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1055</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">frame_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1056</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat7F4UB</span>* <span class="nf">vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1057</span>:         <span class="k">cdef</span> <span class="kt">ColorStruct</span>* <span class="nf">color_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1058</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1059</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">model_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1060</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span>* <span class="nf">model_vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1061</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span> <span class="nf">model_vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1062</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">used</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">ri</span><span class="p">,</span> <span class="nf">component_count</span><span class="p">,</span> <span class="nf">n</span><span class="p">,</span> <span class="nf">t</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1063</span>:         <span class="k">cdef</span> <span class="kt">ComponentPointerAggregator</span> <span class="nf">entity_components</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1064</span>:         <span class="k">cdef</span> <span class="kt">BatchManager</span> <span class="nf">batch_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1065</span>:         <span class="k">cdef</span> <span class="kt">dict</span> <span class="nf">batch_groups</span> <span class="o">=</span> <span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_groups</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_v_batch_manager-&gt;batch_groups;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_groups = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1066</span>:         <span class="k">cdef</span> <span class="kt">CMesh</span> <span class="nf">mesh_instruction</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1067</span>:         <span class="k">cdef</span> <span class="kt">MemoryBlock</span> <span class="nf">components_block</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1068</span>:         <span class="k">cdef</span> <span class="kt">void</span>** <span class="nf">component_data</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1069</span>:         <span class="k">cdef</span> <span class="kt">bint</span> <span class="nf">static_rendering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_rendering</span></pre>
<pre class='cython code score-10 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_static_rendering);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1069, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1069, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_static_rendering = __pyx_t_2;
</pre><pre class="cython line score-0">&#xA0;<span class="">1070</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1071</span>:         <span class="k">for</span> <span class="n">batch_key</span> <span class="ow">in</span> <span class="n">batch_groups</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = 0;
  if (unlikely(__pyx_v_batch_groups == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
    <span class='error_goto'>__PYX_ERR(1, 1071, __pyx_L1_error)</span>
  }
  __pyx_t_6 = __Pyx_dict_iterator(__pyx_v_batch_groups, 1, ((PyObject *)NULL), (&amp;__pyx_t_4), (&amp;__pyx_t_5));<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1071, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  __pyx_t_1 = __pyx_t_6;
  __pyx_t_6 = 0;
  while (1) {
    __pyx_t_7 = __Pyx_dict_iter_next(__pyx_t_1, __pyx_t_4, &amp;__pyx_t_3, &amp;__pyx_t_6, NULL, NULL, __pyx_t_5);
    if (unlikely(__pyx_t_7 == 0)) break;
    if (unlikely(__pyx_t_7 == -1)) <span class='error_goto'>__PYX_ERR(1, 1071, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_6); if (unlikely((__pyx_t_8 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1071, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_batch_key = __pyx_t_8;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1072</span>:             <span class="n">batches</span> <span class="o">=</span> <span class="n">batch_groups</span><span class="p">[</span><span class="n">batch_key</span><span class="p">]</span></pre>
<pre class='cython code score-21 '>    if (unlikely(__pyx_v_batch_groups == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
      <span class='error_goto'>__PYX_ERR(1, 1072, __pyx_L1_error)</span>
    }
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_batch_key);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1072, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_batch_groups, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1072, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))||((__pyx_t_9) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_9)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 1072, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batches, ((PyObject*)__pyx_t_9));
    __pyx_t_9 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1073</span>:             <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span></pre>
<pre class='cython code score-15 '>    if (unlikely(__pyx_v_batches == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
      <span class='error_goto'>__PYX_ERR(1, 1073, __pyx_L1_error)</span>
    }
    __pyx_t_9 = __pyx_v_batches; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_9); __pyx_t_10 = 0;
    for (;;) {
      if (__pyx_t_10 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_9)) break;
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_6 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_9, __pyx_t_10); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_10++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1073, __pyx_L1_error)</span>
      #else
      __pyx_t_6 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_9, __pyx_t_10); __pyx_t_10++;<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1073, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      #endif
      if (!(likely(((__pyx_t_6) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_6, __pyx_ptype_11kivent_core_9rendering_8batching_IndexedBatch))))) <span class='error_goto'>__PYX_ERR(1, 1073, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batch, ((struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_t_6));
      __pyx_t_6 = 0;
/*  */
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1074</span>:                 <span class="k">if</span> <span class="ow">not</span> <span class="n">static_rendering</span> <span class="ow">or</span> <span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>      __pyx_t_11 = ((!(__pyx_v_static_rendering != 0)) != 0);
      if (!__pyx_t_11) {
      } else {
        __pyx_t_2 = __pyx_t_11;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_force_update); if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1074, __pyx_L1_error)</span>
      __pyx_t_2 = __pyx_t_11;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_2) {
/*  */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1075</span>:                     <span class="n">entity_components</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">entity_components</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_batch-&gt;entity_components);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_entity_components, ((struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1076</span>:                     <span class="n">components_block</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">memory_block</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_entity_components-&gt;memory_block);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_components_block, ((struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1077</span>:                     <span class="n">used</span> <span class="o">=</span> <span class="n">components_block</span><span class="o">.</span><span class="n">used_count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_components_block-&gt;__pyx_base.used_count;
        __pyx_v_used = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1078</span>:                     <span class="n">component_count</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_entity_components-&gt;count;
        __pyx_v_component_count = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1079</span>:                     <span class="n">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">**&gt;</span><span class="n">components_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>        __pyx_v_component_data = ((void **)__pyx_v_components_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1080</span>:                     <span class="n">frame_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat7F4UB</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_vbo_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_data = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat7F4UB *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_vbo_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1081</span>:                     <span class="n">frame_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_indices_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_indices = ((GLushort *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_indices_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1082</span>:                     <span class="n">index_offset</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_v_index_offset = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1083</span>:                     <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">used</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_used;
        __pyx_t_12 = __pyx_t_8;
        for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_12; __pyx_t_13+=1) {
          __pyx_v_t = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1084</span>:                         <span class="n">ri</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">component_count</span></pre>
<pre class='cython code score-0 '>          __pyx_v_ri = (__pyx_v_t * __pyx_v_component_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1085</span>:                         <span class="k">if</span> <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="p">]</span> <span class="o">==</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (((__pyx_v_component_data[__pyx_v_ri]) == NULL) != 0);
          if (__pyx_t_2) {
/*  */
          }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1086</span>:                             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>            goto __pyx_L10_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1087</span>:                         <span class="n">render_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>          __pyx_v_render_comp = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)(__pyx_v_component_data[(__pyx_v_ri + 0)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1088</span>:                         <span class="n">vert_offset</span> <span class="o">=</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">vert_index</span></pre>
<pre class='cython code score-0 '>          __pyx_t_7 = __pyx_v_render_comp-&gt;vert_index;
          __pyx_v_vert_offset = __pyx_t_7;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1089</span>:                         <span class="n">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">render_comp</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-2 '>          __pyx_t_6 = ((PyObject *)__pyx_v_render_comp-&gt;model);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_model, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_6));
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1090</span>:                         <span class="k">if</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (__pyx_v_render_comp-&gt;render != 0);
          if (__pyx_t_2) {
/*  */
          }
          __pyx_L10_continue:;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1091</span>:                             <span class="n">pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 1)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1092</span>:                             <span class="n">rot_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RotateStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_rot_comp = ((__pyx_t_11kivent_core_7systems_14rotate_systems_RotateStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 2)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1093</span>:                             <span class="n">color_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">ColorStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_color_comp = ((__pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *)(__pyx_v_component_data[(__pyx_v_ri + 3)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1094</span>:                             <span class="n">scale_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">ScaleStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">4</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_scale_comp = ((__pyx_t_11kivent_core_7systems_13scale_systems_ScaleStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 4)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1095</span>:                             <span class="n">model_vertices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat4F</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_vertices = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *)__pyx_v_model-&gt;vertices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0">&#xA0;<span class="">1096</span>:                                 <span class="n">model</span><span class="o">.</span><span class="n">vertices_block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1097</span>:                             <span class="n">model_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">model</span><span class="o">.</span><span class="n">indices_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_indices = ((GLushort *)__pyx_v_model-&gt;indices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1098</span>:                             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_index_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1099</span>:                                 <span class="n">frame_indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_frame_indices[(__pyx_v_i + __pyx_v_index_offset)]) = ((__pyx_v_model_indices[__pyx_v_i]) + __pyx_v_vert_offset);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1100</span>:                                     <span class="n">model_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1101</span>:                             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_vertex_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_n = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1102</span>:                                 <span class="n">vertex</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">frame_data</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_vertex = (&amp;(__pyx_v_frame_data[(__pyx_v_n + __pyx_v_vert_offset)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1103</span>:                                 <span class="n">model_vertex</span> <span class="o">=</span> <span class="n">model_vertices</span><span class="p">[</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_model_vertex = (__pyx_v_model_vertices[__pyx_v_n]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1104</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_comp</span><span class="o">.</span><span class="n">sx</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[0]) = ((__pyx_v_model_vertex.pos[0]) * __pyx_v_scale_comp-&gt;sx);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1105</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_comp</span><span class="o">.</span><span class="n">sy</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[1]) = ((__pyx_v_model_vertex.pos[1]) * __pyx_v_scale_comp-&gt;sy);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1106</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;uvs[0]) = (__pyx_v_model_vertex.uvs[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1107</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;uvs[1]) = (__pyx_v_model_vertex.uvs[1]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1108</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">rot</span> <span class="o">=</span> <span class="n">rot_comp</span><span class="o">.</span><span class="n">r</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_rot_comp-&gt;r;
              __pyx_v_vertex-&gt;rot = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1109</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">x</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_pos_comp-&gt;x;
              (__pyx_v_vertex-&gt;center[0]) = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1110</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">y</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_pos_comp-&gt;y;
              (__pyx_v_vertex-&gt;center[1]) = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1111</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[0]) = (__pyx_v_color_comp-&gt;color[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1112</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[1]) = (__pyx_v_color_comp-&gt;color[1]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1113</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[2]) = (__pyx_v_color_comp-&gt;color[2]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1114</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[3]) = (__pyx_v_color_comp-&gt;color[3]);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1115</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1116</span>:                             <span class="n">index_offset</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-0 '>            __pyx_v_index_offset = (__pyx_v_index_offset + __pyx_v_model-&gt;_index_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1117</span>:                     <span class="n">batch</span><span class="o">.</span><span class="n">set_index_count_for_frame</span><span class="p">(</span><span class="n">index_offset</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>        ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;set_index_count_for_frame(__pyx_v_batch, __pyx_v_index_offset);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1118</span>:                 <span class="n">mesh_instruction</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">mesh_instruction</span></pre>
<pre class='cython code score-4 '>      if (!(likely(((__pyx_v_batch-&gt;mesh_instruction) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_batch-&gt;mesh_instruction, __pyx_ptype_11kivent_core_9rendering_5cmesh_CMesh))))) <span class='error_goto'>__PYX_ERR(1, 1118, __pyx_L1_error)</span>
      __pyx_t_6 = __pyx_v_batch-&gt;mesh_instruction;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_mesh_instruction, ((struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_t_6));
      __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1119</span>:                 <span class="n">mesh_instruction</span><span class="o">.</span><span class="n">flag_update</span><span class="p">()</span></pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_v_mesh_instruction-&gt;__pyx_base.__pyx_base.__pyx_vtab)-&gt;__pyx_base.__pyx_base.flag_update(((struct __pyx_obj_4kivy_8graphics_12instructions_Instruction *)__pyx_v_mesh_instruction), 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1119, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1120</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1121</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1122</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1123</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">ColorRenderer</span><span class="p">(</span><span class="n">Renderer</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_ColorRenderer {
  struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer __pyx_base;
};
static struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_ColorRenderer *__pyx_vtabptr_11kivent_core_7systems_9renderers_ColorRenderer;

</pre><pre class="cython line score-0">&#xA0;<span class="">1124</span>:     <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1125</span>: <span class="sd">    Processing Depends On: PositionSystem2D, ColorSystem, ColorRenderer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1126</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1127</span>: <span class="sd">    The renderer draws with the VertexFormat8F:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1128</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1129</span>: <span class="sd">    .. code-block:: cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1130</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1131</span>: <span class="sd">        ctypedef struct VertexFormat8F:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1132</span>: <span class="sd">            GLfloat[2] pos</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1133</span>: <span class="sd">            GLfloat[2] uvs</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1134</span>: <span class="sd">            GLubyte[4] v_color</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1135</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1136</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-39" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1137</span>:     <span class="n">system_names</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">([</span><span class="s">&#39;color_renderer&#39;</span><span class="p">,</span> <span class="s">&#39;position&#39;</span><span class="p">,</span></pre>
<pre class='cython code score-39 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1137, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1137, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_color_renderer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_color_renderer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_n_s_color_renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_n_s_position);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_color);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_color);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_n_s_color);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1137, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ColorRenderer-&gt;tp_dict, __pyx_n_s_system_names, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1137, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_ColorRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">1138</span>:         <span class="s">&#39;color&#39;</span><span class="p">])</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1139</span>:     <span class="n">system_id</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;color_renderer&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1139, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_color_renderer) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_color_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1139, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ColorRenderer-&gt;tp_dict, __pyx_n_s_system_id, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1139, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_ColorRenderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1140</span>:     <span class="n">vertex_format_size</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat4F4UB</span><span class="p">))</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1140, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1140, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1140, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ColorRenderer-&gt;tp_dict, __pyx_n_s_vertex_format_size, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1140, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_ColorRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">1141</span>: </pre>
<pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1142</span>:     <span class="k">cdef</span> <span class="kt">void</span>* <span class="nf">setup_batch_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Buffer</span> <span class="n">master_buffer</span><span class="p">)</span> <span class="k">except</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-11 '>static void *__pyx_f_11kivent_core_7systems_9renderers_13ColorRenderer_setup_batch_manager(struct __pyx_obj_11kivent_core_7systems_9renderers_ColorRenderer *__pyx_v_self, struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *__pyx_v_master_buffer) {
  struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *__pyx_v_batch_vertex_format = 0;
  PyObject *__pyx_v_x = NULL;
  void *__pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("setup_batch_manager", 0);
  <span class='trace'>__Pyx_TraceCall</span>("setup_batch_manager", __pyx_f[1], 1142, 0, <span class='error_goto'>__PYX_ERR(1, 1142, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.ColorRenderer.setup_batch_manager", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_vertex_format);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_x);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1143</span>:         <span class="k">cdef</span> <span class="kt">KEVertexFormat</span> <span class="nf">batch_vertex_format</span> <span class="o">=</span> <span class="n">KEVertexFormat</span><span class="p">(</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1143, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
/*  */
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PySequence_Tuple</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1143, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_2, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1143, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_13vertex_format_KEVertexFormat), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1143, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_batch_vertex_format = ((struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1144</span>:             <span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat4F4UB</span><span class="p">),</span> <span class="o">*</span><span class="n">vertex_format_4f4ub</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1144, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/*  */
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_vertex_format_4f4ub);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1144, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1145</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span> <span class="o">=</span> <span class="n">BatchManager</span><span class="p">(</span></pre>
<pre class='cython code score-23 '>  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(10);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1145, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, ((PyObject *)__pyx_v_batch_vertex_format));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, ((PyObject *)__pyx_v_master_buffer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_triangles);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_triangles);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 5, __pyx_n_s_triangles);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 6, __pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 7, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 8, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 9, __pyx_t_5);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_4 = 0;
  __pyx_t_6 = 0;
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_8batching_BatchManager), __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1145, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager));
  __pyx_v_self-&gt;__pyx_base.batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_5);
  __pyx_t_5 = 0;
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1146</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">size_of_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_count</span><span class="p">,</span></pre>
<pre class='cython code score-6 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_size_of_batches);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1146, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_max_batches);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1146, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_frame_count);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1146, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class="cython line score-0">&#xA0;<span class="">1147</span>:             <span class="n">batch_vertex_format</span><span class="p">,</span> <span class="n">master_buffer</span><span class="p">,</span> <span class="s">&#39;triangles&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span></pre>
<pre class="cython line score-53" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1148</span>:             <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_names</span><span class="p">],</span></pre>
<pre class='cython code score-53 '>  __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 1148, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_names);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1148, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_5)) || <span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_5)) {
    __pyx_t_6 = __pyx_t_5; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_7 = -1; __pyx_t_6 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1148, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = Py_TYPE(__pyx_t_6)-&gt;tp_iternext;<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(1, 1148, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_6))) {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1148, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1148, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1148, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1148, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_8(__pyx_t_6);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = <span class='py_c_api'>PyErr_Occurred</span>();
        if (exc_type) {
          if (likely(<span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(exc_type, PyExc_StopIteration))) <span class='py_c_api'>PyErr_Clear</span>();
          else <span class='error_goto'>__PYX_ERR(1, 1148, __pyx_L1_error)</span>
        }
        break;
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_x, __pyx_t_5);
    __pyx_t_5 = 0;
    if (unlikely(<span class='pyx_c_api'>__Pyx_ListComp_Append</span>(__pyx_t_4, (PyObject*)__pyx_v_x))) <span class='error_goto'>__PYX_ERR(1, 1148, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1149</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">smallest_vertex_count</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_smallest_vertex_count);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1149, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1149, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1150</span>:         <span class="k">return</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-0 '>  __pyx_r = ((void *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1151</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1152</span>: </pre>
<pre class="cython line score-38" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1153</span>:     <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-38 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_13ColorRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_13ColorRenderer_update[] = "ColorRenderer.update(self, force_update, dt)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_13ColorRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_force_update = 0;
  CYTHON_UNUSED PyObject *__pyx_v_dt = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_force_update,&amp;__pyx_n_s_dt,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_force_update)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 1153, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "update") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1153, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_force_update = values[0];
    __pyx_v_dt = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 1153, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.ColorRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_13ColorRenderer_update(((struct __pyx_obj_11kivent_core_7systems_9renderers_ColorRenderer *)__pyx_v_self), __pyx_v_force_update, __pyx_v_dt);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_13ColorRenderer_update(struct __pyx_obj_11kivent_core_7systems_9renderers_ColorRenderer *__pyx_v_self, PyObject *__pyx_v_force_update, CYTHON_UNUSED PyObject *__pyx_v_dt) {
  struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *__pyx_v_batch = 0;
  PyObject *__pyx_v_batches = 0;
  unsigned int __pyx_v_batch_key;
  unsigned int __pyx_v_index_offset;
  unsigned int __pyx_v_vert_offset;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_render_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_pos_comp;
  __pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *__pyx_v_color_comp;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F4UB *__pyx_v_frame_data;
  GLushort *__pyx_v_frame_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F4UB *__pyx_v_vertex;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  GLushort *__pyx_v_model_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *__pyx_v_model_vertices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F __pyx_v_model_vertex;
  unsigned int __pyx_v_used;
  unsigned int __pyx_v_i;
  unsigned int __pyx_v_ri;
  unsigned int __pyx_v_component_count;
  unsigned int __pyx_v_n;
  unsigned int __pyx_v_t;
  struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *__pyx_v_entity_components = 0;
  struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *__pyx_v_batch_manager = 0;
  PyObject *__pyx_v_batch_groups = 0;
  struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *__pyx_v_mesh_instruction = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *__pyx_v_components_block = 0;
  void **__pyx_v_component_data;
  int __pyx_v_static_rendering;
  int __pyx_v_ii;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("update", __pyx_f[1], 1153, 0, <span class='error_goto'>__PYX_ERR(1, 1153, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.ColorRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batches);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_groups);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_mesh_instruction);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components_block);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">1154</span>:         <span class="k">cdef</span> <span class="kt">IndexedBatch</span> <span class="nf">batch</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1155</span>:         <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">batches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1156</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">batch_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1157</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">index_offset</span><span class="p">,</span> <span class="nf">vert_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1158</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">render_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1159</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1160</span>:         <span class="k">cdef</span> <span class="kt">ColorStruct</span>* <span class="nf">color_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1161</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F4UB</span>* <span class="nf">frame_data</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1162</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">frame_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1163</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F4UB</span>* <span class="nf">vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1164</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1165</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">model_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1166</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span>* <span class="nf">model_vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1167</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat4F</span> <span class="nf">model_vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1168</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">used</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">ri</span><span class="p">,</span> <span class="nf">component_count</span><span class="p">,</span> <span class="nf">n</span><span class="p">,</span> <span class="nf">t</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1169</span>:         <span class="k">cdef</span> <span class="kt">ComponentPointerAggregator</span> <span class="nf">entity_components</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1170</span>:         <span class="k">cdef</span> <span class="kt">BatchManager</span> <span class="nf">batch_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1171</span>:         <span class="k">cdef</span> <span class="kt">dict</span> <span class="nf">batch_groups</span> <span class="o">=</span> <span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_groups</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_v_batch_manager-&gt;batch_groups;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_groups = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1172</span>:         <span class="k">cdef</span> <span class="kt">CMesh</span> <span class="nf">mesh_instruction</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1173</span>:         <span class="k">cdef</span> <span class="kt">MemoryBlock</span> <span class="nf">components_block</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1174</span>:         <span class="k">cdef</span> <span class="kt">void</span>** <span class="nf">component_data</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1175</span>:         <span class="k">cdef</span> <span class="kt">bint</span> <span class="nf">static_rendering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_rendering</span></pre>
<pre class='cython code score-10 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_static_rendering);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1175, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1175, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_static_rendering = __pyx_t_2;
</pre><pre class="cython line score-0">&#xA0;<span class="">1176</span>:         <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">ii</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1177</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1178</span>:         <span class="k">for</span> <span class="n">batch_key</span> <span class="ow">in</span> <span class="n">batch_groups</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = 0;
  if (unlikely(__pyx_v_batch_groups == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
    <span class='error_goto'>__PYX_ERR(1, 1178, __pyx_L1_error)</span>
  }
  __pyx_t_6 = __Pyx_dict_iterator(__pyx_v_batch_groups, 1, ((PyObject *)NULL), (&amp;__pyx_t_4), (&amp;__pyx_t_5));<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1178, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  __pyx_t_1 = __pyx_t_6;
  __pyx_t_6 = 0;
  while (1) {
    __pyx_t_7 = __Pyx_dict_iter_next(__pyx_t_1, __pyx_t_4, &amp;__pyx_t_3, &amp;__pyx_t_6, NULL, NULL, __pyx_t_5);
    if (unlikely(__pyx_t_7 == 0)) break;
    if (unlikely(__pyx_t_7 == -1)) <span class='error_goto'>__PYX_ERR(1, 1178, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_6); if (unlikely((__pyx_t_8 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1178, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_batch_key = __pyx_t_8;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1179</span>:             <span class="n">batches</span> <span class="o">=</span> <span class="n">batch_groups</span><span class="p">[</span><span class="n">batch_key</span><span class="p">]</span></pre>
<pre class='cython code score-21 '>    if (unlikely(__pyx_v_batch_groups == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
      <span class='error_goto'>__PYX_ERR(1, 1179, __pyx_L1_error)</span>
    }
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_batch_key);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1179, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_batch_groups, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1179, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))||((__pyx_t_9) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_9)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 1179, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batches, ((PyObject*)__pyx_t_9));
    __pyx_t_9 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1180</span>:             <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span></pre>
<pre class='cython code score-15 '>    if (unlikely(__pyx_v_batches == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
      <span class='error_goto'>__PYX_ERR(1, 1180, __pyx_L1_error)</span>
    }
    __pyx_t_9 = __pyx_v_batches; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_9); __pyx_t_10 = 0;
    for (;;) {
      if (__pyx_t_10 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_9)) break;
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_6 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_9, __pyx_t_10); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_10++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1180, __pyx_L1_error)</span>
      #else
      __pyx_t_6 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_9, __pyx_t_10); __pyx_t_10++;<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1180, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      #endif
      if (!(likely(((__pyx_t_6) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_6, __pyx_ptype_11kivent_core_9rendering_8batching_IndexedBatch))))) <span class='error_goto'>__PYX_ERR(1, 1180, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batch, ((struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_t_6));
      __pyx_t_6 = 0;
/*  */
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1181</span>:                 <span class="k">if</span> <span class="ow">not</span> <span class="n">static_rendering</span> <span class="ow">or</span> <span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>      __pyx_t_11 = ((!(__pyx_v_static_rendering != 0)) != 0);
      if (!__pyx_t_11) {
      } else {
        __pyx_t_2 = __pyx_t_11;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_force_update); if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1181, __pyx_L1_error)</span>
      __pyx_t_2 = __pyx_t_11;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_2) {
/*  */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1182</span>:                     <span class="n">entity_components</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">entity_components</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_batch-&gt;entity_components);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_entity_components, ((struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1183</span>:                     <span class="n">components_block</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">memory_block</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_entity_components-&gt;memory_block);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_components_block, ((struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1184</span>:                     <span class="n">used</span> <span class="o">=</span> <span class="n">components_block</span><span class="o">.</span><span class="n">used_count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_components_block-&gt;__pyx_base.used_count;
        __pyx_v_used = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1185</span>:                     <span class="n">component_count</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_entity_components-&gt;count;
        __pyx_v_component_count = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1186</span>:                     <span class="n">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">**&gt;</span><span class="n">components_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>        __pyx_v_component_data = ((void **)__pyx_v_components_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1187</span>:                     <span class="n">frame_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat4F4UB</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_vbo_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_data = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F4UB *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_vbo_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1188</span>:                     <span class="n">frame_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_indices_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_indices = ((GLushort *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_indices_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1189</span>:                     <span class="n">index_offset</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_v_index_offset = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1190</span>:                     <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">used</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_used;
        __pyx_t_12 = __pyx_t_8;
        for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_12; __pyx_t_13+=1) {
          __pyx_v_t = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1191</span>:                         <span class="n">ri</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">component_count</span></pre>
<pre class='cython code score-0 '>          __pyx_v_ri = (__pyx_v_t * __pyx_v_component_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1192</span>:                         <span class="k">if</span> <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="p">]</span> <span class="o">==</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (((__pyx_v_component_data[__pyx_v_ri]) == NULL) != 0);
          if (__pyx_t_2) {
/*  */
          }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1193</span>:                             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>            goto __pyx_L10_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1194</span>:                         <span class="n">render_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span></pre>
<pre class='cython code score-0 '>          __pyx_v_render_comp = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)(__pyx_v_component_data[(__pyx_v_ri + 0)]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1195</span>:                             <span class="n">ri</span><span class="o">+</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1196</span>:                         <span class="n">vert_offset</span> <span class="o">=</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">vert_index</span></pre>
<pre class='cython code score-0 '>          __pyx_t_7 = __pyx_v_render_comp-&gt;vert_index;
          __pyx_v_vert_offset = __pyx_t_7;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1197</span>:                         <span class="n">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">render_comp</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-2 '>          __pyx_t_6 = ((PyObject *)__pyx_v_render_comp-&gt;model);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_model, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_6));
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1198</span>:                         <span class="k">if</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (__pyx_v_render_comp-&gt;render != 0);
          if (__pyx_t_2) {
/*  */
          }
          __pyx_L10_continue:;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1199</span>:                             <span class="n">pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span></pre>
<pre class='cython code score-0 '>            __pyx_v_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 1)]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1200</span>:                                 <span class="n">ri</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1201</span>:                             <span class="n">color_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">ColorStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span></pre>
<pre class='cython code score-0 '>            __pyx_v_color_comp = ((__pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *)(__pyx_v_component_data[(__pyx_v_ri + 2)]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1202</span>:                                 <span class="n">ri</span><span class="o">+</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1203</span>:                             <span class="n">model_vertices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat4F</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_vertices = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat4F *)__pyx_v_model-&gt;vertices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0">&#xA0;<span class="">1204</span>:                                 <span class="n">model</span><span class="o">.</span><span class="n">vertices_block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1205</span>:                             <span class="n">model_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">model</span><span class="o">.</span><span class="n">indices_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_indices = ((GLushort *)__pyx_v_model-&gt;indices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1206</span>:                             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_index_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1207</span>:                                 <span class="n">frame_indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_frame_indices[(__pyx_v_i + __pyx_v_index_offset)]) = ((__pyx_v_model_indices[__pyx_v_i]) + __pyx_v_vert_offset);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1208</span>:                                     <span class="n">model_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1209</span>:                             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_vertex_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_n = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1210</span>:                                 <span class="n">vertex</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">frame_data</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_vertex = (&amp;(__pyx_v_frame_data[(__pyx_v_n + __pyx_v_vert_offset)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1211</span>:                                 <span class="n">model_vertex</span> <span class="o">=</span> <span class="n">model_vertices</span><span class="p">[</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_model_vertex = (__pyx_v_model_vertices[__pyx_v_n]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1212</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[0]) = (__pyx_v_pos_comp-&gt;x + (__pyx_v_model_vertex.pos[0]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1213</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[1]) = (__pyx_v_pos_comp-&gt;y + (__pyx_v_model_vertex.pos[1]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1214</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;uvs[0]) = (__pyx_v_model_vertex.uvs[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1215</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">uvs</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;uvs[1]) = (__pyx_v_model_vertex.uvs[1]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1216</span>:                                 <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">4</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>              for (__pyx_t_7 = 0; __pyx_t_7 &lt; 4; __pyx_t_7+=1) {
                __pyx_v_ii = __pyx_t_7;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1217</span>:                                     <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>                (__pyx_v_vertex-&gt;v_color[__pyx_v_ii]) = (__pyx_v_color_comp-&gt;color[__pyx_v_ii]);
              }
            }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1218</span>:                             <span class="n">index_offset</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-0 '>            __pyx_v_index_offset = (__pyx_v_index_offset + __pyx_v_model-&gt;_index_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1219</span>:                     <span class="n">batch</span><span class="o">.</span><span class="n">set_index_count_for_frame</span><span class="p">(</span><span class="n">index_offset</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>        ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;set_index_count_for_frame(__pyx_v_batch, __pyx_v_index_offset);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1220</span>:                 <span class="n">mesh_instruction</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">mesh_instruction</span></pre>
<pre class='cython code score-4 '>      if (!(likely(((__pyx_v_batch-&gt;mesh_instruction) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_batch-&gt;mesh_instruction, __pyx_ptype_11kivent_core_9rendering_5cmesh_CMesh))))) <span class='error_goto'>__PYX_ERR(1, 1220, __pyx_L1_error)</span>
      __pyx_t_6 = __pyx_v_batch-&gt;mesh_instruction;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_mesh_instruction, ((struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_t_6));
      __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1221</span>:                 <span class="n">mesh_instruction</span><span class="o">.</span><span class="n">flag_update</span><span class="p">()</span></pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_v_mesh_instruction-&gt;__pyx_base.__pyx_base.__pyx_vtab)-&gt;__pyx_base.__pyx_base.flag_update(((struct __pyx_obj_4kivy_8graphics_12instructions_Instruction *)__pyx_v_mesh_instruction), 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1221, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1222</span>: </pre>
<pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1223</span>: <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">blend_integer_colors</span><span class="p">(</span><span class="nb">unsigned</span> <span class="n">char</span> <span class="n">color1</span><span class="p">,</span></pre>
<pre class='cython code score-2 '>static unsigned char __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors(unsigned char __pyx_v_color1, unsigned char __pyx_v_color2) {
  unsigned char __pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("blend_integer_colors", 0);
  <span class='trace'>__Pyx_TraceCall</span>("blend_integer_colors", __pyx_f[1], 1223, 0, <span class='error_goto'>__PYX_ERR(1, 1223, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_c_api'>__Pyx_WriteUnraisable</span>("kivent_core.systems.renderers.blend_integer_colors", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">1224</span>:                                         <span class="nb">unsigned</span> <span class="n">char</span> <span class="n">color2</span><span class="p">):</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1225</span>:     <span class="k">return</span> <span class="o">&lt;</span><span class="nb">unsigned</span> <span class="n">char</span><span class="o">&gt;</span><span class="p">((&lt;</span><span class="kt">float</span><span class="p">&gt;</span><span class="n">color1</span> <span class="o">/</span> <span class="mf">255.</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>  __pyx_r = ((unsigned char)(((((float)__pyx_v_color1) / 255.) * (((float)__pyx_v_color2) / 255.)) * 255.0));
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1226</span>:                            <span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;</span><span class="n">color2</span> <span class="o">/</span> <span class="mf">255.</span><span class="p">)</span> <span class="o">*</span> <span class="mf">255</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1227</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1228</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">PolyRenderer</span><span class="p">(</span><span class="n">Renderer</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_PolyRenderer {
  struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer __pyx_base;
};
static struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_PolyRenderer *__pyx_vtabptr_11kivent_core_7systems_9renderers_PolyRenderer;

</pre><pre class="cython line score-0">&#xA0;<span class="">1229</span>:     <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1230</span>: <span class="sd">    Processing Depends On: PositionSystem2D, PolyRenderer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1231</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1232</span>: <span class="sd">    The renderer draws with the VertexFormat2F4UB:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1233</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1234</span>: <span class="sd">    .. code-block:: cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1235</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1236</span>: <span class="sd">        ctypedef struct VertexFormat2F4UB:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1237</span>: <span class="sd">            GLfloat[2] pos</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1238</span>: <span class="sd">            GLubyte[4] v_color</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1239</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1240</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-37" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1241</span>:     <span class="n">system_names</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">([</span><span class="s">&#39;poly_renderer&#39;</span><span class="p">,</span> <span class="s">&#39;position&#39;</span><span class="p">])</span></pre>
<pre class='cython code score-37 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1241, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1241, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_poly_renderer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_poly_renderer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_n_s_poly_renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_n_s_position);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1241, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_PolyRenderer-&gt;tp_dict, __pyx_n_s_system_names, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1241, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_PolyRenderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1242</span>:     <span class="n">system_id</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;poly_renderer&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1242, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_poly_renderer) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_poly_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1242, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_PolyRenderer-&gt;tp_dict, __pyx_n_s_system_id, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1242, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_PolyRenderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1243</span>:     <span class="n">model_format</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;vertex_format_2f4ub&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1243, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_vertex_format_2f4ub) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_vertex_format_2f4ub);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1243, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_PolyRenderer-&gt;tp_dict, __pyx_n_s_model_format, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1243, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_PolyRenderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1244</span>:     <span class="n">vertex_format_size</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat2F4UB</span><span class="p">))</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1244, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1244, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1244, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_PolyRenderer-&gt;tp_dict, __pyx_n_s_vertex_format_size, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1244, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_PolyRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">1245</span>: </pre>
<pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1246</span>:     <span class="k">cdef</span> <span class="kt">void</span>* <span class="nf">setup_batch_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Buffer</span> <span class="n">master_buffer</span><span class="p">)</span> <span class="k">except</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-11 '>static void *__pyx_f_11kivent_core_7systems_9renderers_12PolyRenderer_setup_batch_manager(struct __pyx_obj_11kivent_core_7systems_9renderers_PolyRenderer *__pyx_v_self, struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *__pyx_v_master_buffer) {
  struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *__pyx_v_batch_vertex_format = 0;
  PyObject *__pyx_v_x = NULL;
  void *__pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("setup_batch_manager", 0);
  <span class='trace'>__Pyx_TraceCall</span>("setup_batch_manager", __pyx_f[1], 1246, 0, <span class='error_goto'>__PYX_ERR(1, 1246, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.PolyRenderer.setup_batch_manager", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_vertex_format);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_x);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1247</span>:         <span class="k">cdef</span> <span class="kt">KEVertexFormat</span> <span class="nf">batch_vertex_format</span> <span class="o">=</span> <span class="n">KEVertexFormat</span><span class="p">(</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1247, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
/*  */
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PySequence_Tuple</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1247, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_2, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1247, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_13vertex_format_KEVertexFormat), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1247, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_batch_vertex_format = ((struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1248</span>:             <span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat2F4UB</span><span class="p">),</span> <span class="o">*</span><span class="n">vertex_format_2f4ub</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1248, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/*  */
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_vertex_format_2f4ub);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1248, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1249</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span> <span class="o">=</span> <span class="n">BatchManager</span><span class="p">(</span></pre>
<pre class='cython code score-23 '>  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(10);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1249, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, ((PyObject *)__pyx_v_batch_vertex_format));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, ((PyObject *)__pyx_v_master_buffer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_triangles);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_triangles);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 5, __pyx_n_s_triangles);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 6, __pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 7, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 8, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 9, __pyx_t_5);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_4 = 0;
  __pyx_t_6 = 0;
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_8batching_BatchManager), __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1249, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager));
  __pyx_v_self-&gt;__pyx_base.batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_5);
  __pyx_t_5 = 0;
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1250</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">size_of_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_count</span><span class="p">,</span></pre>
<pre class='cython code score-6 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_size_of_batches);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1250, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_max_batches);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1250, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_frame_count);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1250, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class="cython line score-0">&#xA0;<span class="">1251</span>:             <span class="n">batch_vertex_format</span><span class="p">,</span> <span class="n">master_buffer</span><span class="p">,</span> <span class="s">&#39;triangles&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span></pre>
<pre class="cython line score-53" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1252</span>:             <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_names</span><span class="p">],</span></pre>
<pre class='cython code score-53 '>  __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 1252, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_names);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1252, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_5)) || <span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_5)) {
    __pyx_t_6 = __pyx_t_5; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_7 = -1; __pyx_t_6 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1252, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = Py_TYPE(__pyx_t_6)-&gt;tp_iternext;<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(1, 1252, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_6))) {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1252, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1252, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1252, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1252, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_8(__pyx_t_6);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = <span class='py_c_api'>PyErr_Occurred</span>();
        if (exc_type) {
          if (likely(<span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(exc_type, PyExc_StopIteration))) <span class='py_c_api'>PyErr_Clear</span>();
          else <span class='error_goto'>__PYX_ERR(1, 1252, __pyx_L1_error)</span>
        }
        break;
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_x, __pyx_t_5);
    __pyx_t_5 = 0;
    if (unlikely(<span class='pyx_c_api'>__Pyx_ListComp_Append</span>(__pyx_t_4, (PyObject*)__pyx_v_x))) <span class='error_goto'>__PYX_ERR(1, 1252, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1253</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">smallest_vertex_count</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_smallest_vertex_count);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1253, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1253, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1254</span>:         <span class="k">return</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-0 '>  __pyx_r = ((void *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1255</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1256</span>: </pre>
<pre class="cython line score-38" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1257</span>:     <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-38 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_12PolyRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_12PolyRenderer_update[] = "PolyRenderer.update(self, force_update, dt)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_12PolyRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_force_update = 0;
  CYTHON_UNUSED PyObject *__pyx_v_dt = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_force_update,&amp;__pyx_n_s_dt,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_force_update)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 1257, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "update") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1257, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_force_update = values[0];
    __pyx_v_dt = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 1257, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.PolyRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_12PolyRenderer_update(((struct __pyx_obj_11kivent_core_7systems_9renderers_PolyRenderer *)__pyx_v_self), __pyx_v_force_update, __pyx_v_dt);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_12PolyRenderer_update(struct __pyx_obj_11kivent_core_7systems_9renderers_PolyRenderer *__pyx_v_self, PyObject *__pyx_v_force_update, CYTHON_UNUSED PyObject *__pyx_v_dt) {
  struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *__pyx_v_batch = 0;
  PyObject *__pyx_v_batches = 0;
  unsigned int __pyx_v_batch_key;
  unsigned int __pyx_v_index_offset;
  unsigned int __pyx_v_vert_offset;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_render_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_pos_comp;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_frame_data;
  GLushort *__pyx_v_frame_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_vertex;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  GLushort *__pyx_v_model_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_model_vertices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB __pyx_v_model_vertex;
  unsigned int __pyx_v_used;
  unsigned int __pyx_v_i;
  unsigned int __pyx_v_ri;
  unsigned int __pyx_v_component_count;
  unsigned int __pyx_v_n;
  struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *__pyx_v_entity_components = 0;
  struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *__pyx_v_batch_manager = 0;
  PyObject *__pyx_v_batch_groups = 0;
  struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *__pyx_v_mesh_instruction = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *__pyx_v_components_block = 0;
  void **__pyx_v_component_data;
  int __pyx_v_static_rendering;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("update", __pyx_f[1], 1257, 0, <span class='error_goto'>__PYX_ERR(1, 1257, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.PolyRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batches);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_groups);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_mesh_instruction);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components_block);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">1258</span>:         <span class="k">cdef</span> <span class="kt">IndexedBatch</span> <span class="nf">batch</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1259</span>:         <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">batches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1260</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">batch_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1261</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">index_offset</span><span class="p">,</span> <span class="nf">vert_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1262</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">render_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1263</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1264</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">frame_data</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1265</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">frame_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1266</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1267</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1268</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">model_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1269</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">model_vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1270</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span> <span class="nf">model_vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1271</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">used</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">ri</span><span class="p">,</span> <span class="nf">component_count</span><span class="p">,</span> <span class="nf">n</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1272</span>:         <span class="k">cdef</span> <span class="kt">ComponentPointerAggregator</span> <span class="nf">entity_components</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1273</span>:         <span class="k">cdef</span> <span class="kt">BatchManager</span> <span class="nf">batch_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1274</span>:         <span class="k">cdef</span> <span class="kt">dict</span> <span class="nf">batch_groups</span> <span class="o">=</span> <span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_groups</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_v_batch_manager-&gt;batch_groups;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_groups = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1275</span>:         <span class="k">cdef</span> <span class="kt">CMesh</span> <span class="nf">mesh_instruction</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1276</span>:         <span class="k">cdef</span> <span class="kt">MemoryBlock</span> <span class="nf">components_block</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1277</span>:         <span class="k">cdef</span> <span class="kt">void</span>** <span class="nf">component_data</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1278</span>:         <span class="k">cdef</span> <span class="kt">bint</span> <span class="nf">static_rendering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_rendering</span></pre>
<pre class='cython code score-10 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_static_rendering);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1278, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1278, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_static_rendering = __pyx_t_2;
</pre><pre class="cython line score-0">&#xA0;<span class="">1279</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1280</span>:         <span class="k">for</span> <span class="n">batch_key</span> <span class="ow">in</span> <span class="n">batch_groups</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = 0;
  if (unlikely(__pyx_v_batch_groups == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
    <span class='error_goto'>__PYX_ERR(1, 1280, __pyx_L1_error)</span>
  }
  __pyx_t_6 = __Pyx_dict_iterator(__pyx_v_batch_groups, 1, ((PyObject *)NULL), (&amp;__pyx_t_4), (&amp;__pyx_t_5));<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1280, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  __pyx_t_1 = __pyx_t_6;
  __pyx_t_6 = 0;
  while (1) {
    __pyx_t_7 = __Pyx_dict_iter_next(__pyx_t_1, __pyx_t_4, &amp;__pyx_t_3, &amp;__pyx_t_6, NULL, NULL, __pyx_t_5);
    if (unlikely(__pyx_t_7 == 0)) break;
    if (unlikely(__pyx_t_7 == -1)) <span class='error_goto'>__PYX_ERR(1, 1280, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_6); if (unlikely((__pyx_t_8 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1280, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_batch_key = __pyx_t_8;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1281</span>:             <span class="n">batches</span> <span class="o">=</span> <span class="n">batch_groups</span><span class="p">[</span><span class="n">batch_key</span><span class="p">]</span></pre>
<pre class='cython code score-21 '>    if (unlikely(__pyx_v_batch_groups == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
      <span class='error_goto'>__PYX_ERR(1, 1281, __pyx_L1_error)</span>
    }
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_batch_key);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1281, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_batch_groups, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1281, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))||((__pyx_t_9) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_9)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 1281, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batches, ((PyObject*)__pyx_t_9));
    __pyx_t_9 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1282</span>:             <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span></pre>
<pre class='cython code score-15 '>    if (unlikely(__pyx_v_batches == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
      <span class='error_goto'>__PYX_ERR(1, 1282, __pyx_L1_error)</span>
    }
    __pyx_t_9 = __pyx_v_batches; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_9); __pyx_t_10 = 0;
    for (;;) {
      if (__pyx_t_10 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_9)) break;
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_6 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_9, __pyx_t_10); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_10++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1282, __pyx_L1_error)</span>
      #else
      __pyx_t_6 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_9, __pyx_t_10); __pyx_t_10++;<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1282, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      #endif
      if (!(likely(((__pyx_t_6) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_6, __pyx_ptype_11kivent_core_9rendering_8batching_IndexedBatch))))) <span class='error_goto'>__PYX_ERR(1, 1282, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batch, ((struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_t_6));
      __pyx_t_6 = 0;
/*  */
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1283</span>:                 <span class="k">if</span> <span class="ow">not</span> <span class="n">static_rendering</span> <span class="ow">or</span> <span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>      __pyx_t_11 = ((!(__pyx_v_static_rendering != 0)) != 0);
      if (!__pyx_t_11) {
      } else {
        __pyx_t_2 = __pyx_t_11;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_force_update); if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1283, __pyx_L1_error)</span>
      __pyx_t_2 = __pyx_t_11;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_2) {
/*  */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1284</span>:                     <span class="n">entity_components</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">entity_components</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_batch-&gt;entity_components);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_entity_components, ((struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1285</span>:                     <span class="n">components_block</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">memory_block</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_entity_components-&gt;memory_block);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_components_block, ((struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1286</span>:                     <span class="n">used</span> <span class="o">=</span> <span class="n">components_block</span><span class="o">.</span><span class="n">used_count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_components_block-&gt;__pyx_base.used_count;
        __pyx_v_used = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1287</span>:                     <span class="n">component_count</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_entity_components-&gt;count;
        __pyx_v_component_count = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1288</span>:                     <span class="n">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">**&gt;</span><span class="n">components_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>        __pyx_v_component_data = ((void **)__pyx_v_components_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1289</span>:                     <span class="n">frame_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat2F4UB</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_vbo_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_data = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_vbo_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1290</span>:                     <span class="n">frame_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_indices_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_indices = ((GLushort *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_indices_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1291</span>:                     <span class="n">index_offset</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_v_index_offset = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1292</span>:                     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">used</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_used;
        __pyx_t_12 = __pyx_t_8;
        for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_12; __pyx_t_13+=1) {
          __pyx_v_i = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1293</span>:                         <span class="n">ri</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">component_count</span></pre>
<pre class='cython code score-0 '>          __pyx_v_ri = (__pyx_v_i * __pyx_v_component_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1294</span>:                         <span class="k">if</span> <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="p">]</span> <span class="o">==</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (((__pyx_v_component_data[__pyx_v_ri]) == NULL) != 0);
          if (__pyx_t_2) {
/*  */
          }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1295</span>:                             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>            goto __pyx_L10_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1296</span>:                         <span class="n">render_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>          __pyx_v_render_comp = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)(__pyx_v_component_data[(__pyx_v_ri + 0)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1297</span>:                         <span class="n">vert_offset</span> <span class="o">=</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">vert_index</span></pre>
<pre class='cython code score-0 '>          __pyx_t_7 = __pyx_v_render_comp-&gt;vert_index;
          __pyx_v_vert_offset = __pyx_t_7;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1298</span>:                         <span class="n">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">render_comp</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-2 '>          __pyx_t_6 = ((PyObject *)__pyx_v_render_comp-&gt;model);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_model, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_6));
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1299</span>:                         <span class="k">if</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (__pyx_v_render_comp-&gt;render != 0);
          if (__pyx_t_2) {
/*  */
          }
          __pyx_L10_continue:;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1300</span>:                             <span class="n">pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span></pre>
<pre class='cython code score-0 '>            __pyx_v_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 1)]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1301</span>:                                 <span class="n">ri</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1302</span>:                             <span class="n">model_vertices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat2F4UB</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_vertices = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *)__pyx_v_model-&gt;vertices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0">&#xA0;<span class="">1303</span>:                                 <span class="n">model</span><span class="o">.</span><span class="n">vertices_block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1304</span>:                             <span class="n">model_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">model</span><span class="o">.</span><span class="n">indices_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_indices = ((GLushort *)__pyx_v_model-&gt;indices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1305</span>:                             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_index_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1306</span>:                                 <span class="n">frame_indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_frame_indices[(__pyx_v_i + __pyx_v_index_offset)]) = ((__pyx_v_model_indices[__pyx_v_i]) + __pyx_v_vert_offset);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1307</span>:                                     <span class="n">model_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1308</span>:                             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_vertex_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_n = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1309</span>:                                 <span class="n">vertex</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">frame_data</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_vertex = (&amp;(__pyx_v_frame_data[(__pyx_v_n + __pyx_v_vert_offset)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1310</span>:                                 <span class="n">model_vertex</span> <span class="o">=</span> <span class="n">model_vertices</span><span class="p">[</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_model_vertex = (__pyx_v_model_vertices[__pyx_v_n]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1311</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[0]) = (__pyx_v_pos_comp-&gt;x + (__pyx_v_model_vertex.pos[0]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1312</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[1]) = (__pyx_v_pos_comp-&gt;y + (__pyx_v_model_vertex.pos[1]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1313</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[0]) = (__pyx_v_model_vertex.v_color[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1314</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[1]) = (__pyx_v_model_vertex.v_color[1]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1315</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[2]) = (__pyx_v_model_vertex.v_color[2]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1316</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[3]) = (__pyx_v_model_vertex.v_color[3]);
            }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1317</span>:                             <span class="n">index_offset</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-0 '>            __pyx_v_index_offset = (__pyx_v_index_offset + __pyx_v_model-&gt;_index_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1318</span>:                     <span class="n">batch</span><span class="o">.</span><span class="n">set_index_count_for_frame</span><span class="p">(</span><span class="n">index_offset</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>        ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;set_index_count_for_frame(__pyx_v_batch, __pyx_v_index_offset);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1319</span>:                 <span class="n">mesh_instruction</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">mesh_instruction</span></pre>
<pre class='cython code score-4 '>      if (!(likely(((__pyx_v_batch-&gt;mesh_instruction) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_batch-&gt;mesh_instruction, __pyx_ptype_11kivent_core_9rendering_5cmesh_CMesh))))) <span class='error_goto'>__PYX_ERR(1, 1319, __pyx_L1_error)</span>
      __pyx_t_6 = __pyx_v_batch-&gt;mesh_instruction;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_mesh_instruction, ((struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_t_6));
      __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1320</span>:                 <span class="n">mesh_instruction</span><span class="o">.</span><span class="n">flag_update</span><span class="p">()</span></pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_v_mesh_instruction-&gt;__pyx_base.__pyx_base.__pyx_vtab)-&gt;__pyx_base.__pyx_base.flag_update(((struct __pyx_obj_4kivy_8graphics_12instructions_Instruction *)__pyx_v_mesh_instruction), 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1320, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1321</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1322</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1323</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">RotatePolyRenderer</span><span class="p">(</span><span class="n">Renderer</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotatePolyRenderer {
  struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer __pyx_base;
};
static struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotatePolyRenderer *__pyx_vtabptr_11kivent_core_7systems_9renderers_RotatePolyRenderer;

</pre><pre class="cython line score-0">&#xA0;<span class="">1324</span>:     <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1325</span>: <span class="sd">    Processing Depends On: PositionSystem2D, RotateSystem2D, RotatePolyRenderer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1326</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1327</span>: <span class="sd">    The renderer draws with the VertexFormat5F:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1328</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1329</span>: <span class="sd">    .. code-block:: cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1330</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1331</span>: <span class="sd">        ctypedef struct VertexFormat5F4UB:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1332</span>: <span class="sd">            GLfloat[2] pos</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1333</span>: <span class="sd">            GLfloat rot</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1334</span>: <span class="sd">            GLfloat[2] center</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1335</span>: <span class="sd">            GLubyte[4] v_color</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1336</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1337</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-39" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1338</span>:     <span class="n">system_names</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">([</span><span class="s">&#39;rotate_poly_renderer&#39;</span><span class="p">,</span> <span class="s">&#39;position&#39;</span><span class="p">,</span> <span class="s">&#39;rotate&#39;</span><span class="p">])</span></pre>
<pre class='cython code score-39 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1338, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1338, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_rotate_poly_renderer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_rotate_poly_renderer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_n_s_rotate_poly_renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_n_s_position);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_rotate);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_rotate);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_n_s_rotate);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1338, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotatePolyRenderer-&gt;tp_dict, __pyx_n_s_system_names, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1338, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotatePolyRenderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1339</span>:     <span class="n">system_id</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;rotate_poly_renderer&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1339, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_rotate_poly_renderer) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_rotate_poly_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1339, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotatePolyRenderer-&gt;tp_dict, __pyx_n_s_system_id, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1339, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotatePolyRenderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1340</span>:     <span class="n">model_format</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;vertex_format_2f4ub&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1340, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_vertex_format_2f4ub) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_vertex_format_2f4ub);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1340, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotatePolyRenderer-&gt;tp_dict, __pyx_n_s_model_format, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1340, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotatePolyRenderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1341</span>:     <span class="n">vertex_format_size</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat5F4UB</span><span class="p">))</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1341, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat5F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1341, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1341, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotatePolyRenderer-&gt;tp_dict, __pyx_n_s_vertex_format_size, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1341, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotatePolyRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">1342</span>: </pre>
<pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1343</span>:     <span class="k">cdef</span> <span class="kt">void</span>* <span class="nf">setup_batch_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Buffer</span> <span class="n">master_buffer</span><span class="p">)</span> <span class="k">except</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-11 '>static void *__pyx_f_11kivent_core_7systems_9renderers_18RotatePolyRenderer_setup_batch_manager(struct __pyx_obj_11kivent_core_7systems_9renderers_RotatePolyRenderer *__pyx_v_self, struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *__pyx_v_master_buffer) {
  struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *__pyx_v_batch_vertex_format = 0;
  PyObject *__pyx_v_x = NULL;
  void *__pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("setup_batch_manager", 0);
  <span class='trace'>__Pyx_TraceCall</span>("setup_batch_manager", __pyx_f[1], 1343, 0, <span class='error_goto'>__PYX_ERR(1, 1343, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotatePolyRenderer.setup_batch_manager", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_vertex_format);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_x);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1344</span>:         <span class="k">cdef</span> <span class="kt">KEVertexFormat</span> <span class="nf">batch_vertex_format</span> <span class="o">=</span> <span class="n">KEVertexFormat</span><span class="p">(</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1344, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
/*  */
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PySequence_Tuple</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1344, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_2, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1344, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_13vertex_format_KEVertexFormat), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1344, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_batch_vertex_format = ((struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1345</span>:             <span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat5F4UB</span><span class="p">),</span> <span class="o">*</span><span class="n">vertex_format_5f4ub</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat5F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1345, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/*  */
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_vertex_format_5f4ub);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1345, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1346</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span> <span class="o">=</span> <span class="n">BatchManager</span><span class="p">(</span></pre>
<pre class='cython code score-23 '>  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(10);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1346, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, ((PyObject *)__pyx_v_batch_vertex_format));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, ((PyObject *)__pyx_v_master_buffer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_triangles);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_triangles);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 5, __pyx_n_s_triangles);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 6, __pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 7, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 8, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 9, __pyx_t_5);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_4 = 0;
  __pyx_t_6 = 0;
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_8batching_BatchManager), __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1346, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager));
  __pyx_v_self-&gt;__pyx_base.batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_5);
  __pyx_t_5 = 0;
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1347</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">size_of_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_count</span><span class="p">,</span></pre>
<pre class='cython code score-6 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_size_of_batches);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1347, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_max_batches);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1347, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_frame_count);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1347, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class="cython line score-0">&#xA0;<span class="">1348</span>:             <span class="n">batch_vertex_format</span><span class="p">,</span> <span class="n">master_buffer</span><span class="p">,</span> <span class="s">&#39;triangles&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span></pre>
<pre class="cython line score-53" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1349</span>:             <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_names</span><span class="p">],</span></pre>
<pre class='cython code score-53 '>  __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 1349, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_names);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1349, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_5)) || <span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_5)) {
    __pyx_t_6 = __pyx_t_5; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_7 = -1; __pyx_t_6 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1349, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = Py_TYPE(__pyx_t_6)-&gt;tp_iternext;<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(1, 1349, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_6))) {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1349, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1349, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1349, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1349, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_8(__pyx_t_6);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = <span class='py_c_api'>PyErr_Occurred</span>();
        if (exc_type) {
          if (likely(<span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(exc_type, PyExc_StopIteration))) <span class='py_c_api'>PyErr_Clear</span>();
          else <span class='error_goto'>__PYX_ERR(1, 1349, __pyx_L1_error)</span>
        }
        break;
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_x, __pyx_t_5);
    __pyx_t_5 = 0;
    if (unlikely(<span class='pyx_c_api'>__Pyx_ListComp_Append</span>(__pyx_t_4, (PyObject*)__pyx_v_x))) <span class='error_goto'>__PYX_ERR(1, 1349, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1350</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">smallest_vertex_count</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_smallest_vertex_count);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1350, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1350, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1351</span>:         <span class="k">return</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-0 '>  __pyx_r = ((void *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1352</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1353</span>: </pre>
<pre class="cython line score-38" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1354</span>:     <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-38 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_18RotatePolyRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_18RotatePolyRenderer_update[] = "RotatePolyRenderer.update(self, force_update, dt)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_18RotatePolyRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_force_update = 0;
  CYTHON_UNUSED PyObject *__pyx_v_dt = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_force_update,&amp;__pyx_n_s_dt,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_force_update)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 1354, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "update") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1354, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_force_update = values[0];
    __pyx_v_dt = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 1354, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotatePolyRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_18RotatePolyRenderer_update(((struct __pyx_obj_11kivent_core_7systems_9renderers_RotatePolyRenderer *)__pyx_v_self), __pyx_v_force_update, __pyx_v_dt);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_18RotatePolyRenderer_update(struct __pyx_obj_11kivent_core_7systems_9renderers_RotatePolyRenderer *__pyx_v_self, PyObject *__pyx_v_force_update, CYTHON_UNUSED PyObject *__pyx_v_dt) {
  struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *__pyx_v_batch = 0;
  PyObject *__pyx_v_batches = 0;
  unsigned int __pyx_v_batch_key;
  unsigned int __pyx_v_index_offset;
  unsigned int __pyx_v_vert_offset;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_render_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_pos_comp;
  __pyx_t_11kivent_core_7systems_14rotate_systems_RotateStruct2D *__pyx_v_rot_comp;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat5F4UB *__pyx_v_frame_data;
  GLushort *__pyx_v_frame_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat5F4UB *__pyx_v_vertex;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  GLushort *__pyx_v_model_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_model_vertices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB __pyx_v_model_vertex;
  unsigned int __pyx_v_used;
  unsigned int __pyx_v_i;
  unsigned int __pyx_v_ri;
  unsigned int __pyx_v_component_count;
  unsigned int __pyx_v_n;
  struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *__pyx_v_entity_components = 0;
  struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *__pyx_v_batch_manager = 0;
  PyObject *__pyx_v_batch_groups = 0;
  struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *__pyx_v_mesh_instruction = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *__pyx_v_components_block = 0;
  void **__pyx_v_component_data;
  int __pyx_v_static_rendering;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("update", __pyx_f[1], 1354, 0, <span class='error_goto'>__PYX_ERR(1, 1354, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotatePolyRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batches);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_groups);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_mesh_instruction);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components_block);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">1355</span>:         <span class="k">cdef</span> <span class="kt">IndexedBatch</span> <span class="nf">batch</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1356</span>:         <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">batches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1357</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">batch_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1358</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">index_offset</span><span class="p">,</span> <span class="nf">vert_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1359</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">render_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1360</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1361</span>:         <span class="k">cdef</span> <span class="kt">RotateStruct2D</span>* <span class="nf">rot_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1362</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat5F4UB</span>* <span class="nf">frame_data</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1363</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">frame_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1364</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat5F4UB</span>* <span class="nf">vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1365</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1366</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">model_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1367</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">model_vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1368</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span> <span class="nf">model_vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1369</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">used</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">ri</span><span class="p">,</span> <span class="nf">component_count</span><span class="p">,</span> <span class="nf">n</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1370</span>:         <span class="k">cdef</span> <span class="kt">ComponentPointerAggregator</span> <span class="nf">entity_components</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1371</span>:         <span class="k">cdef</span> <span class="kt">BatchManager</span> <span class="nf">batch_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1372</span>:         <span class="k">cdef</span> <span class="kt">dict</span> <span class="nf">batch_groups</span> <span class="o">=</span> <span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_groups</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_v_batch_manager-&gt;batch_groups;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_groups = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1373</span>:         <span class="k">cdef</span> <span class="kt">CMesh</span> <span class="nf">mesh_instruction</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1374</span>:         <span class="k">cdef</span> <span class="kt">MemoryBlock</span> <span class="nf">components_block</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1375</span>:         <span class="k">cdef</span> <span class="kt">void</span>** <span class="nf">component_data</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1376</span>:         <span class="k">cdef</span> <span class="kt">bint</span> <span class="nf">static_rendering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_rendering</span></pre>
<pre class='cython code score-10 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_static_rendering);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1376, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1376, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_static_rendering = __pyx_t_2;
</pre><pre class="cython line score-0">&#xA0;<span class="">1377</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1378</span>:         <span class="k">for</span> <span class="n">batch_key</span> <span class="ow">in</span> <span class="n">batch_groups</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = 0;
  if (unlikely(__pyx_v_batch_groups == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
    <span class='error_goto'>__PYX_ERR(1, 1378, __pyx_L1_error)</span>
  }
  __pyx_t_6 = __Pyx_dict_iterator(__pyx_v_batch_groups, 1, ((PyObject *)NULL), (&amp;__pyx_t_4), (&amp;__pyx_t_5));<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1378, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  __pyx_t_1 = __pyx_t_6;
  __pyx_t_6 = 0;
  while (1) {
    __pyx_t_7 = __Pyx_dict_iter_next(__pyx_t_1, __pyx_t_4, &amp;__pyx_t_3, &amp;__pyx_t_6, NULL, NULL, __pyx_t_5);
    if (unlikely(__pyx_t_7 == 0)) break;
    if (unlikely(__pyx_t_7 == -1)) <span class='error_goto'>__PYX_ERR(1, 1378, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_6); if (unlikely((__pyx_t_8 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1378, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_batch_key = __pyx_t_8;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1379</span>:             <span class="n">batches</span> <span class="o">=</span> <span class="n">batch_groups</span><span class="p">[</span><span class="n">batch_key</span><span class="p">]</span></pre>
<pre class='cython code score-21 '>    if (unlikely(__pyx_v_batch_groups == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
      <span class='error_goto'>__PYX_ERR(1, 1379, __pyx_L1_error)</span>
    }
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_batch_key);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1379, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_batch_groups, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1379, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))||((__pyx_t_9) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_9)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 1379, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batches, ((PyObject*)__pyx_t_9));
    __pyx_t_9 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1380</span>:             <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span></pre>
<pre class='cython code score-15 '>    if (unlikely(__pyx_v_batches == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
      <span class='error_goto'>__PYX_ERR(1, 1380, __pyx_L1_error)</span>
    }
    __pyx_t_9 = __pyx_v_batches; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_9); __pyx_t_10 = 0;
    for (;;) {
      if (__pyx_t_10 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_9)) break;
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_6 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_9, __pyx_t_10); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_10++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1380, __pyx_L1_error)</span>
      #else
      __pyx_t_6 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_9, __pyx_t_10); __pyx_t_10++;<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1380, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      #endif
      if (!(likely(((__pyx_t_6) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_6, __pyx_ptype_11kivent_core_9rendering_8batching_IndexedBatch))))) <span class='error_goto'>__PYX_ERR(1, 1380, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batch, ((struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_t_6));
      __pyx_t_6 = 0;
/*  */
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1381</span>:                 <span class="k">if</span> <span class="ow">not</span> <span class="n">static_rendering</span> <span class="ow">or</span> <span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>      __pyx_t_11 = ((!(__pyx_v_static_rendering != 0)) != 0);
      if (!__pyx_t_11) {
      } else {
        __pyx_t_2 = __pyx_t_11;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_force_update); if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1381, __pyx_L1_error)</span>
      __pyx_t_2 = __pyx_t_11;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_2) {
/*  */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1382</span>:                     <span class="n">entity_components</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">entity_components</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_batch-&gt;entity_components);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_entity_components, ((struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1383</span>:                     <span class="n">components_block</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">memory_block</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_entity_components-&gt;memory_block);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_components_block, ((struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1384</span>:                     <span class="n">used</span> <span class="o">=</span> <span class="n">components_block</span><span class="o">.</span><span class="n">used_count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_components_block-&gt;__pyx_base.used_count;
        __pyx_v_used = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1385</span>:                     <span class="n">component_count</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_entity_components-&gt;count;
        __pyx_v_component_count = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1386</span>:                     <span class="n">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">**&gt;</span><span class="n">components_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>        __pyx_v_component_data = ((void **)__pyx_v_components_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1387</span>:                     <span class="n">frame_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat5F4UB</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_vbo_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_data = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat5F4UB *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_vbo_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1388</span>:                     <span class="n">frame_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_indices_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_indices = ((GLushort *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_indices_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1389</span>:                     <span class="n">index_offset</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_v_index_offset = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1390</span>:                     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">used</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_used;
        __pyx_t_12 = __pyx_t_8;
        for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_12; __pyx_t_13+=1) {
          __pyx_v_i = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1391</span>:                         <span class="n">ri</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">component_count</span></pre>
<pre class='cython code score-0 '>          __pyx_v_ri = (__pyx_v_i * __pyx_v_component_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1392</span>:                         <span class="k">if</span> <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="p">]</span> <span class="o">==</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (((__pyx_v_component_data[__pyx_v_ri]) == NULL) != 0);
          if (__pyx_t_2) {
/*  */
          }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1393</span>:                             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>            goto __pyx_L10_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1394</span>:                         <span class="n">render_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>          __pyx_v_render_comp = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)(__pyx_v_component_data[(__pyx_v_ri + 0)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1395</span>:                         <span class="n">vert_offset</span> <span class="o">=</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">vert_index</span></pre>
<pre class='cython code score-0 '>          __pyx_t_7 = __pyx_v_render_comp-&gt;vert_index;
          __pyx_v_vert_offset = __pyx_t_7;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1396</span>:                         <span class="n">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">render_comp</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-2 '>          __pyx_t_6 = ((PyObject *)__pyx_v_render_comp-&gt;model);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_model, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_6));
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1397</span>:                         <span class="k">if</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (__pyx_v_render_comp-&gt;render != 0);
          if (__pyx_t_2) {
/*  */
          }
          __pyx_L10_continue:;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1398</span>:                             <span class="n">pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span></pre>
<pre class='cython code score-0 '>            __pyx_v_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 1)]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1399</span>:                                 <span class="n">ri</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1400</span>:                             <span class="n">rot_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RotateStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span></pre>
<pre class='cython code score-0 '>            __pyx_v_rot_comp = ((__pyx_t_11kivent_core_7systems_14rotate_systems_RotateStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 2)]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1401</span>:                                 <span class="n">ri</span><span class="o">+</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1402</span>:                             <span class="n">model_vertices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat2F4UB</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_vertices = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *)__pyx_v_model-&gt;vertices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0">&#xA0;<span class="">1403</span>:                                 <span class="n">model</span><span class="o">.</span><span class="n">vertices_block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1404</span>:                             <span class="n">model_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">model</span><span class="o">.</span><span class="n">indices_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_indices = ((GLushort *)__pyx_v_model-&gt;indices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1405</span>:                             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_index_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1406</span>:                                 <span class="n">frame_indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_frame_indices[(__pyx_v_i + __pyx_v_index_offset)]) = ((__pyx_v_model_indices[__pyx_v_i]) + __pyx_v_vert_offset);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1407</span>:                                     <span class="n">model_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1408</span>:                             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_vertex_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_n = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1409</span>:                                 <span class="n">vertex</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">frame_data</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_vertex = (&amp;(__pyx_v_frame_data[(__pyx_v_n + __pyx_v_vert_offset)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1410</span>:                                 <span class="n">model_vertex</span> <span class="o">=</span> <span class="n">model_vertices</span><span class="p">[</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_model_vertex = (__pyx_v_model_vertices[__pyx_v_n]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1411</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[0]) = (__pyx_v_model_vertex.pos[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1412</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[1]) = (__pyx_v_model_vertex.pos[1]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1413</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">rot</span> <span class="o">=</span> <span class="n">rot_comp</span><span class="o">.</span><span class="n">r</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_rot_comp-&gt;r;
              __pyx_v_vertex-&gt;rot = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1414</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">x</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_pos_comp-&gt;x;
              (__pyx_v_vertex-&gt;center[0]) = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1415</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">y</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_pos_comp-&gt;y;
              (__pyx_v_vertex-&gt;center[1]) = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1416</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[0]) = (__pyx_v_model_vertex.v_color[0]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1417</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[1]) = (__pyx_v_model_vertex.v_color[1]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1418</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[2]) = (__pyx_v_model_vertex.v_color[2]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1419</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[3]) = (__pyx_v_model_vertex.v_color[3]);
            }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1420</span>:                             <span class="n">index_offset</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-0 '>            __pyx_v_index_offset = (__pyx_v_index_offset + __pyx_v_model-&gt;_index_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1421</span>:                     <span class="n">batch</span><span class="o">.</span><span class="n">set_index_count_for_frame</span><span class="p">(</span><span class="n">index_offset</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>        ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;set_index_count_for_frame(__pyx_v_batch, __pyx_v_index_offset);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1422</span>:                 <span class="n">mesh_instruction</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">mesh_instruction</span></pre>
<pre class='cython code score-4 '>      if (!(likely(((__pyx_v_batch-&gt;mesh_instruction) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_batch-&gt;mesh_instruction, __pyx_ptype_11kivent_core_9rendering_5cmesh_CMesh))))) <span class='error_goto'>__PYX_ERR(1, 1422, __pyx_L1_error)</span>
      __pyx_t_6 = __pyx_v_batch-&gt;mesh_instruction;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_mesh_instruction, ((struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_t_6));
      __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1423</span>:                 <span class="n">mesh_instruction</span><span class="o">.</span><span class="n">flag_update</span><span class="p">()</span></pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_v_mesh_instruction-&gt;__pyx_base.__pyx_base.__pyx_vtab)-&gt;__pyx_base.__pyx_base.flag_update(((struct __pyx_obj_4kivy_8graphics_12instructions_Instruction *)__pyx_v_mesh_instruction), 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1423, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1424</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1425</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1426</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">RotateColorScalePolyRenderer</span><span class="p">(</span><span class="n">RotatePolyRenderer</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer {
  struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotatePolyRenderer __pyx_base;
};
static struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer *__pyx_vtabptr_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer;

</pre><pre class="cython line score-0">&#xA0;<span class="">1427</span>:     <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1428</span>: <span class="sd">    Processing Depends On: PositionSystem2D, RotateSystem2D, ColorSystem,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1429</span>: <span class="sd">    ScaleSystem2D, RotateColorScalePolyRenderer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1430</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1431</span>: <span class="sd">    The renderer draws with the VertexFormat5F:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1432</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1433</span>: <span class="sd">    .. code-block:: cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1434</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1435</span>: <span class="sd">        ctypedef struct VertexFormat5F4UB:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1436</span>: <span class="sd">            GLfloat[2] pos</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1437</span>: <span class="sd">            GLfloat rot</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1438</span>: <span class="sd">            GLfloat[2] center</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1439</span>: <span class="sd">            GLubyte[4] v_color</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1440</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1441</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-43" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1442</span>:     <span class="n">system_names</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">([</span><span class="s">&#39;rotate_color_scale_poly_renderer&#39;</span><span class="p">,</span> <span class="s">&#39;position&#39;</span><span class="p">,</span> <span class="s">&#39;rotate&#39;</span><span class="p">,</span> <span class="s">&#39;color&#39;</span><span class="p">,</span> <span class="s">&#39;scale&#39;</span><span class="p">])</span></pre>
<pre class='cython code score-43 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1442, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1442, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_rotate_color_scale_poly_renderer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_rotate_color_scale_poly_renderer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_n_s_rotate_color_scale_poly_renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_n_s_position);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_rotate);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_rotate);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_n_s_rotate);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_color);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_color);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 3, __pyx_n_s_color);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_scale);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_scale);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 4, __pyx_n_s_scale);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1442, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer-&gt;tp_dict, __pyx_n_s_system_names, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1442, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1443</span>:     <span class="n">system_id</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;rotate_color_scale_poly_renderer&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1443, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_rotate_color_scale_poly_renderer) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_rotate_color_scale_poly_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1443, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer-&gt;tp_dict, __pyx_n_s_system_id, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1443, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1444</span>:     <span class="n">model_format</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;vertex_format_2f4ub&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1444, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_vertex_format_2f4ub) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_vertex_format_2f4ub);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1444, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer-&gt;tp_dict, __pyx_n_s_model_format, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1444, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1445</span>:     <span class="n">vertex_format_size</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat5F4UB</span><span class="p">))</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1445, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat5F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1445, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1445, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer-&gt;tp_dict, __pyx_n_s_vertex_format_size, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1445, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">1446</span>: </pre>
<pre class="cython line score-38" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1447</span>:     <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-38 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_28RotateColorScalePolyRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_28RotateColorScalePolyRenderer_update[] = "RotateColorScalePolyRenderer.update(self, force_update, dt)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_28RotateColorScalePolyRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_force_update = 0;
  CYTHON_UNUSED PyObject *__pyx_v_dt = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_force_update,&amp;__pyx_n_s_dt,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_force_update)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 1447, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "update") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1447, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_force_update = values[0];
    __pyx_v_dt = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 1447, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotateColorScalePolyRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_28RotateColorScalePolyRenderer_update(((struct __pyx_obj_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer *)__pyx_v_self), __pyx_v_force_update, __pyx_v_dt);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_28RotateColorScalePolyRenderer_update(struct __pyx_obj_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer *__pyx_v_self, PyObject *__pyx_v_force_update, CYTHON_UNUSED PyObject *__pyx_v_dt) {
  struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *__pyx_v_batch = 0;
  PyObject *__pyx_v_batches = 0;
  unsigned int __pyx_v_batch_key;
  unsigned int __pyx_v_index_offset;
  unsigned int __pyx_v_vert_offset;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_render_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_pos_comp;
  __pyx_t_11kivent_core_7systems_14rotate_systems_RotateStruct2D *__pyx_v_rot_comp;
  __pyx_t_11kivent_core_7systems_13scale_systems_ScaleStruct2D *__pyx_v_scale_comp;
  __pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *__pyx_v_color_comp;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat5F4UB *__pyx_v_frame_data;
  GLushort *__pyx_v_frame_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat5F4UB *__pyx_v_vertex;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  GLushort *__pyx_v_model_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_model_vertices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB __pyx_v_model_vertex;
  unsigned int __pyx_v_used;
  unsigned int __pyx_v_i;
  unsigned int __pyx_v_ri;
  unsigned int __pyx_v_component_count;
  unsigned int __pyx_v_n;
  struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *__pyx_v_entity_components = 0;
  struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *__pyx_v_batch_manager = 0;
  PyObject *__pyx_v_batch_groups = 0;
  struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *__pyx_v_mesh_instruction = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *__pyx_v_components_block = 0;
  void **__pyx_v_component_data;
  int __pyx_v_static_rendering;
  int __pyx_v_ii;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("update", __pyx_f[1], 1447, 0, <span class='error_goto'>__PYX_ERR(1, 1447, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.RotateColorScalePolyRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batches);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_groups);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_mesh_instruction);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components_block);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">1448</span>:         <span class="k">cdef</span> <span class="kt">IndexedBatch</span> <span class="nf">batch</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1449</span>:         <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">batches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1450</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">batch_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1451</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">index_offset</span><span class="p">,</span> <span class="nf">vert_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1452</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">render_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1453</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1454</span>:         <span class="k">cdef</span> <span class="kt">RotateStruct2D</span>* <span class="nf">rot_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1455</span>:         <span class="k">cdef</span> <span class="kt">ScaleStruct2D</span>* <span class="nf">scale_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1456</span>:         <span class="k">cdef</span> <span class="kt">ColorStruct</span>* <span class="nf">color_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1457</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat5F4UB</span>* <span class="nf">frame_data</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1458</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">frame_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1459</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat5F4UB</span>* <span class="nf">vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1460</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1461</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">model_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1462</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">model_vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1463</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span> <span class="nf">model_vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1464</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">used</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">ri</span><span class="p">,</span> <span class="nf">component_count</span><span class="p">,</span> <span class="nf">n</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1465</span>:         <span class="k">cdef</span> <span class="kt">ComponentPointerAggregator</span> <span class="nf">entity_components</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1466</span>:         <span class="k">cdef</span> <span class="kt">BatchManager</span> <span class="nf">batch_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1467</span>:         <span class="k">cdef</span> <span class="kt">dict</span> <span class="nf">batch_groups</span> <span class="o">=</span> <span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_groups</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_v_batch_manager-&gt;batch_groups;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_groups = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1468</span>:         <span class="k">cdef</span> <span class="kt">CMesh</span> <span class="nf">mesh_instruction</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1469</span>:         <span class="k">cdef</span> <span class="kt">MemoryBlock</span> <span class="nf">components_block</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1470</span>:         <span class="k">cdef</span> <span class="kt">void</span>** <span class="nf">component_data</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1471</span>:         <span class="k">cdef</span> <span class="kt">bint</span> <span class="nf">static_rendering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_rendering</span></pre>
<pre class='cython code score-10 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_static_rendering);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1471, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1471, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_static_rendering = __pyx_t_2;
</pre><pre class="cython line score-0">&#xA0;<span class="">1472</span>:         <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">ii</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1473</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1474</span>:         <span class="k">for</span> <span class="n">batch_key</span> <span class="ow">in</span> <span class="n">batch_groups</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = 0;
  if (unlikely(__pyx_v_batch_groups == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
    <span class='error_goto'>__PYX_ERR(1, 1474, __pyx_L1_error)</span>
  }
  __pyx_t_6 = __Pyx_dict_iterator(__pyx_v_batch_groups, 1, ((PyObject *)NULL), (&amp;__pyx_t_4), (&amp;__pyx_t_5));<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1474, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  __pyx_t_1 = __pyx_t_6;
  __pyx_t_6 = 0;
  while (1) {
    __pyx_t_7 = __Pyx_dict_iter_next(__pyx_t_1, __pyx_t_4, &amp;__pyx_t_3, &amp;__pyx_t_6, NULL, NULL, __pyx_t_5);
    if (unlikely(__pyx_t_7 == 0)) break;
    if (unlikely(__pyx_t_7 == -1)) <span class='error_goto'>__PYX_ERR(1, 1474, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_6); if (unlikely((__pyx_t_8 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1474, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_batch_key = __pyx_t_8;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1475</span>:             <span class="n">batches</span> <span class="o">=</span> <span class="n">batch_groups</span><span class="p">[</span><span class="n">batch_key</span><span class="p">]</span></pre>
<pre class='cython code score-21 '>    if (unlikely(__pyx_v_batch_groups == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
      <span class='error_goto'>__PYX_ERR(1, 1475, __pyx_L1_error)</span>
    }
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_batch_key);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1475, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_batch_groups, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1475, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))||((__pyx_t_9) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_9)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 1475, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batches, ((PyObject*)__pyx_t_9));
    __pyx_t_9 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1476</span>:             <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span></pre>
<pre class='cython code score-15 '>    if (unlikely(__pyx_v_batches == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
      <span class='error_goto'>__PYX_ERR(1, 1476, __pyx_L1_error)</span>
    }
    __pyx_t_9 = __pyx_v_batches; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_9); __pyx_t_10 = 0;
    for (;;) {
      if (__pyx_t_10 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_9)) break;
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_6 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_9, __pyx_t_10); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_10++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1476, __pyx_L1_error)</span>
      #else
      __pyx_t_6 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_9, __pyx_t_10); __pyx_t_10++;<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1476, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      #endif
      if (!(likely(((__pyx_t_6) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_6, __pyx_ptype_11kivent_core_9rendering_8batching_IndexedBatch))))) <span class='error_goto'>__PYX_ERR(1, 1476, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batch, ((struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_t_6));
      __pyx_t_6 = 0;
/*  */
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1477</span>:                 <span class="k">if</span> <span class="ow">not</span> <span class="n">static_rendering</span> <span class="ow">or</span> <span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>      __pyx_t_11 = ((!(__pyx_v_static_rendering != 0)) != 0);
      if (!__pyx_t_11) {
      } else {
        __pyx_t_2 = __pyx_t_11;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_force_update); if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1477, __pyx_L1_error)</span>
      __pyx_t_2 = __pyx_t_11;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_2) {
/*  */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1478</span>:                     <span class="n">entity_components</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">entity_components</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_batch-&gt;entity_components);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_entity_components, ((struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1479</span>:                     <span class="n">components_block</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">memory_block</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_entity_components-&gt;memory_block);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_components_block, ((struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1480</span>:                     <span class="n">used</span> <span class="o">=</span> <span class="n">components_block</span><span class="o">.</span><span class="n">used_count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_components_block-&gt;__pyx_base.used_count;
        __pyx_v_used = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1481</span>:                     <span class="n">component_count</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_entity_components-&gt;count;
        __pyx_v_component_count = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1482</span>:                     <span class="n">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">**&gt;</span><span class="n">components_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>        __pyx_v_component_data = ((void **)__pyx_v_components_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1483</span>:                     <span class="n">frame_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat5F4UB</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_vbo_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_data = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat5F4UB *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_vbo_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1484</span>:                     <span class="n">frame_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_indices_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_indices = ((GLushort *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_indices_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1485</span>:                     <span class="n">index_offset</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_v_index_offset = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1486</span>:                     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">used</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_used;
        __pyx_t_12 = __pyx_t_8;
        for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_12; __pyx_t_13+=1) {
          __pyx_v_i = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1487</span>:                         <span class="n">ri</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">component_count</span></pre>
<pre class='cython code score-0 '>          __pyx_v_ri = (__pyx_v_i * __pyx_v_component_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1488</span>:                         <span class="k">if</span> <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="p">]</span> <span class="o">==</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (((__pyx_v_component_data[__pyx_v_ri]) == NULL) != 0);
          if (__pyx_t_2) {
/*  */
          }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1489</span>:                             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>            goto __pyx_L10_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1490</span>:                         <span class="n">render_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>          __pyx_v_render_comp = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)(__pyx_v_component_data[(__pyx_v_ri + 0)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1491</span>:                         <span class="n">vert_offset</span> <span class="o">=</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">vert_index</span></pre>
<pre class='cython code score-0 '>          __pyx_t_7 = __pyx_v_render_comp-&gt;vert_index;
          __pyx_v_vert_offset = __pyx_t_7;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1492</span>:                         <span class="n">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">render_comp</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-2 '>          __pyx_t_6 = ((PyObject *)__pyx_v_render_comp-&gt;model);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_model, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_6));
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1493</span>:                         <span class="k">if</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (__pyx_v_render_comp-&gt;render != 0);
          if (__pyx_t_2) {
/*  */
          }
          __pyx_L10_continue:;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1494</span>:                             <span class="n">pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 1)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1495</span>:                             <span class="n">rot_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RotateStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_rot_comp = ((__pyx_t_11kivent_core_7systems_14rotate_systems_RotateStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 2)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1496</span>:                             <span class="n">color_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">ColorStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_color_comp = ((__pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *)(__pyx_v_component_data[(__pyx_v_ri + 3)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1497</span>:                             <span class="n">scale_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">ScaleStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">4</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_scale_comp = ((__pyx_t_11kivent_core_7systems_13scale_systems_ScaleStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 4)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1498</span>:                             <span class="n">model_vertices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat2F4UB</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_vertices = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *)__pyx_v_model-&gt;vertices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0">&#xA0;<span class="">1499</span>:                                 <span class="n">model</span><span class="o">.</span><span class="n">vertices_block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1500</span>:                             <span class="n">model_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">model</span><span class="o">.</span><span class="n">indices_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_indices = ((GLushort *)__pyx_v_model-&gt;indices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1501</span>:                             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_index_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1502</span>:                                 <span class="n">frame_indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_frame_indices[(__pyx_v_i + __pyx_v_index_offset)]) = ((__pyx_v_model_indices[__pyx_v_i]) + __pyx_v_vert_offset);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1503</span>:                                     <span class="n">model_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1504</span>:                             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_vertex_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_n = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1505</span>:                                 <span class="n">vertex</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">frame_data</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_vertex = (&amp;(__pyx_v_frame_data[(__pyx_v_n + __pyx_v_vert_offset)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1506</span>:                                 <span class="n">model_vertex</span> <span class="o">=</span> <span class="n">model_vertices</span><span class="p">[</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_model_vertex = (__pyx_v_model_vertices[__pyx_v_n]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1507</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_comp</span><span class="o">.</span><span class="n">sx</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[0]) = ((__pyx_v_model_vertex.pos[0]) * __pyx_v_scale_comp-&gt;sx);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1508</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_comp</span><span class="o">.</span><span class="n">sy</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[1]) = ((__pyx_v_model_vertex.pos[1]) * __pyx_v_scale_comp-&gt;sy);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1509</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">rot</span> <span class="o">=</span> <span class="n">rot_comp</span><span class="o">.</span><span class="n">r</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_rot_comp-&gt;r;
              __pyx_v_vertex-&gt;rot = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1510</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">x</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_pos_comp-&gt;x;
              (__pyx_v_vertex-&gt;center[0]) = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1511</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">y</span></pre>
<pre class='cython code score-0 '>              __pyx_t_17 = __pyx_v_pos_comp-&gt;y;
              (__pyx_v_vertex-&gt;center[1]) = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1512</span>:                                 <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">4</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>              for (__pyx_t_7 = 0; __pyx_t_7 &lt; 4; __pyx_t_7+=1) {
                __pyx_v_ii = __pyx_t_7;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1513</span>:                                     <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>                (__pyx_v_vertex-&gt;v_color[__pyx_v_ii]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[__pyx_v_ii]), (__pyx_v_color_comp-&gt;color[__pyx_v_ii]));
              }
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1514</span>:                                         <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="n">ii</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1515</span>:                                         <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="n">ii</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1516</span>:                             <span class="n">index_offset</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-0 '>            __pyx_v_index_offset = (__pyx_v_index_offset + __pyx_v_model-&gt;_index_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1517</span>:                     <span class="n">batch</span><span class="o">.</span><span class="n">set_index_count_for_frame</span><span class="p">(</span><span class="n">index_offset</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>        ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;set_index_count_for_frame(__pyx_v_batch, __pyx_v_index_offset);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1518</span>:                 <span class="n">mesh_instruction</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">mesh_instruction</span></pre>
<pre class='cython code score-4 '>      if (!(likely(((__pyx_v_batch-&gt;mesh_instruction) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_batch-&gt;mesh_instruction, __pyx_ptype_11kivent_core_9rendering_5cmesh_CMesh))))) <span class='error_goto'>__PYX_ERR(1, 1518, __pyx_L1_error)</span>
      __pyx_t_6 = __pyx_v_batch-&gt;mesh_instruction;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_mesh_instruction, ((struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_t_6));
      __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1519</span>:                 <span class="n">mesh_instruction</span><span class="o">.</span><span class="n">flag_update</span><span class="p">()</span></pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_v_mesh_instruction-&gt;__pyx_base.__pyx_base.__pyx_vtab)-&gt;__pyx_base.__pyx_base.flag_update(((struct __pyx_obj_4kivy_8graphics_12instructions_Instruction *)__pyx_v_mesh_instruction), 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1519, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1520</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1521</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1522</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">ColorPolyRenderer</span><span class="p">(</span><span class="n">Renderer</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_ColorPolyRenderer {
  struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer __pyx_base;
};
static struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_ColorPolyRenderer *__pyx_vtabptr_11kivent_core_7systems_9renderers_ColorPolyRenderer;

</pre><pre class="cython line score-0">&#xA0;<span class="">1523</span>:     <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1524</span>: <span class="sd">    Processing Depends On: PositionSystem2D, ColorSystem, ColorPolyRenderer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1525</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1526</span>: <span class="sd">    The renderer draws with the VertexFormat2F4UB:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1527</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1528</span>: <span class="sd">    .. code-block:: cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1529</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1530</span>: <span class="sd">        ctypedef struct VertexFormat2F4UB:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1531</span>: <span class="sd">            GLfloat[2] pos</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1532</span>: <span class="sd">            GLubyte[4] v_color</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1533</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1534</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-39" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1535</span>:     <span class="n">system_names</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">([</span><span class="s">&#39;color_poly_renderer&#39;</span><span class="p">,</span> <span class="s">&#39;position&#39;</span><span class="p">,</span> <span class="s">&#39;color&#39;</span><span class="p">])</span></pre>
<pre class='cython code score-39 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1535, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1535, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_color_poly_renderer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_color_poly_renderer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_n_s_color_poly_renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_n_s_position);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_color);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_color);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_n_s_color);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1535, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ColorPolyRenderer-&gt;tp_dict, __pyx_n_s_system_names, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1535, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_ColorPolyRenderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1536</span>:     <span class="n">system_id</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;color_poly_renderer&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1536, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_color_poly_renderer) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_color_poly_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1536, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ColorPolyRenderer-&gt;tp_dict, __pyx_n_s_system_id, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1536, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_ColorPolyRenderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1537</span>:     <span class="n">model_format</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;vertex_format_2f4ub&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1537, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_vertex_format_2f4ub) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_vertex_format_2f4ub);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1537, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ColorPolyRenderer-&gt;tp_dict, __pyx_n_s_model_format, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1537, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_ColorPolyRenderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1538</span>:     <span class="n">vertex_format_size</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat2F4UB</span><span class="p">))</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1538, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1538, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1538, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ColorPolyRenderer-&gt;tp_dict, __pyx_n_s_vertex_format_size, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1538, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_ColorPolyRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">1539</span>: </pre>
<pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1540</span>:     <span class="k">cdef</span> <span class="kt">void</span>* <span class="nf">setup_batch_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Buffer</span> <span class="n">master_buffer</span><span class="p">)</span> <span class="k">except</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-11 '>static void *__pyx_f_11kivent_core_7systems_9renderers_17ColorPolyRenderer_setup_batch_manager(struct __pyx_obj_11kivent_core_7systems_9renderers_ColorPolyRenderer *__pyx_v_self, struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *__pyx_v_master_buffer) {
  struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *__pyx_v_batch_vertex_format = 0;
  PyObject *__pyx_v_x = NULL;
  void *__pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("setup_batch_manager", 0);
  <span class='trace'>__Pyx_TraceCall</span>("setup_batch_manager", __pyx_f[1], 1540, 0, <span class='error_goto'>__PYX_ERR(1, 1540, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.ColorPolyRenderer.setup_batch_manager", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_vertex_format);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_x);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1541</span>:         <span class="k">cdef</span> <span class="kt">KEVertexFormat</span> <span class="nf">batch_vertex_format</span> <span class="o">=</span> <span class="n">KEVertexFormat</span><span class="p">(</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1541, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
/*  */
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PySequence_Tuple</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1541, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_2, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1541, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_13vertex_format_KEVertexFormat), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1541, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_batch_vertex_format = ((struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1542</span>:             <span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat2F4UB</span><span class="p">),</span> <span class="o">*</span><span class="n">vertex_format_2f4ub</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1542, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/*  */
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_vertex_format_2f4ub);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1542, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1543</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span> <span class="o">=</span> <span class="n">BatchManager</span><span class="p">(</span></pre>
<pre class='cython code score-23 '>  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(10);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1543, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, ((PyObject *)__pyx_v_batch_vertex_format));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, ((PyObject *)__pyx_v_master_buffer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_triangles);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_triangles);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 5, __pyx_n_s_triangles);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 6, __pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 7, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 8, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 9, __pyx_t_5);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_4 = 0;
  __pyx_t_6 = 0;
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_8batching_BatchManager), __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1543, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager));
  __pyx_v_self-&gt;__pyx_base.batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_5);
  __pyx_t_5 = 0;
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1544</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">size_of_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_count</span><span class="p">,</span></pre>
<pre class='cython code score-6 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_size_of_batches);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1544, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_max_batches);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1544, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_frame_count);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1544, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class="cython line score-0">&#xA0;<span class="">1545</span>:             <span class="n">batch_vertex_format</span><span class="p">,</span> <span class="n">master_buffer</span><span class="p">,</span> <span class="s">&#39;triangles&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span></pre>
<pre class="cython line score-53" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1546</span>:             <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_names</span><span class="p">],</span></pre>
<pre class='cython code score-53 '>  __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 1546, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_names);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1546, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_5)) || <span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_5)) {
    __pyx_t_6 = __pyx_t_5; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_7 = -1; __pyx_t_6 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1546, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = Py_TYPE(__pyx_t_6)-&gt;tp_iternext;<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(1, 1546, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_6))) {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1546, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1546, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1546, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1546, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_8(__pyx_t_6);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = <span class='py_c_api'>PyErr_Occurred</span>();
        if (exc_type) {
          if (likely(<span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(exc_type, PyExc_StopIteration))) <span class='py_c_api'>PyErr_Clear</span>();
          else <span class='error_goto'>__PYX_ERR(1, 1546, __pyx_L1_error)</span>
        }
        break;
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_x, __pyx_t_5);
    __pyx_t_5 = 0;
    if (unlikely(<span class='pyx_c_api'>__Pyx_ListComp_Append</span>(__pyx_t_4, (PyObject*)__pyx_v_x))) <span class='error_goto'>__PYX_ERR(1, 1546, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1547</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">smallest_vertex_count</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_smallest_vertex_count);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1547, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1547, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1548</span>:         <span class="k">return</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-0 '>  __pyx_r = ((void *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1549</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1550</span>: </pre>
<pre class="cython line score-38" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1551</span>:     <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-38 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_17ColorPolyRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_17ColorPolyRenderer_update[] = "ColorPolyRenderer.update(self, force_update, dt)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_17ColorPolyRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_force_update = 0;
  CYTHON_UNUSED PyObject *__pyx_v_dt = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_force_update,&amp;__pyx_n_s_dt,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_force_update)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 1551, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "update") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1551, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_force_update = values[0];
    __pyx_v_dt = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 1551, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.ColorPolyRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_17ColorPolyRenderer_update(((struct __pyx_obj_11kivent_core_7systems_9renderers_ColorPolyRenderer *)__pyx_v_self), __pyx_v_force_update, __pyx_v_dt);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_17ColorPolyRenderer_update(struct __pyx_obj_11kivent_core_7systems_9renderers_ColorPolyRenderer *__pyx_v_self, PyObject *__pyx_v_force_update, CYTHON_UNUSED PyObject *__pyx_v_dt) {
  struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *__pyx_v_batch = 0;
  PyObject *__pyx_v_batches = 0;
  unsigned int __pyx_v_batch_key;
  unsigned int __pyx_v_index_offset;
  unsigned int __pyx_v_vert_offset;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_render_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_pos_comp;
  __pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *__pyx_v_color_comp;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_frame_data;
  GLushort *__pyx_v_frame_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_vertex;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  GLushort *__pyx_v_model_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_model_vertices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB __pyx_v_model_vertex;
  unsigned int __pyx_v_used;
  unsigned int __pyx_v_i;
  unsigned int __pyx_v_ri;
  unsigned int __pyx_v_component_count;
  unsigned int __pyx_v_n;
  struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *__pyx_v_entity_components = 0;
  struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *__pyx_v_batch_manager = 0;
  PyObject *__pyx_v_batch_groups = 0;
  struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *__pyx_v_mesh_instruction = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *__pyx_v_components_block = 0;
  void **__pyx_v_component_data;
  int __pyx_v_static_rendering;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("update", __pyx_f[1], 1551, 0, <span class='error_goto'>__PYX_ERR(1, 1551, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.ColorPolyRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batches);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_groups);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_mesh_instruction);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components_block);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">1552</span>:         <span class="k">cdef</span> <span class="kt">IndexedBatch</span> <span class="nf">batch</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1553</span>:         <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">batches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1554</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">batch_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1555</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">index_offset</span><span class="p">,</span> <span class="nf">vert_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1556</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">render_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1557</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1558</span>:         <span class="k">cdef</span> <span class="kt">ColorStruct</span>* <span class="nf">color_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1559</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">frame_data</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1560</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">frame_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1561</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1562</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1563</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">model_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1564</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">model_vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1565</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span> <span class="nf">model_vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1566</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">used</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">ri</span><span class="p">,</span> <span class="nf">component_count</span><span class="p">,</span> <span class="nf">n</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1567</span>:         <span class="k">cdef</span> <span class="kt">ComponentPointerAggregator</span> <span class="nf">entity_components</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1568</span>:         <span class="k">cdef</span> <span class="kt">BatchManager</span> <span class="nf">batch_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1569</span>:         <span class="k">cdef</span> <span class="kt">dict</span> <span class="nf">batch_groups</span> <span class="o">=</span> <span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_groups</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_v_batch_manager-&gt;batch_groups;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_groups = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1570</span>:         <span class="k">cdef</span> <span class="kt">CMesh</span> <span class="nf">mesh_instruction</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1571</span>:         <span class="k">cdef</span> <span class="kt">MemoryBlock</span> <span class="nf">components_block</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1572</span>:         <span class="k">cdef</span> <span class="kt">void</span>** <span class="nf">component_data</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1573</span>:         <span class="k">cdef</span> <span class="kt">bint</span> <span class="nf">static_rendering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_rendering</span></pre>
<pre class='cython code score-10 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_static_rendering);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1573, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1573, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_static_rendering = __pyx_t_2;
</pre><pre class="cython line score-0">&#xA0;<span class="">1574</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1575</span>:         <span class="k">for</span> <span class="n">batch_key</span> <span class="ow">in</span> <span class="n">batch_groups</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = 0;
  if (unlikely(__pyx_v_batch_groups == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
    <span class='error_goto'>__PYX_ERR(1, 1575, __pyx_L1_error)</span>
  }
  __pyx_t_6 = __Pyx_dict_iterator(__pyx_v_batch_groups, 1, ((PyObject *)NULL), (&amp;__pyx_t_4), (&amp;__pyx_t_5));<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1575, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  __pyx_t_1 = __pyx_t_6;
  __pyx_t_6 = 0;
  while (1) {
    __pyx_t_7 = __Pyx_dict_iter_next(__pyx_t_1, __pyx_t_4, &amp;__pyx_t_3, &amp;__pyx_t_6, NULL, NULL, __pyx_t_5);
    if (unlikely(__pyx_t_7 == 0)) break;
    if (unlikely(__pyx_t_7 == -1)) <span class='error_goto'>__PYX_ERR(1, 1575, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_6); if (unlikely((__pyx_t_8 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1575, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_batch_key = __pyx_t_8;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1576</span>:             <span class="n">batches</span> <span class="o">=</span> <span class="n">batch_groups</span><span class="p">[</span><span class="n">batch_key</span><span class="p">]</span></pre>
<pre class='cython code score-21 '>    if (unlikely(__pyx_v_batch_groups == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
      <span class='error_goto'>__PYX_ERR(1, 1576, __pyx_L1_error)</span>
    }
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_batch_key);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1576, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_batch_groups, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1576, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))||((__pyx_t_9) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_9)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 1576, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batches, ((PyObject*)__pyx_t_9));
    __pyx_t_9 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1577</span>:             <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span></pre>
<pre class='cython code score-15 '>    if (unlikely(__pyx_v_batches == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
      <span class='error_goto'>__PYX_ERR(1, 1577, __pyx_L1_error)</span>
    }
    __pyx_t_9 = __pyx_v_batches; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_9); __pyx_t_10 = 0;
    for (;;) {
      if (__pyx_t_10 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_9)) break;
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_6 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_9, __pyx_t_10); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_10++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1577, __pyx_L1_error)</span>
      #else
      __pyx_t_6 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_9, __pyx_t_10); __pyx_t_10++;<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1577, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      #endif
      if (!(likely(((__pyx_t_6) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_6, __pyx_ptype_11kivent_core_9rendering_8batching_IndexedBatch))))) <span class='error_goto'>__PYX_ERR(1, 1577, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batch, ((struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_t_6));
      __pyx_t_6 = 0;
/*  */
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1578</span>:                 <span class="k">if</span> <span class="ow">not</span> <span class="n">static_rendering</span> <span class="ow">or</span> <span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>      __pyx_t_11 = ((!(__pyx_v_static_rendering != 0)) != 0);
      if (!__pyx_t_11) {
      } else {
        __pyx_t_2 = __pyx_t_11;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_force_update); if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1578, __pyx_L1_error)</span>
      __pyx_t_2 = __pyx_t_11;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_2) {
/*  */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1579</span>:                     <span class="n">entity_components</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">entity_components</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_batch-&gt;entity_components);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_entity_components, ((struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1580</span>:                     <span class="n">components_block</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">memory_block</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_entity_components-&gt;memory_block);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_components_block, ((struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1581</span>:                     <span class="n">used</span> <span class="o">=</span> <span class="n">components_block</span><span class="o">.</span><span class="n">used_count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_components_block-&gt;__pyx_base.used_count;
        __pyx_v_used = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1582</span>:                     <span class="n">component_count</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_entity_components-&gt;count;
        __pyx_v_component_count = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1583</span>:                     <span class="n">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">**&gt;</span><span class="n">components_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>        __pyx_v_component_data = ((void **)__pyx_v_components_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1584</span>:                     <span class="n">frame_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat2F4UB</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_vbo_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_data = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_vbo_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1585</span>:                     <span class="n">frame_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_indices_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_indices = ((GLushort *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_indices_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1586</span>:                     <span class="n">index_offset</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_v_index_offset = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1587</span>:                     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">used</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_used;
        __pyx_t_12 = __pyx_t_8;
        for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_12; __pyx_t_13+=1) {
          __pyx_v_i = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1588</span>:                         <span class="n">ri</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">component_count</span></pre>
<pre class='cython code score-0 '>          __pyx_v_ri = (__pyx_v_i * __pyx_v_component_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1589</span>:                         <span class="k">if</span> <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="p">]</span> <span class="o">==</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (((__pyx_v_component_data[__pyx_v_ri]) == NULL) != 0);
          if (__pyx_t_2) {
/*  */
          }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1590</span>:                             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>            goto __pyx_L10_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1591</span>:                         <span class="n">render_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>          __pyx_v_render_comp = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)(__pyx_v_component_data[(__pyx_v_ri + 0)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1592</span>:                         <span class="n">vert_offset</span> <span class="o">=</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">vert_index</span></pre>
<pre class='cython code score-0 '>          __pyx_t_7 = __pyx_v_render_comp-&gt;vert_index;
          __pyx_v_vert_offset = __pyx_t_7;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1593</span>:                         <span class="n">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">render_comp</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-2 '>          __pyx_t_6 = ((PyObject *)__pyx_v_render_comp-&gt;model);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_model, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_6));
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1594</span>:                         <span class="k">if</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (__pyx_v_render_comp-&gt;render != 0);
          if (__pyx_t_2) {
/*  */
          }
          __pyx_L10_continue:;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1595</span>:                             <span class="n">pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span></pre>
<pre class='cython code score-0 '>            __pyx_v_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 1)]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1596</span>:                                 <span class="n">ri</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1597</span>:                             <span class="n">color_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">ColorStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span></pre>
<pre class='cython code score-0 '>            __pyx_v_color_comp = ((__pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *)(__pyx_v_component_data[(__pyx_v_ri + 2)]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1598</span>:                                 <span class="n">ri</span><span class="o">+</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1599</span>:                             <span class="n">model_vertices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat2F4UB</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_vertices = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *)__pyx_v_model-&gt;vertices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0">&#xA0;<span class="">1600</span>:                                 <span class="n">model</span><span class="o">.</span><span class="n">vertices_block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1601</span>:                             <span class="n">model_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">model</span><span class="o">.</span><span class="n">indices_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_indices = ((GLushort *)__pyx_v_model-&gt;indices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1602</span>:                             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_index_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1603</span>:                                 <span class="n">frame_indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_frame_indices[(__pyx_v_i + __pyx_v_index_offset)]) = ((__pyx_v_model_indices[__pyx_v_i]) + __pyx_v_vert_offset);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1604</span>:                                     <span class="n">model_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1605</span>:                             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_vertex_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_n = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1606</span>:                                 <span class="n">vertex</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">frame_data</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_vertex = (&amp;(__pyx_v_frame_data[(__pyx_v_n + __pyx_v_vert_offset)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1607</span>:                                 <span class="n">model_vertex</span> <span class="o">=</span> <span class="n">model_vertices</span><span class="p">[</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_model_vertex = (__pyx_v_model_vertices[__pyx_v_n]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1608</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[0]) = (__pyx_v_pos_comp-&gt;x + (__pyx_v_model_vertex.pos[0]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1609</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[1]) = (__pyx_v_pos_comp-&gt;y + (__pyx_v_model_vertex.pos[1]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1610</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[0]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[0]), (__pyx_v_color_comp-&gt;color[0]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1611</span>:                                     <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1612</span>:                                     <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1613</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[1]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[1]), (__pyx_v_color_comp-&gt;color[1]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1614</span>:                                     <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1615</span>:                                     <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1616</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[2]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[2]), (__pyx_v_color_comp-&gt;color[2]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1617</span>:                                     <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1618</span>:                                     <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1619</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[3]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[3]), (__pyx_v_color_comp-&gt;color[3]));
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1620</span>:                                     <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">3</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1621</span>:                                     <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">3</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1622</span>:                             <span class="n">index_offset</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-0 '>            __pyx_v_index_offset = (__pyx_v_index_offset + __pyx_v_model-&gt;_index_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1623</span>:                     <span class="n">batch</span><span class="o">.</span><span class="n">set_index_count_for_frame</span><span class="p">(</span><span class="n">index_offset</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>        ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;set_index_count_for_frame(__pyx_v_batch, __pyx_v_index_offset);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1624</span>:                 <span class="n">mesh_instruction</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">mesh_instruction</span></pre>
<pre class='cython code score-4 '>      if (!(likely(((__pyx_v_batch-&gt;mesh_instruction) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_batch-&gt;mesh_instruction, __pyx_ptype_11kivent_core_9rendering_5cmesh_CMesh))))) <span class='error_goto'>__PYX_ERR(1, 1624, __pyx_L1_error)</span>
      __pyx_t_6 = __pyx_v_batch-&gt;mesh_instruction;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_mesh_instruction, ((struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_t_6));
      __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1625</span>:                 <span class="n">mesh_instruction</span><span class="o">.</span><span class="n">flag_update</span><span class="p">()</span></pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_v_mesh_instruction-&gt;__pyx_base.__pyx_base.__pyx_vtab)-&gt;__pyx_base.__pyx_base.flag_update(((struct __pyx_obj_4kivy_8graphics_12instructions_Instruction *)__pyx_v_mesh_instruction), 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1625, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1626</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1627</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">ScaledPolyRenderer</span><span class="p">(</span><span class="n">Renderer</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>struct __pyx_obj_11kivent_core_7systems_9renderers_ScaledPolyRenderer {
  struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer __pyx_base;
};
/*  */
struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_ScaledPolyRenderer {
  struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer __pyx_base;
};
static struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_ScaledPolyRenderer *__pyx_vtabptr_11kivent_core_7systems_9renderers_ScaledPolyRenderer;

</pre><pre class="cython line score-0">&#xA0;<span class="">1628</span>:     <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1629</span>: <span class="sd">    Processing Depends On: PositionSystem2D, PolyRenderer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1630</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1631</span>: <span class="sd">    The renderer draws with the VertexFormat2F4UB:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1632</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1633</span>: <span class="sd">    .. code-block:: cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1634</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1635</span>: <span class="sd">        ctypedef struct VertexFormat2F4UB:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1636</span>: <span class="sd">            GLfloat[2] pos</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1637</span>: <span class="sd">            GLubyte[4] v_color</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1638</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1639</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-41" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1640</span>:     <span class="n">system_names</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">([</span><span class="s">&#39;scaled_poly_renderer&#39;</span><span class="p">,</span> <span class="s">&#39;position&#39;</span><span class="p">,</span> <span class="s">&#39;scale&#39;</span><span class="p">,</span> <span class="s">&#39;color&#39;</span><span class="p">])</span></pre>
<pre class='cython code score-41 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1640, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(4);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1640, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_scaled_poly_renderer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_scaled_poly_renderer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_n_s_scaled_poly_renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_n_s_position);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_scale);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_scale);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_n_s_scale);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_color);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_color);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 3, __pyx_n_s_color);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1640, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ScaledPolyRenderer-&gt;tp_dict, __pyx_n_s_system_names, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1640, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_ScaledPolyRenderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1641</span>:     <span class="n">system_id</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;scaled_poly_renderer&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1641, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_scaled_poly_renderer) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_scaled_poly_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1641, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ScaledPolyRenderer-&gt;tp_dict, __pyx_n_s_system_id, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1641, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_ScaledPolyRenderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1642</span>:     <span class="n">model_format</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;vertex_format_2f4ub&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1642, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_vertex_format_2f4ub) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_vertex_format_2f4ub);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1642, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ScaledPolyRenderer-&gt;tp_dict, __pyx_n_s_model_format, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1642, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_ScaledPolyRenderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1643</span>:     <span class="n">vertex_format_size</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat2F4UB</span><span class="p">))</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1643, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1643, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1643, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ScaledPolyRenderer-&gt;tp_dict, __pyx_n_s_vertex_format_size, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1643, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_ScaledPolyRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">1644</span>: </pre>
<pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1645</span>:     <span class="k">cdef</span> <span class="kt">void</span>* <span class="nf">setup_batch_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Buffer</span> <span class="n">master_buffer</span><span class="p">)</span> <span class="k">except</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-11 '>static void *__pyx_f_11kivent_core_7systems_9renderers_18ScaledPolyRenderer_setup_batch_manager(struct __pyx_obj_11kivent_core_7systems_9renderers_ScaledPolyRenderer *__pyx_v_self, struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *__pyx_v_master_buffer) {
  struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *__pyx_v_batch_vertex_format = 0;
  PyObject *__pyx_v_x = NULL;
  void *__pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("setup_batch_manager", 0);
  <span class='trace'>__Pyx_TraceCall</span>("setup_batch_manager", __pyx_f[1], 1645, 0, <span class='error_goto'>__PYX_ERR(1, 1645, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.ScaledPolyRenderer.setup_batch_manager", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_vertex_format);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_x);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1646</span>:         <span class="k">cdef</span> <span class="kt">KEVertexFormat</span> <span class="nf">batch_vertex_format</span> <span class="o">=</span> <span class="n">KEVertexFormat</span><span class="p">(</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1646, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
/*  */
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PySequence_Tuple</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1646, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_2, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1646, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_13vertex_format_KEVertexFormat), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1646, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_batch_vertex_format = ((struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1647</span>:             <span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat2F4UB</span><span class="p">),</span> <span class="o">*</span><span class="n">vertex_format_2f4ub</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1647, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/*  */
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_vertex_format_2f4ub);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1647, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1648</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span> <span class="o">=</span> <span class="n">BatchManager</span><span class="p">(</span></pre>
<pre class='cython code score-23 '>  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(10);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1648, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, ((PyObject *)__pyx_v_batch_vertex_format));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, ((PyObject *)__pyx_v_master_buffer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_triangles);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_triangles);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 5, __pyx_n_s_triangles);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 6, __pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 7, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 8, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 9, __pyx_t_5);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_4 = 0;
  __pyx_t_6 = 0;
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_8batching_BatchManager), __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1648, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager));
  __pyx_v_self-&gt;__pyx_base.batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_5);
  __pyx_t_5 = 0;
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1649</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">size_of_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_count</span><span class="p">,</span></pre>
<pre class='cython code score-6 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_size_of_batches);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1649, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_max_batches);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1649, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_frame_count);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1649, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class="cython line score-0">&#xA0;<span class="">1650</span>:             <span class="n">batch_vertex_format</span><span class="p">,</span> <span class="n">master_buffer</span><span class="p">,</span> <span class="s">&#39;triangles&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span></pre>
<pre class="cython line score-53" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1651</span>:             <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_names</span><span class="p">],</span></pre>
<pre class='cython code score-53 '>  __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 1651, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_names);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1651, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_5)) || <span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_5)) {
    __pyx_t_6 = __pyx_t_5; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_7 = -1; __pyx_t_6 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1651, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = Py_TYPE(__pyx_t_6)-&gt;tp_iternext;<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(1, 1651, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_6))) {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1651, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1651, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1651, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1651, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_8(__pyx_t_6);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = <span class='py_c_api'>PyErr_Occurred</span>();
        if (exc_type) {
          if (likely(<span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(exc_type, PyExc_StopIteration))) <span class='py_c_api'>PyErr_Clear</span>();
          else <span class='error_goto'>__PYX_ERR(1, 1651, __pyx_L1_error)</span>
        }
        break;
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_x, __pyx_t_5);
    __pyx_t_5 = 0;
    if (unlikely(<span class='pyx_c_api'>__Pyx_ListComp_Append</span>(__pyx_t_4, (PyObject*)__pyx_v_x))) <span class='error_goto'>__PYX_ERR(1, 1651, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1652</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">smallest_vertex_count</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_smallest_vertex_count);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1652, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1652, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1653</span>:         <span class="k">return</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-0 '>  __pyx_r = ((void *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1654</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1655</span>: </pre>
<pre class="cython line score-38" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1656</span>:     <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-38 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_18ScaledPolyRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_18ScaledPolyRenderer_update[] = "ScaledPolyRenderer.update(self, force_update, dt)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_18ScaledPolyRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_force_update = 0;
  CYTHON_UNUSED PyObject *__pyx_v_dt = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_force_update,&amp;__pyx_n_s_dt,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_force_update)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 1656, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "update") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1656, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_force_update = values[0];
    __pyx_v_dt = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 1656, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.ScaledPolyRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_18ScaledPolyRenderer_update(((struct __pyx_obj_11kivent_core_7systems_9renderers_ScaledPolyRenderer *)__pyx_v_self), __pyx_v_force_update, __pyx_v_dt);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_18ScaledPolyRenderer_update(struct __pyx_obj_11kivent_core_7systems_9renderers_ScaledPolyRenderer *__pyx_v_self, PyObject *__pyx_v_force_update, CYTHON_UNUSED PyObject *__pyx_v_dt) {
  struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *__pyx_v_batch = 0;
  PyObject *__pyx_v_batches = 0;
  unsigned int __pyx_v_batch_key;
  unsigned int __pyx_v_index_offset;
  unsigned int __pyx_v_vert_offset;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_render_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_pos_comp;
  __pyx_t_11kivent_core_7systems_13scale_systems_ScaleStruct2D *__pyx_v_scale_comp;
  __pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *__pyx_v_color_comp;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_frame_data;
  GLushort *__pyx_v_frame_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_vertex;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  GLushort *__pyx_v_model_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_model_vertices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB __pyx_v_model_vertex;
  unsigned int __pyx_v_used;
  unsigned int __pyx_v_i;
  unsigned int __pyx_v_ri;
  unsigned int __pyx_v_component_count;
  unsigned int __pyx_v_n;
  struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *__pyx_v_entity_components = 0;
  struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *__pyx_v_batch_manager = 0;
  PyObject *__pyx_v_batch_groups = 0;
  struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *__pyx_v_mesh_instruction = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *__pyx_v_components_block = 0;
  void **__pyx_v_component_data;
  int __pyx_v_static_rendering;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("update", __pyx_f[1], 1656, 0, <span class='error_goto'>__PYX_ERR(1, 1656, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.ScaledPolyRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batches);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_groups);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_mesh_instruction);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components_block);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">1657</span>:         <span class="k">cdef</span> <span class="kt">IndexedBatch</span> <span class="nf">batch</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1658</span>:         <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">batches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1659</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">batch_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1660</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">index_offset</span><span class="p">,</span> <span class="nf">vert_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1661</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">render_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1662</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1663</span>:         <span class="k">cdef</span> <span class="kt">ScaleStruct2D</span>* <span class="nf">scale_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1664</span>:         <span class="k">cdef</span> <span class="kt">ColorStruct</span>* <span class="nf">color_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1665</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">frame_data</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1666</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">frame_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1667</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1668</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1669</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">model_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1670</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">model_vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1671</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span> <span class="nf">model_vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1672</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">used</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">ri</span><span class="p">,</span> <span class="nf">component_count</span><span class="p">,</span> <span class="nf">n</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1673</span>:         <span class="k">cdef</span> <span class="kt">ComponentPointerAggregator</span> <span class="nf">entity_components</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1674</span>:         <span class="k">cdef</span> <span class="kt">BatchManager</span> <span class="nf">batch_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1675</span>:         <span class="k">cdef</span> <span class="kt">dict</span> <span class="nf">batch_groups</span> <span class="o">=</span> <span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_groups</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_v_batch_manager-&gt;batch_groups;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_groups = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1676</span>:         <span class="k">cdef</span> <span class="kt">CMesh</span> <span class="nf">mesh_instruction</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1677</span>:         <span class="k">cdef</span> <span class="kt">MemoryBlock</span> <span class="nf">components_block</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1678</span>:         <span class="k">cdef</span> <span class="kt">void</span>** <span class="nf">component_data</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1679</span>:         <span class="k">cdef</span> <span class="kt">bint</span> <span class="nf">static_rendering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_rendering</span></pre>
<pre class='cython code score-10 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_static_rendering);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1679, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1679, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_static_rendering = __pyx_t_2;
</pre><pre class="cython line score-0">&#xA0;<span class="">1680</span>: </pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1681</span>:         <span class="k">for</span> <span class="n">batch_key</span> <span class="ow">in</span> <span class="n">batch_groups</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>  __pyx_t_3 = 0;
  if (unlikely(__pyx_v_batch_groups == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
    <span class='error_goto'>__PYX_ERR(1, 1681, __pyx_L1_error)</span>
  }
  __pyx_t_6 = __Pyx_dict_iterator(__pyx_v_batch_groups, 1, ((PyObject *)NULL), (&amp;__pyx_t_4), (&amp;__pyx_t_5));<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1681, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  __pyx_t_1 = __pyx_t_6;
  __pyx_t_6 = 0;
  while (1) {
    __pyx_t_7 = __Pyx_dict_iter_next(__pyx_t_1, __pyx_t_4, &amp;__pyx_t_3, &amp;__pyx_t_6, NULL, NULL, __pyx_t_5);
    if (unlikely(__pyx_t_7 == 0)) break;
    if (unlikely(__pyx_t_7 == -1)) <span class='error_goto'>__PYX_ERR(1, 1681, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_6); if (unlikely((__pyx_t_8 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1681, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_batch_key = __pyx_t_8;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1682</span>:             <span class="n">batches</span> <span class="o">=</span> <span class="n">batch_groups</span><span class="p">[</span><span class="n">batch_key</span><span class="p">]</span></pre>
<pre class='cython code score-21 '>    if (unlikely(__pyx_v_batch_groups == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
      <span class='error_goto'>__PYX_ERR(1, 1682, __pyx_L1_error)</span>
    }
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_batch_key);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1682, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_batch_groups, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1682, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_9))||((__pyx_t_9) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_9)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 1682, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batches, ((PyObject*)__pyx_t_9));
    __pyx_t_9 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1683</span>:             <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span></pre>
<pre class='cython code score-15 '>    if (unlikely(__pyx_v_batches == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
      <span class='error_goto'>__PYX_ERR(1, 1683, __pyx_L1_error)</span>
    }
    __pyx_t_9 = __pyx_v_batches; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_9); __pyx_t_10 = 0;
    for (;;) {
      if (__pyx_t_10 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_9)) break;
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_6 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_9, __pyx_t_10); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_10++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1683, __pyx_L1_error)</span>
      #else
      __pyx_t_6 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_9, __pyx_t_10); __pyx_t_10++;<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1683, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      #endif
      if (!(likely(((__pyx_t_6) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_6, __pyx_ptype_11kivent_core_9rendering_8batching_IndexedBatch))))) <span class='error_goto'>__PYX_ERR(1, 1683, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batch, ((struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_t_6));
      __pyx_t_6 = 0;
/*  */
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1684</span>:                 <span class="k">if</span> <span class="ow">not</span> <span class="n">static_rendering</span> <span class="ow">or</span> <span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>      __pyx_t_11 = ((!(__pyx_v_static_rendering != 0)) != 0);
      if (!__pyx_t_11) {
      } else {
        __pyx_t_2 = __pyx_t_11;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_force_update); if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1684, __pyx_L1_error)</span>
      __pyx_t_2 = __pyx_t_11;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_2) {
/*  */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1685</span>:                     <span class="n">entity_components</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">entity_components</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_batch-&gt;entity_components);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_entity_components, ((struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1686</span>:                     <span class="n">components_block</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">memory_block</span></pre>
<pre class='cython code score-2 '>        __pyx_t_6 = ((PyObject *)__pyx_v_entity_components-&gt;memory_block);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_components_block, ((struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *)__pyx_t_6));
        __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1687</span>:                     <span class="n">used</span> <span class="o">=</span> <span class="n">components_block</span><span class="o">.</span><span class="n">used_count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_components_block-&gt;__pyx_base.used_count;
        __pyx_v_used = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1688</span>:                     <span class="n">component_count</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_entity_components-&gt;count;
        __pyx_v_component_count = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1689</span>:                     <span class="n">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">**&gt;</span><span class="n">components_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>        __pyx_v_component_data = ((void **)__pyx_v_components_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1690</span>:                     <span class="n">frame_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat2F4UB</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_vbo_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_data = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_vbo_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1691</span>:                     <span class="n">frame_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_indices_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_indices = ((GLushort *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_indices_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1692</span>:                     <span class="n">index_offset</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_v_index_offset = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1693</span>:                     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">used</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_8 = __pyx_v_used;
        __pyx_t_12 = __pyx_t_8;
        for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_12; __pyx_t_13+=1) {
          __pyx_v_i = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1694</span>:                         <span class="n">ri</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">component_count</span></pre>
<pre class='cython code score-0 '>          __pyx_v_ri = (__pyx_v_i * __pyx_v_component_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1695</span>:                         <span class="k">if</span> <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="p">]</span> <span class="o">==</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (((__pyx_v_component_data[__pyx_v_ri]) == NULL) != 0);
          if (__pyx_t_2) {
/*  */
          }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1696</span>:                             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>            goto __pyx_L10_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1697</span>:                         <span class="n">render_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>          __pyx_v_render_comp = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)(__pyx_v_component_data[(__pyx_v_ri + 0)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1698</span>:                         <span class="n">vert_offset</span> <span class="o">=</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">vert_index</span></pre>
<pre class='cython code score-0 '>          __pyx_t_7 = __pyx_v_render_comp-&gt;vert_index;
          __pyx_v_vert_offset = __pyx_t_7;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1699</span>:                         <span class="n">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">render_comp</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-2 '>          __pyx_t_6 = ((PyObject *)__pyx_v_render_comp-&gt;model);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_model, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_6));
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1700</span>:                         <span class="k">if</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (__pyx_v_render_comp-&gt;render != 0);
          if (__pyx_t_2) {
/*  */
          }
          __pyx_L10_continue:;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1701</span>:                             <span class="n">pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 1)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1702</span>:                             <span class="n">scale_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">ScaleStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_scale_comp = ((__pyx_t_11kivent_core_7systems_13scale_systems_ScaleStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 2)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1703</span>:                             <span class="n">color_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">ColorStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span></pre>
<pre class='cython code score-0 '>            __pyx_v_color_comp = ((__pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *)(__pyx_v_component_data[(__pyx_v_ri + 3)]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1704</span>:                                 <span class="n">ri</span><span class="o">+</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1705</span>:                             <span class="n">model_vertices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat2F4UB</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_vertices = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *)__pyx_v_model-&gt;vertices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0">&#xA0;<span class="">1706</span>:                                 <span class="n">model</span><span class="o">.</span><span class="n">vertices_block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1707</span>:                             <span class="n">model_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">model</span><span class="o">.</span><span class="n">indices_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_indices = ((GLushort *)__pyx_v_model-&gt;indices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1708</span>:                             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_index_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1709</span>:                                 <span class="n">frame_indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_frame_indices[(__pyx_v_i + __pyx_v_index_offset)]) = ((__pyx_v_model_indices[__pyx_v_i]) + __pyx_v_vert_offset);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1710</span>:                                     <span class="n">model_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1711</span>:                             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_14 = __pyx_v_model-&gt;_vertex_count;
            __pyx_t_15 = __pyx_t_14;
            for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
              __pyx_v_n = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1712</span>:                                 <span class="n">vertex</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">frame_data</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_vertex = (&amp;(__pyx_v_frame_data[(__pyx_v_n + __pyx_v_vert_offset)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1713</span>:                                 <span class="n">model_vertex</span> <span class="o">=</span> <span class="n">model_vertices</span><span class="p">[</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>
              /* "kivent_core/systems/renderers.pyx":1713
 *                             for n in range(model._vertex_count):
 *                                 vertex = &amp;frame_data[n + vert_offset]
 *                                 model_vertex = model_vertices[n]             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                                 vertex.pos[0] = pos_comp.x + (
 *                                                 model_vertex.pos[0] *
 */
              __pyx_v_model_vertex = (__pyx_v_model_vertices[__pyx_v_n]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1714</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[0]) = (__pyx_v_pos_comp-&gt;x + ((__pyx_v_model_vertex.pos[0]) * __pyx_v_scale_comp-&gt;sx));
</pre><pre class="cython line score-0">&#xA0;<span class="">1715</span>:                                                 <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">*</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1716</span>:                                                 <span class="n">scale_comp</span><span class="o">.</span><span class="n">sx</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1717</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_comp</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[1]) = (__pyx_v_pos_comp-&gt;y + ((__pyx_v_model_vertex.pos[1]) * __pyx_v_scale_comp-&gt;sy));
</pre><pre class="cython line score-0">&#xA0;<span class="">1718</span>:                                                 <span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">*</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1719</span>:                                                 <span class="n">scale_comp</span><span class="o">.</span><span class="n">sy</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1720</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[0]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[0]), (__pyx_v_color_comp-&gt;color[0]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1721</span>:                                     <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1722</span>:                                     <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1723</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[1]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[1]), (__pyx_v_color_comp-&gt;color[1]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1724</span>:                                     <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1725</span>:                                     <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1726</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[2]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[2]), (__pyx_v_color_comp-&gt;color[2]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1727</span>:                                     <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1728</span>:                                     <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1729</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[3]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[3]), (__pyx_v_color_comp-&gt;color[3]));
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1730</span>:                                     <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">3</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1731</span>:                                     <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">3</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1732</span>:                             <span class="n">index_offset</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-0 '>            __pyx_v_index_offset = (__pyx_v_index_offset + __pyx_v_model-&gt;_index_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1733</span>:                     <span class="n">batch</span><span class="o">.</span><span class="n">set_index_count_for_frame</span><span class="p">(</span><span class="n">index_offset</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>        ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;set_index_count_for_frame(__pyx_v_batch, __pyx_v_index_offset);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1734</span>:                 <span class="n">mesh_instruction</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">mesh_instruction</span></pre>
<pre class='cython code score-4 '>      if (!(likely(((__pyx_v_batch-&gt;mesh_instruction) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_batch-&gt;mesh_instruction, __pyx_ptype_11kivent_core_9rendering_5cmesh_CMesh))))) <span class='error_goto'>__PYX_ERR(1, 1734, __pyx_L1_error)</span>
      __pyx_t_6 = __pyx_v_batch-&gt;mesh_instruction;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_mesh_instruction, ((struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_t_6));
      __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1735</span>:                 <span class="n">mesh_instruction</span><span class="o">.</span><span class="n">flag_update</span><span class="p">()</span></pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_v_mesh_instruction-&gt;__pyx_base.__pyx_base.__pyx_vtab)-&gt;__pyx_base.__pyx_base.flag_update(((struct __pyx_obj_4kivy_8graphics_12instructions_Instruction *)__pyx_v_mesh_instruction), 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1735, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1736</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1737</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1738</span>: <span class="k">cdef</span> <span class="k">class</span> <span class="nf">LerpScaledPolyRenderer</span><span class="p">(</span><span class="n">Renderer</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>struct __pyx_obj_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer {
  struct __pyx_obj_11kivent_core_7systems_9renderers_Renderer __pyx_base;
};
/*  */
struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer {
  struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_Renderer __pyx_base;
};
static struct __pyx_vtabstruct_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer *__pyx_vtabptr_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer;
</pre><pre class="cython line score-0">&#xA0;<span class="">1739</span>:     <span class="sd">&#39;&#39;&#39;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1740</span>: <span class="sd">    Processing Depends On: PositionSystem2D, PolyRenderer</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1741</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1742</span>: <span class="sd">    The renderer draws with the VertexFormat2F4UB:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1743</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1744</span>: <span class="sd">    .. code-block:: cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1745</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1746</span>: <span class="sd">        ctypedef struct VertexFormat2F4UB:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1747</span>: <span class="sd">            GLfloat[2] pos</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1748</span>: <span class="sd">            GLubyte[4] v_color</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1749</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1750</span>: <span class="sd">    &#39;&#39;&#39;</span></pre>
<pre class="cython line score-43" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1751</span>:     <span class="n">system_names</span> <span class="o">=</span> <span class="n">ListProperty</span><span class="p">([</span><span class="s">&#39;scaled_poly_renderer&#39;</span><span class="p">,</span> <span class="s">&#39;position&#39;</span><span class="p">,</span></pre>
<pre class='cython code score-43 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_ListProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1751, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(5);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1751, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_scaled_poly_renderer);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_scaled_poly_renderer);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_n_s_scaled_poly_renderer);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_n_s_position);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_last_position);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_last_position);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_n_s_last_position);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_scale);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_scale);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 3, __pyx_n_s_scale);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_color);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_color);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 4, __pyx_n_s_color);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1751, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer-&gt;tp_dict, __pyx_n_s_system_names, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1751, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">1752</span>:                                  <span class="s">&#39;last_position&#39;</span><span class="p">,</span> <span class="s">&#39;scale&#39;</span><span class="p">,</span> <span class="s">&#39;color&#39;</span><span class="p">])</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1753</span>:     <span class="n">system_id</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;scaled_poly_renderer&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1753, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_scaled_poly_renderer) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_scaled_poly_renderer);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1753, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer-&gt;tp_dict, __pyx_n_s_system_id, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1753, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1754</span>:     <span class="n">model_format</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="s">&#39;vertex_format_2f4ub&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-27 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_StringProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1754, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_n_s_vertex_format_2f4ub) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_n_s_vertex_format_2f4ub);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1754, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer-&gt;tp_dict, __pyx_n_s_model_format, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1754, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1755</span>:     <span class="n">vertex_format_size</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">(</span><span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat2F4UB</span><span class="p">))</span></pre>
<pre class='cython code score-30 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_NumericProperty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1755, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1755, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_4, __pyx_t_3) : <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) <span class='error_goto'>__PYX_ERR(1, 1755, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer-&gt;tp_dict, __pyx_n_s_vertex_format_size, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1755, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer);
</pre><pre class="cython line score-0">&#xA0;<span class="">1756</span>: </pre>
<pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1757</span>:     <span class="k">cdef</span> <span class="kt">void</span>* <span class="nf">setup_batch_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Buffer</span> <span class="n">master_buffer</span><span class="p">)</span> <span class="k">except</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-11 '>static void *__pyx_f_11kivent_core_7systems_9renderers_22LerpScaledPolyRenderer_setup_batch_manager(struct __pyx_obj_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer *__pyx_v_self, struct __pyx_obj_11kivent_core_15memory_handlers_9membuffer_Buffer *__pyx_v_master_buffer) {
  struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *__pyx_v_batch_vertex_format = 0;
  PyObject *__pyx_v_x = NULL;
  void *__pyx_r;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("setup_batch_manager", 0);
  <span class='trace'>__Pyx_TraceCall</span>("setup_batch_manager", __pyx_f[1], 1757, 0, <span class='error_goto'>__PYX_ERR(1, 1757, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.LerpScaledPolyRenderer.setup_batch_manager", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_vertex_format);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_x);
  <span class='trace'>__Pyx_TraceReturn</span>(Py_None, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1758</span>:         <span class="k">cdef</span> <span class="kt">KEVertexFormat</span> <span class="nf">batch_vertex_format</span> <span class="o">=</span> <span class="n">KEVertexFormat</span><span class="p">(</span></pre>
<pre class='cython code score-19 '>  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1758, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
/*  */
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PySequence_Tuple</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1758, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_2, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1758, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_13vertex_format_KEVertexFormat), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1758, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_batch_vertex_format = ((struct __pyx_obj_11kivent_core_9rendering_13vertex_format_KEVertexFormat *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1759</span>:             <span class="n">sizeof</span><span class="p">(</span><span class="n">VertexFormat2F4UB</span><span class="p">),</span> <span class="o">*</span><span class="n">vertex_format_2f4ub</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1759, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/*  */
  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_vertex_format_2f4ub);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1759, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1760</span>:         <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span> <span class="o">=</span> <span class="n">BatchManager</span><span class="p">(</span></pre>
<pre class='cython code score-23 '>  __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(10);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(1, 1760, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_batch_vertex_format));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, ((PyObject *)__pyx_v_batch_vertex_format));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_master_buffer));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 4, ((PyObject *)__pyx_v_master_buffer));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_triangles);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_triangles);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 5, __pyx_n_s_triangles);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 6, __pyx_v_self-&gt;__pyx_base.__pyx_base.__pyx_base.__pyx_base.canvas);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 7, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 8, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 9, __pyx_t_5);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_4 = 0;
  __pyx_t_6 = 0;
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_11kivent_core_9rendering_8batching_BatchManager), __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1760, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager));
  __pyx_v_self-&gt;__pyx_base.batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_5);
  __pyx_t_5 = 0;
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1761</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">size_of_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_batches</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_count</span><span class="p">,</span></pre>
<pre class='cython code score-6 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_size_of_batches);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1761, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_max_batches);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1761, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_frame_count);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1761, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class="cython line score-0">&#xA0;<span class="">1762</span>:             <span class="n">batch_vertex_format</span><span class="p">,</span> <span class="n">master_buffer</span><span class="p">,</span> <span class="s">&#39;triangles&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span></pre>
<pre class="cython line score-53" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1763</span>:             <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_names</span><span class="p">],</span></pre>
<pre class='cython code score-53 '>  __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(1, 1763, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_system_names);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1763, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_5)) || <span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_5)) {
    __pyx_t_6 = __pyx_t_5; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_7 = -1; __pyx_t_6 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1763, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    __pyx_t_8 = Py_TYPE(__pyx_t_6)-&gt;tp_iternext;<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(1, 1763, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_6))) {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1763, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1763, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_7 &gt;= <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_t_6, __pyx_t_7); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_7++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1763, __pyx_L1_error)</span>
        #else
        __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_6, __pyx_t_7); __pyx_t_7++;<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1763, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_8(__pyx_t_6);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = <span class='py_c_api'>PyErr_Occurred</span>();
        if (exc_type) {
          if (likely(<span class='pyx_c_api'>__Pyx_PyErr_GivenExceptionMatches</span>(exc_type, PyExc_StopIteration))) <span class='py_c_api'>PyErr_Clear</span>();
          else <span class='error_goto'>__PYX_ERR(1, 1763, __pyx_L1_error)</span>
        }
        break;
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_x, __pyx_t_5);
    __pyx_t_5 = 0;
    if (unlikely(<span class='pyx_c_api'>__Pyx_ListComp_Append</span>(__pyx_t_4, (PyObject*)__pyx_v_x))) <span class='error_goto'>__PYX_ERR(1, 1763, __pyx_L1_error)</span>
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1764</span>:             <span class="bp">self</span><span class="o">.</span><span class="n">smallest_vertex_count</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="p">)</span></pre>
<pre class='cython code score-4 '>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_smallest_vertex_count);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(1, 1764, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1764, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1765</span>:         <span class="k">return</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">*&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-0 '>  __pyx_r = ((void *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1766</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1767</span>: </pre>
<pre class="cython line score-38" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1768</span>:     <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span></pre>
<pre class='cython code score-38 '>/* Python wrapper */
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_22LerpScaledPolyRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11kivent_core_7systems_9renderers_22LerpScaledPolyRenderer_update[] = "LerpScaledPolyRenderer.update(self, force_update, dt)";
static PyObject *__pyx_pw_11kivent_core_7systems_9renderers_22LerpScaledPolyRenderer_1update(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_force_update = 0;
  PyObject *__pyx_v_dt = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_force_update,&amp;__pyx_n_s_dt,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_force_update)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(1, 1768, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "update") &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1768, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_force_update = values[0];
    __pyx_v_dt = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("update", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(1, 1768, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.LerpScaledPolyRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11kivent_core_7systems_9renderers_22LerpScaledPolyRenderer_update(((struct __pyx_obj_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer *)__pyx_v_self), __pyx_v_force_update, __pyx_v_dt);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11kivent_core_7systems_9renderers_22LerpScaledPolyRenderer_update(struct __pyx_obj_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer *__pyx_v_self, PyObject *__pyx_v_force_update, PyObject *__pyx_v_dt) {
  struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *__pyx_v_batch = 0;
  PyObject *__pyx_v_batches = 0;
  unsigned int __pyx_v_batch_key;
  unsigned int __pyx_v_index_offset;
  unsigned int __pyx_v_vert_offset;
  __pyx_t_11kivent_core_7systems_9renderers_RenderStruct *__pyx_v_render_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_pos_comp;
  __pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *__pyx_v_last_pos_comp;
  __pyx_t_11kivent_core_7systems_13scale_systems_ScaleStruct2D *__pyx_v_scale_comp;
  __pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *__pyx_v_color_comp;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_frame_data;
  GLushort *__pyx_v_frame_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_vertex;
  struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *__pyx_v_model = 0;
  GLushort *__pyx_v_model_indices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *__pyx_v_model_vertices;
  __pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB __pyx_v_model_vertex;
  unsigned int __pyx_v_used;
  unsigned int __pyx_v_i;
  unsigned int __pyx_v_ri;
  unsigned int __pyx_v_component_count;
  unsigned int __pyx_v_n;
  struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *__pyx_v_entity_components = 0;
  struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *__pyx_v_batch_manager = 0;
  PyObject *__pyx_v_batch_groups = 0;
  struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *__pyx_v_mesh_instruction = 0;
  struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *__pyx_v_components_block = 0;
  void **__pyx_v_component_data;
  int __pyx_v_static_rendering;
  float __pyx_v_update_speed;
  float __pyx_v_leftover;
  PyObject *__pyx_r = NULL;
  <span class='trace'>__Pyx_TraceDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("update", 0);
  <span class='trace'>__Pyx_TraceCall</span>("update", __pyx_f[1], 1768, 0, <span class='error_goto'>__PYX_ERR(1, 1768, __pyx_L1_error)</span>);
/*  */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("kivent_core.systems.renderers.LerpScaledPolyRenderer.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batches);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_model);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_entity_components);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_batch_manager);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_batch_groups);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_mesh_instruction);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_components_block);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='trace'>__Pyx_TraceReturn</span>(__pyx_r, 0);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">1769</span>:         <span class="k">cdef</span> <span class="kt">IndexedBatch</span> <span class="nf">batch</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1770</span>:         <span class="k">cdef</span> <span class="kt">list</span> <span class="nf">batches</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1771</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">batch_key</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1772</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">index_offset</span><span class="p">,</span> <span class="nf">vert_offset</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1773</span>:         <span class="k">cdef</span> <span class="kt">RenderStruct</span>* <span class="nf">render_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1774</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1775</span>:         <span class="k">cdef</span> <span class="kt">PositionStruct2D</span>* <span class="nf">last_pos_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1776</span>:         <span class="k">cdef</span> <span class="kt">ScaleStruct2D</span>* <span class="nf">scale_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1777</span>:         <span class="k">cdef</span> <span class="kt">ColorStruct</span>* <span class="nf">color_comp</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1778</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">frame_data</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1779</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">frame_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1780</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1781</span>:         <span class="k">cdef</span> <span class="kt">VertexModel</span> <span class="nf">model</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1782</span>:         <span class="k">cdef</span> <span class="kt">GLushort</span>* <span class="nf">model_indices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1783</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span>* <span class="nf">model_vertices</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1784</span>:         <span class="k">cdef</span> <span class="kt">VertexFormat2F4UB</span> <span class="nf">model_vertex</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1785</span>:         <span class="k">cdef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">used</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">ri</span><span class="p">,</span> <span class="nf">component_count</span><span class="p">,</span> <span class="nf">n</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1786</span>:         <span class="k">cdef</span> <span class="kt">ComponentPointerAggregator</span> <span class="nf">entity_components</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1787</span>:         <span class="k">cdef</span> <span class="kt">BatchManager</span> <span class="nf">batch_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_manager</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.batch_manager);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_manager = ((struct __pyx_obj_11kivent_core_9rendering_8batching_BatchManager *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1788</span>:         <span class="k">cdef</span> <span class="kt">dict</span> <span class="nf">batch_groups</span> <span class="o">=</span> <span class="n">batch_manager</span><span class="o">.</span><span class="n">batch_groups</span></pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_v_batch_manager-&gt;batch_groups;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_batch_groups = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1789</span>:         <span class="k">cdef</span> <span class="kt">CMesh</span> <span class="nf">mesh_instruction</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1790</span>:         <span class="k">cdef</span> <span class="kt">MemoryBlock</span> <span class="nf">components_block</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1791</span>:         <span class="k">cdef</span> <span class="kt">void</span>** <span class="nf">component_data</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1792</span>:         <span class="k">cdef</span> <span class="kt">bint</span> <span class="nf">static_rendering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">static_rendering</span></pre>
<pre class='cython code score-10 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_static_rendering);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1792, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1792, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_static_rendering = __pyx_t_2;
</pre><pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1793</span>:         <span class="k">cdef</span> <span class="kt">float</span> <span class="nf">update_speed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameworld</span><span class="o">.</span><span class="n">update_time</span></pre>
<pre class='cython code score-16 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_gameworld);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1793, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_update_time);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1793, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_4 = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_t_3); if (unlikely((__pyx_t_4 == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1793, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_update_speed = __pyx_t_4;
</pre><pre class="cython line score-31" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1794</span>:         <span class="k">cdef</span> <span class="kt">float</span> <span class="nf">leftover</span> <span class="o">=</span> <span class="p">(</span><span class="n">dt</span> <span class="o">-</span> <span class="n">update_speed</span><span class="p">)</span><span class="o">/</span><span class="n">update_speed</span></pre>
<pre class='cython code score-31 '>  __pyx_t_3 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_update_speed);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1794, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Subtract</span>(__pyx_v_dt, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1794, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_update_speed);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1794, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyNumber_Divide</span>(__pyx_t_1, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(1, 1794, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_4 = __pyx_<span class='py_c_api'>PyFloat_AsFloat</span>(__pyx_t_5); if (unlikely((__pyx_t_4 == (float)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1794, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_v_leftover = __pyx_t_4;
</pre><pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1795</span>:         <span class="k">for</span> <span class="n">batch_key</span> <span class="ow">in</span> <span class="n">batch_groups</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>  __pyx_t_6 = 0;
  if (unlikely(__pyx_v_batch_groups == Py_None)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
    <span class='error_goto'>__PYX_ERR(1, 1795, __pyx_L1_error)</span>
  }
  __pyx_t_3 = __Pyx_dict_iterator(__pyx_v_batch_groups, 1, ((PyObject *)NULL), (&amp;__pyx_t_7), (&amp;__pyx_t_8));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1795, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  __pyx_t_5 = __pyx_t_3;
  __pyx_t_3 = 0;
  while (1) {
    __pyx_t_9 = __Pyx_dict_iter_next(__pyx_t_5, __pyx_t_7, &amp;__pyx_t_6, &amp;__pyx_t_3, NULL, NULL, __pyx_t_8);
    if (unlikely(__pyx_t_9 == 0)) break;
    if (unlikely(__pyx_t_9 == -1)) <span class='error_goto'>__PYX_ERR(1, 1795, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_10 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_3); if (unlikely((__pyx_t_10 == (unsigned int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(1, 1795, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_v_batch_key = __pyx_t_10;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1796</span>:             <span class="n">batches</span> <span class="o">=</span> <span class="n">batch_groups</span><span class="p">[</span><span class="n">batch_key</span><span class="p">]</span></pre>
<pre class='cython code score-21 '>    if (unlikely(__pyx_v_batch_groups == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not subscriptable");
      <span class='error_goto'>__PYX_ERR(1, 1796, __pyx_L1_error)</span>
    }
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_unsigned_int</span>(__pyx_v_batch_key);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1796, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_batch_groups, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1796, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_1))||((__pyx_t_1) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_1)-&gt;tp_name), 0))) <span class='error_goto'>__PYX_ERR(1, 1796, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batches, ((PyObject*)__pyx_t_1));
    __pyx_t_1 = 0;
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1797</span>:             <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span></pre>
<pre class='cython code score-15 '>    if (unlikely(__pyx_v_batches == Py_None)) {
      <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");
      <span class='error_goto'>__PYX_ERR(1, 1797, __pyx_L1_error)</span>
    }
    __pyx_t_1 = __pyx_v_batches; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1); __pyx_t_11 = 0;
    for (;;) {
      if (__pyx_t_11 &gt;= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_1)) break;
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_3 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_1, __pyx_t_11); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3); __pyx_t_11++; if (unlikely(0 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1797, __pyx_L1_error)</span>
      #else
      __pyx_t_3 = <span class='py_macro_api'>PySequence_ITEM</span>(__pyx_t_1, __pyx_t_11); __pyx_t_11++;<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1797, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      #endif
      if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_11kivent_core_9rendering_8batching_IndexedBatch))))) <span class='error_goto'>__PYX_ERR(1, 1797, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_batch, ((struct __pyx_obj_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_t_3));
      __pyx_t_3 = 0;
/*  */
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1798</span>:                 <span class="k">if</span> <span class="ow">not</span> <span class="n">static_rendering</span> <span class="ow">or</span> <span class="n">force_update</span><span class="p">:</span></pre>
<pre class='cython code score-2 '>      __pyx_t_12 = ((!(__pyx_v_static_rendering != 0)) != 0);
      if (!__pyx_t_12) {
      } else {
        __pyx_t_2 = __pyx_t_12;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_force_update); if (unlikely(__pyx_t_12 &lt; 0)) <span class='error_goto'>__PYX_ERR(1, 1798, __pyx_L1_error)</span>
      __pyx_t_2 = __pyx_t_12;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_2) {
/*  */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1799</span>:                     <span class="n">entity_components</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">entity_components</span></pre>
<pre class='cython code score-2 '>        __pyx_t_3 = ((PyObject *)__pyx_v_batch-&gt;entity_components);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_entity_components, ((struct __pyx_obj_11kivent_core_7systems_19staticmemgamesystem_ComponentPointerAggregator *)__pyx_t_3));
        __pyx_t_3 = 0;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1800</span>:                     <span class="n">components_block</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">memory_block</span></pre>
<pre class='cython code score-2 '>        __pyx_t_3 = ((PyObject *)__pyx_v_entity_components-&gt;memory_block);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_components_block, ((struct __pyx_obj_11kivent_core_15memory_handlers_5block_MemoryBlock *)__pyx_t_3));
        __pyx_t_3 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1801</span>:                     <span class="n">used</span> <span class="o">=</span> <span class="n">components_block</span><span class="o">.</span><span class="n">used_count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_10 = __pyx_v_components_block-&gt;__pyx_base.used_count;
        __pyx_v_used = __pyx_t_10;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1802</span>:                     <span class="n">component_count</span> <span class="o">=</span> <span class="n">entity_components</span><span class="o">.</span><span class="n">count</span></pre>
<pre class='cython code score-0 '>        __pyx_t_10 = __pyx_v_entity_components-&gt;count;
        __pyx_v_component_count = __pyx_t_10;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1803</span>:                     <span class="n">component_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">void</span><span class="o">**&gt;</span><span class="n">components_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>        __pyx_v_component_data = ((void **)__pyx_v_components_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1804</span>:                     <span class="n">frame_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat2F4UB</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_vbo_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_data = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_vbo_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1805</span>:                     <span class="n">frame_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">batch</span><span class="o">.</span><span class="n">get_indices_frame_to_draw</span><span class="p">()</span></pre>
<pre class='cython code score-0 '>        __pyx_v_frame_indices = ((GLushort *)((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;get_indices_frame_to_draw(__pyx_v_batch));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1806</span>:                     <span class="n">index_offset</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_v_index_offset = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1807</span>:                     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">used</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>        __pyx_t_10 = __pyx_v_used;
        __pyx_t_13 = __pyx_t_10;
        for (__pyx_t_14 = 0; __pyx_t_14 &lt; __pyx_t_13; __pyx_t_14+=1) {
          __pyx_v_i = __pyx_t_14;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1808</span>:                         <span class="n">ri</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">component_count</span></pre>
<pre class='cython code score-0 '>          __pyx_v_ri = (__pyx_v_i * __pyx_v_component_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1809</span>:                         <span class="k">if</span> <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="p">]</span> <span class="o">==</span> <span class="bp">NULL</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (((__pyx_v_component_data[__pyx_v_ri]) == NULL) != 0);
          if (__pyx_t_2) {
/*  */
          }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1810</span>:                             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>            goto __pyx_L10_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1811</span>:                         <span class="n">render_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RenderStruct</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>          __pyx_v_render_comp = ((__pyx_t_11kivent_core_7systems_9renderers_RenderStruct *)(__pyx_v_component_data[(__pyx_v_ri + 0)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1812</span>:                         <span class="n">vert_offset</span> <span class="o">=</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">vert_index</span></pre>
<pre class='cython code score-0 '>          __pyx_t_9 = __pyx_v_render_comp-&gt;vert_index;
          __pyx_v_vert_offset = __pyx_t_9;
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1813</span>:                         <span class="n">model</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">VertexModel</span><span class="p">&gt;</span><span class="n">render_comp</span><span class="o">.</span><span class="n">model</span></pre>
<pre class='cython code score-2 '>          __pyx_t_3 = ((PyObject *)__pyx_v_render_comp-&gt;model);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_model, ((struct __pyx_obj_11kivent_core_9rendering_5model_VertexModel *)__pyx_t_3));
          __pyx_t_3 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1814</span>:                         <span class="k">if</span> <span class="n">render_comp</span><span class="o">.</span><span class="n">render</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>          __pyx_t_2 = (__pyx_v_render_comp-&gt;render != 0);
          if (__pyx_t_2) {
/*  */
          }
          __pyx_L10_continue:;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1815</span>:                             <span class="n">pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 1)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1816</span>:                             <span class="n">last_pos_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">PositionStruct2D</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_last_pos_comp = ((__pyx_t_11kivent_core_7systems_16position_systems_PositionStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 2)]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1817</span>:                                 <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">2</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1818</span>:                             <span class="n">scale_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">ScaleStruct2D</span><span class="o">*&gt;</span><span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>            __pyx_v_scale_comp = ((__pyx_t_11kivent_core_7systems_13scale_systems_ScaleStruct2D *)(__pyx_v_component_data[(__pyx_v_ri + 3)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1819</span>:                             <span class="n">color_comp</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">ColorStruct</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_color_comp = ((__pyx_t_11kivent_core_7systems_13color_systems_ColorStruct *)(__pyx_v_component_data[(__pyx_v_ri + 4)]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1820</span>:                                 <span class="n">component_data</span><span class="p">[</span><span class="n">ri</span><span class="o">+</span><span class="mf">4</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1821</span>:                             <span class="n">model_vertices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VertexFormat2F4UB</span><span class="o">*&gt;</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_vertices = ((__pyx_t_11kivent_core_9rendering_14vertex_formats_VertexFormat2F4UB *)__pyx_v_model-&gt;vertices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0">&#xA0;<span class="">1822</span>:                                 <span class="n">model</span><span class="o">.</span><span class="n">vertices_block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1823</span>:                             <span class="n">model_indices</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GLushort</span><span class="o">*&gt;</span><span class="n">model</span><span class="o">.</span><span class="n">indices_block</span><span class="o">.</span><span class="n">data</span></pre>
<pre class='cython code score-0 '>            __pyx_v_model_indices = ((GLushort *)__pyx_v_model-&gt;indices_block-&gt;__pyx_base.data);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1824</span>:                             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_index_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_15 = __pyx_v_model-&gt;_index_count;
            __pyx_t_16 = __pyx_t_15;
            for (__pyx_t_17 = 0; __pyx_t_17 &lt; __pyx_t_16; __pyx_t_17+=1) {
              __pyx_v_i = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1825</span>:                                 <span class="n">frame_indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_offset</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_frame_indices[(__pyx_v_i + __pyx_v_index_offset)]) = ((__pyx_v_model_indices[__pyx_v_i]) + __pyx_v_vert_offset);
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1826</span>:                                     <span class="n">model_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1827</span>:                             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>            __pyx_t_15 = __pyx_v_model-&gt;_vertex_count;
            __pyx_t_16 = __pyx_t_15;
            for (__pyx_t_17 = 0; __pyx_t_17 &lt; __pyx_t_16; __pyx_t_17+=1) {
              __pyx_v_n = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1828</span>:                                 <span class="n">vertex</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">frame_data</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="n">vert_offset</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_vertex = (&amp;(__pyx_v_frame_data[(__pyx_v_n + __pyx_v_vert_offset)]));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1829</span>:                                 <span class="n">model_vertex</span> <span class="o">=</span> <span class="n">model_vertices</span><span class="p">[</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>              __pyx_v_model_vertex = (__pyx_v_model_vertices[__pyx_v_n]);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1830</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">last_pos_comp</span><span class="o">.</span><span class="n">x</span><span class="p">,</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[0]) = (__pyx_f_11kivent_core_7systems_9renderers_lerp(__pyx_v_last_pos_comp-&gt;x, __pyx_v_pos_comp-&gt;x, __pyx_v_leftover) + ((__pyx_v_model_vertex.pos[0]) * __pyx_v_scale_comp-&gt;sx));
</pre><pre class="cython line score-0">&#xA0;<span class="">1831</span>:                                                      <span class="n">pos_comp</span><span class="o">.</span><span class="n">x</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1832</span>:                                                      <span class="n">leftover</span><span class="p">)</span> <span class="o">+</span> \</pre>
<pre class="cython line score-0">&#xA0;<span class="">1833</span>:                                                 <span class="p">(</span><span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">*</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1834</span>:                                                  <span class="n">scale_comp</span><span class="o">.</span><span class="n">sx</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1835</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">last_pos_comp</span><span class="o">.</span><span class="n">y</span><span class="p">,</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;pos[1]) = (__pyx_f_11kivent_core_7systems_9renderers_lerp(__pyx_v_last_pos_comp-&gt;y, __pyx_v_pos_comp-&gt;y, __pyx_v_leftover) + ((__pyx_v_model_vertex.pos[1]) * __pyx_v_scale_comp-&gt;sy));
</pre><pre class="cython line score-0">&#xA0;<span class="">1836</span>:                                                      <span class="n">pos_comp</span><span class="o">.</span><span class="n">y</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1837</span>:                                                      <span class="n">leftover</span><span class="p">)</span> <span class="o">+</span> \</pre>
<pre class="cython line score-0">&#xA0;<span class="">1838</span>:                                                 <span class="p">(</span><span class="n">model_vertex</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">*</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1839</span>:                                                  <span class="n">scale_comp</span><span class="o">.</span><span class="n">sy</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1840</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[0]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[0]), (__pyx_v_color_comp-&gt;color[0]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1841</span>:                                     <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1842</span>:                                     <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1843</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[1]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[1]), (__pyx_v_color_comp-&gt;color[1]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1844</span>:                                     <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1845</span>:                                     <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1846</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[2]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[2]), (__pyx_v_color_comp-&gt;color[2]));
</pre><pre class="cython line score-0">&#xA0;<span class="">1847</span>:                                     <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1848</span>:                                     <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1849</span>:                                 <span class="n">vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">blend_integer_colors</span><span class="p">(</span></pre>
<pre class='cython code score-0 '>              (__pyx_v_vertex-&gt;v_color[3]) = __pyx_f_11kivent_core_7systems_9renderers_blend_integer_colors((__pyx_v_model_vertex.v_color[3]), (__pyx_v_color_comp-&gt;color[3]));
            }
</pre><pre class="cython line score-0">&#xA0;<span class="">1850</span>:                                     <span class="n">model_vertex</span><span class="o">.</span><span class="n">v_color</span><span class="p">[</span><span class="mf">3</span><span class="p">],</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">1851</span>:                                     <span class="n">color_comp</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="mf">3</span><span class="p">])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1852</span>:                             <span class="n">index_offset</span> <span class="o">+=</span> <span class="n">model</span><span class="o">.</span><span class="n">_index_count</span></pre>
<pre class='cython code score-0 '>            __pyx_v_index_offset = (__pyx_v_index_offset + __pyx_v_model-&gt;_index_count);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1853</span>:                     <span class="n">batch</span><span class="o">.</span><span class="n">set_index_count_for_frame</span><span class="p">(</span><span class="n">index_offset</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>        ((struct __pyx_vtabstruct_11kivent_core_9rendering_8batching_IndexedBatch *)__pyx_v_batch-&gt;__pyx_vtab)-&gt;set_index_count_for_frame(__pyx_v_batch, __pyx_v_index_offset);
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1854</span>:                 <span class="n">mesh_instruction</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">mesh_instruction</span></pre>
<pre class='cython code score-4 '>      if (!(likely(((__pyx_v_batch-&gt;mesh_instruction) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_batch-&gt;mesh_instruction, __pyx_ptype_11kivent_core_9rendering_5cmesh_CMesh))))) <span class='error_goto'>__PYX_ERR(1, 1854, __pyx_L1_error)</span>
      __pyx_t_3 = __pyx_v_batch-&gt;mesh_instruction;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_mesh_instruction, ((struct __pyx_obj_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_t_3));
      __pyx_t_3 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1855</span>:                 <span class="n">mesh_instruction</span><span class="o">.</span><span class="n">flag_update</span><span class="p">()</span></pre>
<pre class='cython code score-1 '>      __pyx_t_3 = ((struct __pyx_vtabstruct_11kivent_core_9rendering_5cmesh_CMesh *)__pyx_v_mesh_instruction-&gt;__pyx_base.__pyx_base.__pyx_vtab)-&gt;__pyx_base.__pyx_base.flag_update(((struct __pyx_obj_4kivy_8graphics_12instructions_Instruction *)__pyx_v_mesh_instruction), 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1855, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">1856</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1857</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">1858</span>: </pre>
<pre class="cython line score-22" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1859</span>: <span class="n">Factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;Renderer&#39;</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">Renderer</span><span class="p">)</span></pre>
<pre class='cython code score-22 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_2, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1859, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_register);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1859, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1859, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_cls, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_Renderer)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1859, __pyx_L1_error)</span>
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_tuple__22, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1859, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
/*  */
  __pyx_tuple__22 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_s_Renderer);<span class='error_goto'> if (unlikely(!__pyx_tuple__22)) __PYX_ERR(1, 1859, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__22);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__22);
</pre><pre class="cython line score-22" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1860</span>: <span class="n">Factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;RotateRenderer&#39;</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">RotateRenderer</span><span class="p">)</span></pre>
<pre class='cython code score-22 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1860, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_register);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1860, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1860, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_3, __pyx_n_s_cls, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateRenderer)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1860, __pyx_L1_error)</span>
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_tuple__23, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1860, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
/*  */
  __pyx_tuple__23 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_s_RotateRenderer);<span class='error_goto'> if (unlikely(!__pyx_tuple__23)) __PYX_ERR(1, 1860, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__23);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__23);
</pre><pre class="cython line score-22" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1861</span>: <span class="n">Factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;RotateScaleRenderer&#39;</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">RotateScaleRenderer</span><span class="p">)</span></pre>
<pre class='cython code score-22 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1861, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_register);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1861, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1861, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_cls, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateScaleRenderer)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1861, __pyx_L1_error)</span>
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_tuple__24, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1861, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
/*  */
  __pyx_tuple__24 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_s_RotateScaleRenderer);<span class='error_goto'> if (unlikely(!__pyx_tuple__24)) __PYX_ERR(1, 1861, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__24);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__24);
</pre><pre class="cython line score-22" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1862</span>: <span class="n">Factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;RotateColorRenderer&#39;</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">RotateColorRenderer</span><span class="p">)</span></pre>
<pre class='cython code score-22 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_2, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1862, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_register);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1862, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1862, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_cls, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorRenderer)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1862, __pyx_L1_error)</span>
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_tuple__25, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1862, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
/*  */
  __pyx_tuple__25 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_s_RotateColorRenderer);<span class='error_goto'> if (unlikely(!__pyx_tuple__25)) __PYX_ERR(1, 1862, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__25);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__25);
</pre><pre class="cython line score-22" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1863</span>: <span class="n">Factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;RotateColorScaleRenderer&#39;</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">RotateColorScaleRenderer</span><span class="p">)</span></pre>
<pre class='cython code score-22 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1863, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_register);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1863, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1863, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_3, __pyx_n_s_cls, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScaleRenderer)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1863, __pyx_L1_error)</span>
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_tuple__26, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1863, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
/*  */
  __pyx_tuple__26 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_s_RotateColorScaleRenderer);<span class='error_goto'> if (unlikely(!__pyx_tuple__26)) __PYX_ERR(1, 1863, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__26);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__26);
</pre><pre class="cython line score-22" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1864</span>: <span class="n">Factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;ColorRenderer&#39;</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">ColorRenderer</span><span class="p">)</span></pre>
<pre class='cython code score-22 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1864, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_register);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1864, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1864, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_cls, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ColorRenderer)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1864, __pyx_L1_error)</span>
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_tuple__27, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1864, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
/*  */
  __pyx_tuple__27 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_s_ColorRenderer);<span class='error_goto'> if (unlikely(!__pyx_tuple__27)) __PYX_ERR(1, 1864, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__27);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__27);
</pre><pre class="cython line score-22" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1865</span>: <span class="n">Factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;PolyRenderer&#39;</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">PolyRenderer</span><span class="p">)</span></pre>
<pre class='cython code score-22 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_2, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1865, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_register);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1865, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1865, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_cls, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_PolyRenderer)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1865, __pyx_L1_error)</span>
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_tuple__28, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1865, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
/*  */
  __pyx_tuple__28 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_s_PolyRenderer);<span class='error_goto'> if (unlikely(!__pyx_tuple__28)) __PYX_ERR(1, 1865, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__28);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__28);
</pre><pre class="cython line score-22" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1866</span>: <span class="n">Factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;RotatePolyRenderer&#39;</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">RotatePolyRenderer</span><span class="p">)</span></pre>
<pre class='cython code score-22 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1866, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_register);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1866, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1866, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_3, __pyx_n_s_cls, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotatePolyRenderer)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1866, __pyx_L1_error)</span>
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_tuple__29, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1866, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
/*  */
  __pyx_tuple__29 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_s_RotatePolyRenderer);<span class='error_goto'> if (unlikely(!__pyx_tuple__29)) __PYX_ERR(1, 1866, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__29);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__29);
</pre><pre class="cython line score-22" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1867</span>: <span class="n">Factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;ColorPolyRenderer&#39;</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">ColorPolyRenderer</span><span class="p">)</span></pre>
<pre class='cython code score-22 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1867, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_register);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1867, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1867, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_cls, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ColorPolyRenderer)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1867, __pyx_L1_error)</span>
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_tuple__30, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1867, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
/*  */
  __pyx_tuple__30 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_s_ColorPolyRenderer);<span class='error_goto'> if (unlikely(!__pyx_tuple__30)) __PYX_ERR(1, 1867, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__30);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__30);
</pre><pre class="cython line score-22" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1868</span>: <span class="n">Factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;ScaledPolyRenderer&#39;</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">ScaledPolyRenderer</span><span class="p">)</span></pre>
<pre class='cython code score-22 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_2, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1868, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_register);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1868, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1868, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_cls, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_ScaledPolyRenderer)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1868, __pyx_L1_error)</span>
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_tuple__31, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1868, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
/*  */
  __pyx_tuple__31 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_s_ScaledPolyRenderer);<span class='error_goto'> if (unlikely(!__pyx_tuple__31)) __PYX_ERR(1, 1868, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__31);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__31);
</pre><pre class="cython line score-22" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1869</span>: <span class="n">Factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;RotateColorScalePolyRenderer&#39;</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">RotateColorScalePolyRenderer</span><span class="p">)</span></pre>
<pre class='cython code score-22 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_3, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1869, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_register);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1869, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1869, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_3, __pyx_n_s_cls, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_RotateColorScalePolyRenderer)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1869, __pyx_L1_error)</span>
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_tuple__32, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1869, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
/*  */
  __pyx_tuple__32 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_s_RotateColorScalePolyRenderer);<span class='error_goto'> if (unlikely(!__pyx_tuple__32)) __PYX_ERR(1, 1869, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__32);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__32);
</pre><pre class="cython line score-22" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">1870</span>: <span class="n">Factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;LerpScaledPolyRenderer&#39;</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">LerpScaledPolyRenderer</span><span class="p">)</span></pre>
<pre class='cython code score-22 '>  <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_t_1, __pyx_n_s_Factory);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1870, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_register);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(1, 1870, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 1870, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_cls, ((PyObject *)__pyx_ptype_11kivent_core_7systems_9renderers_LerpScaledPolyRenderer)) &lt; 0) <span class='error_goto'>__PYX_ERR(1, 1870, __pyx_L1_error)</span>
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_tuple__33, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(1, 1870, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
/*  */
  __pyx_tuple__33 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_s_LerpScaledPolyRenderer);<span class='error_goto'> if (unlikely(!__pyx_tuple__33)) __PYX_ERR(1, 1870, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__33);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__33);
</pre></div></body></html>
